2025-06-07T09:43:33.9726788+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T09:43:34.0556516+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T09:43:34.0597527+07:00 [DBG] (///) Hosting starting
2025-06-07T09:43:34.2193594+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T09:43:34.2198258+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T09:43:34.2984484+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T09:43:34.2997735+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T09:43:34.3049690+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T09:43:34.3056120+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T09:43:34.3057296+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T09:43:34.3058844+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T09:43:34.3059273+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T09:43:34.3059435+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T09:43:34.3059776+07:00 [DBG] (///) Hosting started
2025-06-07T09:45:08.1330861+07:00 [INF] (///) Application is shutting down...
2025-06-07T09:45:08.1339018+07:00 [DBG] (///) Hosting stopping
2025-06-07T09:45:08.1392494+07:00 [DBG] (///) Hosting stopped
2025-06-07T09:45:12.6526196+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T09:45:12.7283706+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T09:45:12.7326508+07:00 [DBG] (///) Hosting starting
2025-06-07T09:45:12.8974353+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T09:45:12.8978601+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T09:45:12.9623947+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T09:45:12.9639694+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T09:45:12.9694691+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T09:45:12.9700525+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T09:45:12.9701853+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T09:45:12.9703673+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T09:45:12.9704163+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T09:45:12.9704379+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T09:45:12.9704738+07:00 [DBG] (///) Hosting started
2025-06-07T09:45:46.7231929+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG6"" accepted.
2025-06-07T09:45:46.7240376+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG6"" started.
2025-06-07T09:45:46.7464608+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T09:45:46.8110662+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T09:45:46.8150366+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T09:45:46.8192467+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:45:46.8256584+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:45:46.8263986+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:45:46.9602651+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T09:45:47.3664118+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T09:45:47.3667760+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T09:45:47.4352965+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T09:45:47.4589058+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T09:45:47.5520080+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:45:47.6012255+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Count()"'
2025-06-07T09:45:47.7819371+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T09:45:47.8124819+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:45:47.8449136+07:00 [DBG] (///) Created DbConnection. (30ms).
2025-06-07T09:45:47.8480244+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:47.9388140+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:47.9457333+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:45:47.9523233+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T09:45:47.9537588+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (8ms).
2025-06-07T09:45:47.9604767+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:45:48.0025341+07:00 [INF] (///) Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:45:48.0451563+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:48.0529111+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 44ms reading results.
2025-06-07T09:45:48.0573982+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:48.0616789+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (4ms).
2025-06-07T09:45:48.0672956+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-07T09:45:48.0760937+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T09:45:48.0770390+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T09:45:48.0878387+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<StudentBasicInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        string value2;
        string value3;
        string value4;
        string value5;
        value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
        value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
        value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
        value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
        return new StudentBasicInfo{ 
            StudentCode = value1, 
            LastName = value2, 
            FirstName = value3, 
            ClassCode = value4, 
            FacultyCode = value5 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:45:48.0968382+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:48.0974795+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:48.0977651+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:45:48.0978331+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:45:48.1029595+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (5ms).
2025-06-07T09:45:48.1056126+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:45:48.1176453+07:00 [INF] (///) Executed DbCommand ("14"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:45:48.1231037+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:48.1233199+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 5ms reading results.
2025-06-07T09:45:48.1235012+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:48.1235750+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:45:48.1254135+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:45:48.1293975+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T09:45:48.1487653+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:45:48.1569140+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 1328.2826 ms
2025-06-07T09:45:48.1642121+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG6"" received FIN.
2025-06-07T09:45:48.1646110+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG6"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:45:48.1680924+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG6"" disconnecting.
2025-06-07T09:45:48.1699073+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:45:48.1746354+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:48.1768850+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T09:45:48.1786993+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 1433.466ms
2025-06-07T09:45:48.1827622+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG6"" stopped.
2025-06-07T09:45:54.3192588+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG7"" accepted.
2025-06-07T09:45:54.3195040+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG7"" started.
2025-06-07T09:45:54.3203128+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:45:54.3218170+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:45:54.3221925+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:45:54.3224201+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:45:54.3228024+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:45:54.3229367+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:45:54.3526387+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:45:54.3555628+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T09:45:54.4622910+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T09:45:54.4731008+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:45:54.4732480+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:45:54.4732872+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.4733551+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.4735227+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:45:54.4735852+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:45:54.4739696+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:45:54.4740947+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:45:54.4859117+07:00 [INF] (///) Executed DbCommand ("12"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:45:54.4941491+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.4942862+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 8ms reading results.
2025-06-07T09:45:54.4944490+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.4947582+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:45:54.4951856+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:45:54.4993658+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:45:54.5044137+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:45:54.5048040+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 181.7723 ms
2025-06-07T09:45:54.5051223+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:45:54.5052536+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.5054563+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:45:54.5055445+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG7"" received FIN.
2025-06-07T09:45:54.5057113+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 185.3764ms
2025-06-07T09:45:54.5057260+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG7"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:45:54.5059344+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG7"" disconnecting.
2025-06-07T09:45:54.5071650+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG7"" stopped.
2025-06-07T09:45:54.5104932+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG8"" accepted.
2025-06-07T09:45:54.5106451+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG8"" started.
2025-06-07T09:45:54.5110417+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:45:54.5112450+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:45:54.5113276+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:45:54.5113878+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:45:54.5114955+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:45:54.5115615+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:45:54.5509266+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:45:54.5545518+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:45:54.5546672+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:45:54.5547030+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.5548216+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.5550002+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:45:54.5550504+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:45:54.5551084+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:45:54.5551851+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:45:54.5566920+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:45:54.5569955+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.5570802+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:45:54.5572037+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.5572690+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:45:54.5574437+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:45:54.5575339+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:45:54.5577988+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:45:54.5579356+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 46.3718 ms
2025-06-07T09:45:54.5580347+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:45:54.5580848+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:54.5581324+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:45:54.5582010+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 47.1525ms
2025-06-07T09:45:54.5582778+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG8"" disconnecting.
2025-06-07T09:45:54.5583091+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG8"" stopped.
2025-06-07T09:45:54.5583951+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG8"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:45:56.3295015+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG9"" accepted.
2025-06-07T09:45:56.3296535+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG9"" started.
2025-06-07T09:45:56.3301072+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:45:56.3304321+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:45:56.3304794+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:45:56.3305246+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:45:56.3306214+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:45:56.3306645+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:45:56.3340066+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:45:56.3350798+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T09:45:56.3434899+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:45:56.3447547+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:45:56.3448164+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:45:56.3448358+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:56.3448714+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:56.3449808+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:45:56.3450044+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:45:56.3450389+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:45:56.3450766+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:45:56.3462629+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:45:56.3489681+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:56.3490496+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 2ms reading results.
2025-06-07T09:45:56.3491464+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:56.3491991+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:45:56.3493869+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:45:56.3499598+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:45:56.3511473+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:45:56.3512894+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 20.5788 ms
2025-06-07T09:45:56.3513860+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:45:56.3514330+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:45:56.3514661+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:45:56.3515259+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 21.4127ms
2025-06-07T09:45:56.3515734+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG9"" disconnecting.
2025-06-07T09:45:56.3516014+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG9"" stopped.
2025-06-07T09:45:56.3516273+07:00 [DBG] (///) Connection id ""0HND5DLJS2UG9"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:01.1633250+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGA"" accepted.
2025-06-07T09:46:01.1633990+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGA"" started.
2025-06-07T09:46:01.1642605+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 139
2025-06-07T09:46:01.1644576+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:01.1644964+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:01.1645386+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:01.1646393+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:01.1651415+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:46:01.1652749+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:46:01.1655594+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:01.1690351+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGA"", Request id ""0HND5DLJS2UGA:00000001"": started reading request body.
2025-06-07T09:46:01.1691573+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGA"", Request id ""0HND5DLJS2UGA:00000001"": done reading request body.
2025-06-07T09:46:01.1778755+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:01.1847843+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:01.1848741+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:01.1849003+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.1849693+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.1867427+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:46:01.1905886+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:46:01.1968745+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __Select_3
        .Contains(p.PaymentDate))
    .ExecuteDelete()"'
2025-06-07T09:46:01.2353678+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__Select_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__Select_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:46:01.2411221+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:46:01.2412048+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:46:01.2470532+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (5ms).
2025-06-07T09:46:01.2478901+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__Select_3={ '06/05/2025', '06/02/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__Select_3)"
2025-06-07T09:46:01.3244673+07:00 [INF] (///) Executed DbCommand ("77"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__Select_3={ '06/05/2025', '06/02/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__Select_3)"
2025-06-07T09:46:01.3278642+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:46:01.3320454+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:46:01.3335334+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3338400+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:01.3356387+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:46:01.3359248+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:01.3361876+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:46:01.3389489+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:01.3390800+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 174.3617 ms
2025-06-07T09:46:01.3391630+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:01.3392140+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3392503+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:01.3393127+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 175.0308ms
2025-06-07T09:46:01.3393833+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGA"" disconnecting.
2025-06-07T09:46:01.3394014+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGA"" stopped.
2025-06-07T09:46:01.3394360+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGA"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:01.3456871+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGB"" accepted.
2025-06-07T09:46:01.3457660+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGB"" started.
2025-06-07T09:46:01.3460602+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:46:01.3463055+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:01.3463417+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:01.3463718+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:01.3464482+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:01.3465008+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:01.3471080+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:01.3474412+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:01.3474825+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:01.3475094+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3475458+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3476710+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:01.3476945+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:01.3477257+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:01.3477670+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:01.3489607+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:01.3492196+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3492667+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:01.3493590+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3494096+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:01.3494965+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:01.3495501+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:46:01.3497664+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:01.3498517+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.3552 ms
2025-06-07T09:46:01.3500007+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:01.3500345+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3500525+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:01.3500951+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.0505ms
2025-06-07T09:46:01.3501406+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGB"" disconnecting.
2025-06-07T09:46:01.3501597+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGB"" stopped.
2025-06-07T09:46:01.3501867+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGB"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:01.3583697+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGC"" accepted.
2025-06-07T09:46:01.3584459+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGC"" started.
2025-06-07T09:46:01.3586649+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:46:01.3587938+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:01.3588431+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:01.3588875+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:01.3589818+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:01.3590300+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:01.3597940+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:01.3600761+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:01.3601139+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:01.3601501+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3601921+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3603370+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:01.3603686+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:01.3604070+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:01.3604555+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:01.3615617+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:01.3617923+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3618338+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:01.3618985+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3619339+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:01.3620056+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:01.3620343+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:46:01.3621691+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:01.3622534+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.2251 ms
2025-06-07T09:46:01.3623171+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:01.3623453+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:01.3623698+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:01.3624204+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.7526ms
2025-06-07T09:46:01.3625586+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGC"" disconnecting.
2025-06-07T09:46:01.3625790+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGC"" stopped.
2025-06-07T09:46:01.3626027+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGC"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:46.4882941+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGD"" accepted.
2025-06-07T09:46:46.4884099+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGD"" started.
2025-06-07T09:46:46.4886818+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:46:46.4888554+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:46.4889232+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:46.4889934+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:46.4891145+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:46.4892592+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:46.4899685+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:46.4903174+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:46.4903559+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:46.4903884+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:46.4904255+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:46.4905596+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:46.4906070+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:46.4906422+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:46.4906840+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:46.4916226+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:46.4918324+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:46.4918733+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:46.4919462+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:46.4920198+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:46.4920995+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:46.4921265+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:46:46.4922782+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:46.4924040+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.2194 ms
2025-06-07T09:46:46.4924770+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:46.4925077+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:46.4925279+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:46.4926211+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.9018ms
2025-06-07T09:46:46.4926793+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGD"" disconnecting.
2025-06-07T09:46:46.4926972+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGD"" stopped.
2025-06-07T09:46:46.4927198+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGD"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:48.6830819+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGE"" accepted.
2025-06-07T09:46:48.6831743+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGE"" started.
2025-06-07T09:46:48.6833766+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T09:46:48.6835460+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T09:46:48.6836037+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T09:46:48.6836529+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:46:48.6837451+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:48.6838041+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:46:48.6850292+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:48.6853614+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:48.6853987+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:48.6854202+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6854544+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6855889+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:48.6856152+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6856260+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6856512+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:46:48.6865194+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:46:48.6866739+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6867165+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:48.6867805+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6868141+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:48.6870775+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6871118+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6871933+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:48.6872627+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6872917+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6873268+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:46:48.6880311+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:46:48.6882014+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6882357+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:48.6883003+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6883295+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:48.6884242+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:48.6884600+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T09:46:48.6886570+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:46:48.6887296+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 4.9535 ms
2025-06-07T09:46:48.6887938+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:48.6888187+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6888351+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:48.6888755+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 5.5066ms
2025-06-07T09:46:48.6889202+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGE"" disconnecting.
2025-06-07T09:46:48.6889410+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGE"" stopped.
2025-06-07T09:46:48.6889641+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:48.6965078+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGF"" accepted.
2025-06-07T09:46:48.6965867+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGF"" started.
2025-06-07T09:46:48.6967749+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T09:46:48.6969064+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T09:46:48.6969591+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T09:46:48.6970024+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:46:48.6970909+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:48.6971387+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:46:48.6977260+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:48.6979437+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:48.6979732+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:48.6979921+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6980270+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6981247+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:48.6981467+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6981579+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6981793+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:46:48.6990436+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:46:48.6991764+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6992561+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:48.6993143+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6993516+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:48.6996004+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6996353+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.6997089+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:48.6997261+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6997527+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:48.6997841+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:46:48.7004828+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:46:48.7006003+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.7006324+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:48.7007247+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.7007584+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:48.7008253+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:48.7008575+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T09:46:48.7010019+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:46:48.7010760+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 3.9530 ms
2025-06-07T09:46:48.7011400+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:48.7011680+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:48.7011921+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:48.7012351+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 4.4587ms
2025-06-07T09:46:48.7012756+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGF"" disconnecting.
2025-06-07T09:46:48.7012924+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGF"" stopped.
2025-06-07T09:46:48.7013148+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGF"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:49.9522465+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGG"" accepted.
2025-06-07T09:46:49.9523182+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGG"" started.
2025-06-07T09:46:49.9524651+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:46:49.9525692+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:49.9526054+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:49.9526340+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:49.9527021+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:49.9527448+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:49.9535068+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:49.9538985+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:49.9539317+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:49.9539512+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9540406+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9541166+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:49.9541459+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:49.9541747+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:49.9542135+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:49.9555050+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:49.9556877+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9557412+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:49.9558137+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9558538+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:49.9559692+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:49.9559981+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:46:49.9561307+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:49.9562066+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.4657 ms
2025-06-07T09:46:49.9562738+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:49.9562964+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9563121+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:49.9563747+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.8878ms
2025-06-07T09:46:49.9564247+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGG"" disconnecting.
2025-06-07T09:46:49.9564426+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGG"" stopped.
2025-06-07T09:46:49.9564719+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGG"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:49.9637258+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGH"" accepted.
2025-06-07T09:46:49.9637974+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGH"" started.
2025-06-07T09:46:49.9640153+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:46:49.9641143+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:49.9641532+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:49.9641842+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:49.9642522+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:49.9642781+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:49.9648283+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:49.9651151+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:49.9651495+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:49.9651700+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9652049+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9653244+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:49.9653945+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:49.9654366+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:49.9654772+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:49.9669240+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:49.9672202+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9672794+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:49.9673674+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9674153+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:49.9675199+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:49.9675539+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:46:49.9676992+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:49.9678521+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.5539 ms
2025-06-07T09:46:49.9679351+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:49.9679702+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:49.9679920+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:49.9680383+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.0263ms
2025-06-07T09:46:49.9680904+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGH"" disconnecting.
2025-06-07T09:46:49.9681088+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGH"" stopped.
2025-06-07T09:46:49.9681329+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGH"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:50.6635632+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGI"" accepted.
2025-06-07T09:46:50.6636366+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGI"" started.
2025-06-07T09:46:50.6639145+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:46:50.6640845+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:50.6642420+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:50.6642836+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:50.6643560+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:50.6643862+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:50.6649713+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:50.6652204+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:50.6652520+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:50.6652694+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:50.6652981+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:50.6653711+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:50.6653892+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:50.6654160+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:50.6654944+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:50.6663203+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:50.6664677+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:50.6665062+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:50.6665624+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:50.6665931+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:50.6666452+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:50.6666696+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:46:50.6667868+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:50.6668465+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.4668 ms
2025-06-07T09:46:50.6669180+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:50.6669369+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:50.6669500+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:50.6670485+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.077ms
2025-06-07T09:46:50.6671146+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGI"" disconnecting.
2025-06-07T09:46:50.6671338+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGI"" stopped.
2025-06-07T09:46:50.6671578+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGI"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:54.9689929+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGJ"" accepted.
2025-06-07T09:46:54.9690690+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGJ"" started.
2025-06-07T09:46:54.9692743+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T09:46:54.9694592+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:54.9695014+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:54.9695293+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:54.9695823+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:54.9697184+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:46:54.9697343+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:46:54.9697766+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:54.9698724+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGJ"", Request id ""0HND5DLJS2UGJ:00000001"": started reading request body.
2025-06-07T09:46:54.9699205+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGJ"", Request id ""0HND5DLJS2UGJ:00000001"": done reading request body.
2025-06-07T09:46:54.9705017+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:54.9720408+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:54.9720838+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:54.9721013+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9721291+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9721988+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:46:54.9722332+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:46:54.9727157+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:46:54.9727606+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:46:54.9728193+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:46:54.9729134+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__Select_3={ '06/05/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__Select_3)"
2025-06-07T09:46:54.9740764+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__Select_3={ '06/05/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__Select_3)"
2025-06-07T09:46:54.9741887+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:46:54.9746897+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:46:54.9747272+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9747707+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:54.9748433+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:46:54.9748978+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:54.9749214+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:46:54.9750504+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:54.9751203+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 5.4978 ms
2025-06-07T09:46:54.9751829+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:54.9752006+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9752203+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:54.9752603+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 5.9881ms
2025-06-07T09:46:54.9753011+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGJ"" disconnecting.
2025-06-07T09:46:54.9753134+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGJ"" stopped.
2025-06-07T09:46:54.9753334+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGJ"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:54.9809643+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGK"" accepted.
2025-06-07T09:46:54.9810321+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGK"" started.
2025-06-07T09:46:54.9812608+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:46:54.9813617+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:54.9813986+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:46:54.9814261+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:54.9814896+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:54.9815234+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:54.9820716+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:54.9823784+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:54.9824203+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:54.9824427+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9824825+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9825854+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:54.9826428+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:54.9826853+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:54.9827157+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:54.9839108+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:46:54.9841027+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9841694+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:54.9842543+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9842965+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:54.9843706+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:54.9843977+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:46:54.9845949+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:46:54.9846761+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.1535 ms
2025-06-07T09:46:54.9847445+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:54.9847700+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9847885+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:54.9848318+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.5791ms
2025-06-07T09:46:54.9848760+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGK"" disconnecting.
2025-06-07T09:46:54.9848963+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGK"" stopped.
2025-06-07T09:46:54.9849222+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGK"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:46:54.9906022+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGL"" accepted.
2025-06-07T09:46:54.9906855+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGL"" started.
2025-06-07T09:46:54.9908651+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:46:54.9909828+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:54.9910192+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:46:54.9911241+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:54.9911908+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:46:54.9912274+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:54.9917517+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:46:54.9919956+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:46:54.9920275+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:46:54.9920493+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9920834+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9921625+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:46:54.9921862+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:54.9922192+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:46:54.9922587+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:54.9931340+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:46:54.9932514+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9932969+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:46:54.9933607+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9933885+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:54.9934579+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:46:54.9934872+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:46:54.9936178+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:46:54.9936877+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.4617 ms
2025-06-07T09:46:54.9937612+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:46:54.9937897+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:46:54.9938058+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:46:54.9939376+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.0674ms
2025-06-07T09:46:54.9939843+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGL"" disconnecting.
2025-06-07T09:46:54.9939994+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGL"" stopped.
2025-06-07T09:46:54.9940215+07:00 [DBG] (///) Connection id ""0HND5DLJS2UGL"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:53:01.6037347+07:00 [INF] (///) Application is shutting down...
2025-06-07T09:53:01.6046438+07:00 [DBG] (///) Hosting stopping
2025-06-07T09:53:01.6097137+07:00 [DBG] (///) Hosting stopped
2025-06-07T09:53:04.5797288+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T09:53:04.6612018+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T09:53:04.6672752+07:00 [DBG] (///) Hosting starting
2025-06-07T09:53:04.8701513+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T09:53:04.8705903+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T09:53:04.9444618+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T09:53:04.9458667+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T09:53:04.9513332+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T09:53:04.9519185+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T09:53:04.9520341+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T09:53:04.9522020+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T09:53:04.9522485+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T09:53:04.9522710+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T09:53:04.9523052+07:00 [DBG] (///) Hosting started
2025-06-07T09:53:10.4212230+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"" accepted.
2025-06-07T09:53:10.4221637+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"" started.
2025-06-07T09:53:10.4394862+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 139
2025-06-07T09:53:10.5010058+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:10.5043996+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:10.5078221+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:10.5130511+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:53:10.5140131+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:53:10.5142223+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:53:10.5150793+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:10.5210752+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"", Request id ""0HND5DPO3GR6F:00000001"": started reading request body.
2025-06-07T09:53:10.5213595+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"", Request id ""0HND5DPO3GR6F:00000001"": done reading request body.
2025-06-07T09:53:10.6537996+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T09:53:11.0468480+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T09:53:11.0471483+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T09:53:11.1156290+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T09:53:11.1355772+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T09:53:11.2278776+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:53:11.2375392+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:53:11.2701068+07:00 [DBG] (///) Created DbConnection. (30ms).
2025-06-07T09:53:11.2732268+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:11.3517774+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:11.3598801+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:53:11.3669052+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:53:11.4175196+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __paymentDates_3.Contains(p.PaymentDate))
    .ExecuteDelete()"'
2025-06-07T09:53:11.6865117+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:53:11.7232406+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:53:11.7301863+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (3ms).
2025-06-07T09:53:11.7388636+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (15ms).
2025-06-07T09:53:11.7499309+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/05/2025', '06/02/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:53:11.9174733+07:00 [INF] (///) Executed DbCommand ("167"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/05/2025', '06/02/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:53:11.9257544+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:53:11.9306589+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:53:11.9336012+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:11.9403485+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (4ms).
2025-06-07T09:53:11.9428088+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:53:11.9437762+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:53:11.9443098+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:53:11.9548760+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:11.9610248+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 1445.9356 ms
2025-06-07T09:53:11.9671342+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"" received FIN.
2025-06-07T09:53:11.9675369+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:53:11.9712333+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"" disconnecting.
2025-06-07T09:53:11.9713331+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6G"" accepted.
2025-06-07T09:53:11.9716562+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6G"" started.
2025-06-07T09:53:11.9725360+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:53:11.9727859+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:53:11.9739241+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:53:11.9740920+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:53:11.9742439+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:53:11.9745448+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:53:11.9746856+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:53:11.9775837+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:11.9792874+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (1ms).
2025-06-07T09:53:11.9805728+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 1542.1897ms
2025-06-07T09:53:11.9840036+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6F"" stopped.
2025-06-07T09:53:11.9959552+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:53:12.0133266+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T09:53:12.1333032+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T09:53:12.1538936+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:53:12.1540809+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:53:12.1541336+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.1545438+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.1547674+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:53:12.1548304+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:12.1548850+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:12.1552536+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:53:12.1615576+07:00 [INF] (///) Executed DbCommand ("6"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:53:12.1800057+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.1827842+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 19ms reading results.
2025-06-07T09:53:12.1841144+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.1842830+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:12.1846027+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:53:12.1889365+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:53:12.1955507+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:53:12.1957902+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 221.1425 ms
2025-06-07T09:53:12.1959980+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:53:12.1961692+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.1962287+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:12.1963550+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 223.5707ms
2025-06-07T09:53:12.1964594+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6G"" disconnecting.
2025-06-07T09:53:12.1965254+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6G"" stopped.
2025-06-07T09:53:12.1966195+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6G"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:53:12.2018656+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6H"" accepted.
2025-06-07T09:53:12.2020563+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6H"" started.
2025-06-07T09:53:12.2023212+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:53:12.2025758+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:12.2026945+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:12.2027889+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:12.2030533+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:53:12.2031508+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:12.2432554+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:53:12.2464856+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T09:53:12.2553792+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:53:12.2567796+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:53:12.2568640+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:53:12.2569006+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.2569550+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.2570861+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:53:12.2571338+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:12.2571835+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:12.2572563+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:53:12.2586540+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:53:12.2625588+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.2627341+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 3ms reading results.
2025-06-07T09:53:12.2628735+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.2629371+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:12.2631756+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:53:12.2638669+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:53:12.2649763+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:12.2651215+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 62.0069 ms
2025-06-07T09:53:12.2652161+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:53:12.2652643+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:12.2654081+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:12.2654730+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 63.1655ms
2025-06-07T09:53:12.2655544+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6H"" disconnecting.
2025-06-07T09:53:12.2655899+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6H"" stopped.
2025-06-07T09:53:12.2656452+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6H"" received FIN.
2025-06-07T09:53:12.2656632+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6H"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:53:19.8390615+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"" accepted.
2025-06-07T09:53:19.8394061+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"" started.
2025-06-07T09:53:19.8397359+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 139
2025-06-07T09:53:19.8400216+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:19.8401062+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:19.8402233+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:19.8404241+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:53:19.8406050+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:53:19.8406512+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:53:19.8407317+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:19.8408722+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"", Request id ""0HND5DPO3GR6I:00000001"": started reading request body.
2025-06-07T09:53:19.8409594+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"", Request id ""0HND5DPO3GR6I:00000001"": done reading request body.
2025-06-07T09:53:19.8502554+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:53:19.8523282+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:53:19.8524952+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:53:19.8525680+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8526473+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8528486+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:53:19.8529268+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:53:19.8553912+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:53:19.8555018+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:53:19.8555919+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:53:19.8557727+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/05/2025', '06/02/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:53:19.8583280+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/05/2025', '06/02/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:53:19.8590732+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:53:19.8597411+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:53:19.8598243+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8598811+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:19.8600135+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:53:19.8601222+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:53:19.8602467+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:53:19.8604200+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:19.8606313+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 20.0659 ms
2025-06-07T09:53:19.8607694+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:53:19.8608376+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8608774+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:19.8609350+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 21.2066ms
2025-06-07T09:53:19.8610365+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"" disconnecting.
2025-06-07T09:53:19.8610743+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"" stopped.
2025-06-07T09:53:19.8611001+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"" received FIN.
2025-06-07T09:53:19.8611579+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6I"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:53:19.8660715+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6J"" accepted.
2025-06-07T09:53:19.8662458+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6J"" started.
2025-06-07T09:53:19.8665060+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:53:19.8666789+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:53:19.8667569+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:53:19.8668225+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:53:19.8669248+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:53:19.8669900+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:53:19.8680460+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:53:19.8696561+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:53:19.8697425+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:53:19.8697849+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8698879+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8700065+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:53:19.8700463+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:19.8700965+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:19.8701610+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:53:19.8716186+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:53:19.8719634+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8720468+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:53:19.8721604+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8722419+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:19.8724318+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:53:19.8724918+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:53:19.8727132+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:53:19.8728591+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 5.8554 ms
2025-06-07T09:53:19.8729752+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:53:19.8730449+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8730975+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:19.8731889+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 6.6726ms
2025-06-07T09:53:19.8732868+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6J"" disconnecting.
2025-06-07T09:53:19.8733352+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6J"" stopped.
2025-06-07T09:53:19.8734177+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6J"" received FIN.
2025-06-07T09:53:19.8734842+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6J"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:53:19.8800896+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6K"" accepted.
2025-06-07T09:53:19.8802132+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6K"" started.
2025-06-07T09:53:19.8804728+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:53:19.8807342+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:19.8808347+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:53:19.8809232+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:19.8810775+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:53:19.8811668+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:19.8820599+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:53:19.8825284+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:53:19.8825926+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:53:19.8826364+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8826904+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8828535+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:53:19.8829014+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:19.8829727+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:53:19.8830351+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:53:19.8841180+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:53:19.8844227+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8845205+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:53:19.8846546+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8847214+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:19.8848664+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:53:19.8849374+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:53:19.8851211+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:53:19.8852535+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 4.1095 ms
2025-06-07T09:53:19.8853669+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:53:19.8855300+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:53:19.8855872+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:53:19.8856683+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 5.1876ms
2025-06-07T09:53:19.8857596+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6K"" disconnecting.
2025-06-07T09:53:19.8858001+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6K"" stopped.
2025-06-07T09:53:19.8857824+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6K"" received FIN.
2025-06-07T09:53:19.8858446+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6K"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:55:58.9259659+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6L"" accepted.
2025-06-07T09:55:58.9260814+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6L"" started.
2025-06-07T09:55:58.9262967+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T09:55:58.9264165+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T09:55:58.9264559+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T09:55:58.9264902+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:55:58.9265819+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:55:58.9266656+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:55:58.9322905+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:55:58.9346513+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Count()"'
2025-06-07T09:55:58.9397485+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T09:55:58.9445905+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:55:58.9446930+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:55:58.9447152+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9447608+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9449066+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:55:58.9449315+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9449478+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9449972+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:55:58.9461189+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:55:58.9484184+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9485444+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 2ms reading results.
2025-06-07T09:55:58.9486520+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9487044+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:55:58.9500898+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-07T09:55:58.9519527+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T09:55:58.9528518+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T09:55:58.9559848+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<StudentBasicInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        string value2;
        string value3;
        string value4;
        string value5;
        value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
        value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
        value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
        value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
        return new StudentBasicInfo{ 
            StudentCode = value1, 
            LastName = value2, 
            FirstName = value3, 
            ClassCode = value4, 
            FacultyCode = value5 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:55:58.9577149+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9578467+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9580176+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:55:58.9580967+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9581532+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9582182+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:55:58.9597181+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:55:58.9607792+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9608710+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:55:58.9609764+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9610232+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:55:58.9618890+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:55:58.9652568+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T09:55:58.9702084+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:55:58.9703586+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 43.6965 ms
2025-06-07T09:55:58.9704326+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:55:58.9704864+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9705267+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:55:58.9706608+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 44.2826ms
2025-06-07T09:55:58.9707150+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6L"" disconnecting.
2025-06-07T09:55:58.9707360+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6L"" stopped.
2025-06-07T09:55:58.9707744+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6L"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:55:58.9763273+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6M"" accepted.
2025-06-07T09:55:58.9764155+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6M"" started.
2025-06-07T09:55:58.9766694+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T09:55:58.9768477+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T09:55:58.9768993+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T09:55:58.9769320+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:55:58.9770170+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:55:58.9770505+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:55:58.9779208+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:55:58.9782871+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:55:58.9783265+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:55:58.9784371+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9784780+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9785969+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:55:58.9786276+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9786432+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9786766+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:55:58.9795644+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:55:58.9800662+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9801339+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:55:58.9802256+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9802706+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:55:58.9806242+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9807183+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9808115+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:55:58.9808323+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9808668+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:55:58.9809282+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:55:58.9818696+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:55:58.9821280+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9822027+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:55:58.9822963+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9823527+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:55:58.9824546+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:55:58.9825606+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T09:55:58.9827783+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:55:58.9828946+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 5.8049 ms
2025-06-07T09:55:58.9830083+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:55:58.9830451+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:55:58.9830716+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:55:58.9831304+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 6.454ms
2025-06-07T09:55:58.9831805+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6M"" disconnecting.
2025-06-07T09:55:58.9832026+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6M"" stopped.
2025-06-07T09:55:58.9832276+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6M"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:00.2051192+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6N"" accepted.
2025-06-07T09:56:00.2051827+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6N"" started.
2025-06-07T09:56:00.2053621+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:56:00.2055949+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:56:00.2056366+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:56:00.2056732+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:00.2057458+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:00.2057908+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:00.2063865+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:00.2067657+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:00.2068056+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:00.2068352+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2068704+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2070491+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:00.2070859+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:00.2071206+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:00.2071978+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:56:00.2085494+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:56:00.2088283+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2088850+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:00.2089767+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2090289+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:00.2091148+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:00.2091409+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:56:00.2093098+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:00.2094005+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.6019 ms
2025-06-07T09:56:00.2094756+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:00.2095135+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2095379+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:00.2095910+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.2216ms
2025-06-07T09:56:00.2096388+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6N"" disconnecting.
2025-06-07T09:56:00.2096634+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6N"" stopped.
2025-06-07T09:56:00.2096920+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6N"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:00.2143089+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6O"" accepted.
2025-06-07T09:56:00.2143785+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6O"" started.
2025-06-07T09:56:00.2145465+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:56:00.2146590+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:56:00.2146956+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:56:00.2147234+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:00.2147916+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:00.2148909+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:00.2154289+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:00.2157526+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:00.2157882+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:00.2158116+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2158443+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2159425+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:00.2159655+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:00.2159942+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:00.2160233+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:56:00.2172797+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:56:00.2175342+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2175821+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:00.2176590+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2176989+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:00.2177829+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:00.2178120+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:56:00.2179513+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:00.2180380+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.1985 ms
2025-06-07T09:56:00.2181196+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:00.2181485+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:00.2181703+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:00.2183364+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.7815ms
2025-06-07T09:56:00.2183863+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6O"" disconnecting.
2025-06-07T09:56:00.2184097+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6O"" stopped.
2025-06-07T09:56:00.2184458+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6O"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:01.2222298+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6P"" accepted.
2025-06-07T09:56:01.2223063+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6P"" started.
2025-06-07T09:56:01.2224720+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:56:01.2226554+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:56:01.2226972+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:56:01.2227298+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:01.2228010+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:01.2228445+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:01.2234609+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:01.2237817+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:01.2238145+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:01.2238336+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:01.2238653+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:01.2239427+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:01.2239656+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:01.2240022+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:01.2240485+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:56:01.2249165+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:56:01.2250633+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:01.2251146+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:01.2251859+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:01.2252641+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:01.2253312+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:01.2253566+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:56:01.2254799+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:01.2255531+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.7225 ms
2025-06-07T09:56:01.2256239+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:01.2256514+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:01.2256697+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:01.2257890+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.2462ms
2025-06-07T09:56:01.2258326+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6P"" disconnecting.
2025-06-07T09:56:01.2258526+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6P"" stopped.
2025-06-07T09:56:01.2258813+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6P"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:06.4838575+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6Q"" accepted.
2025-06-07T09:56:06.4839489+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6Q"" started.
2025-06-07T09:56:06.4841973+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 139
2025-06-07T09:56:06.4843563+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:56:06.4844110+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:56:06.4844756+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:06.4845683+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:06.4846126+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:56:06.4846266+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:56:06.4846654+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:06.4847220+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6Q"", Request id ""0HND5DPO3GR6Q:00000001"": started reading request body.
2025-06-07T09:56:06.4847534+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6Q"", Request id ""0HND5DPO3GR6Q:00000001"": done reading request body.
2025-06-07T09:56:06.4855083+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:06.4914780+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:06.4915292+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:06.4915568+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.4915940+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.4916903+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:56:06.4917235+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:56:06.4920610+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:56:06.4921338+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:56:06.4921832+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:56:06.4922839+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/01/2025', '06/04/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:56:06.4934771+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/01/2025', '06/04/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:56:06.4936499+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:56:06.4939338+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:56:06.4939735+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.4940109+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:06.4940625+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:56:06.4940911+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:06.4941107+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:56:06.4942426+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:06.4943127+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 9.7083 ms
2025-06-07T09:56:06.4943751+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:06.4944129+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.4944316+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:06.4944770+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 10.2963ms
2025-06-07T09:56:06.4945292+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6Q"" disconnecting.
2025-06-07T09:56:06.4945476+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6Q"" stopped.
2025-06-07T09:56:06.4945724+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6Q"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:06.5001529+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6R"" accepted.
2025-06-07T09:56:06.5002445+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6R"" started.
2025-06-07T09:56:06.5004552+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:56:06.5006196+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:56:06.5006612+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:56:06.5007007+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:06.5007766+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:06.5008252+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:06.5014239+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:06.5017494+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:06.5017920+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:06.5018154+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5018479+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5019452+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:06.5019771+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:06.5020097+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:06.5020415+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:56:06.5031584+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:56:06.5033249+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5033693+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:06.5034395+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5034777+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:06.5035468+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:06.5035786+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:56:06.5037047+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:56:06.5037851+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.9650 ms
2025-06-07T09:56:06.5038592+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:06.5038888+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5040035+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:06.5040574+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.6004ms
2025-06-07T09:56:06.5041123+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6R"" disconnecting.
2025-06-07T09:56:06.5041319+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6R"" stopped.
2025-06-07T09:56:06.5041637+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6R"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:06.5093401+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6S"" accepted.
2025-06-07T09:56:06.5094517+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6S"" started.
2025-06-07T09:56:06.5096574+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:56:06.5097906+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:56:06.5098441+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:56:06.5098884+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:06.5100009+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:06.5100403+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:06.5107479+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:06.5110418+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:06.5110760+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:06.5111032+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5111415+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5112547+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:06.5112831+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:06.5113156+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:06.5113601+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:56:06.5122640+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:56:06.5123974+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5124705+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:06.5125388+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5125808+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:06.5126519+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:06.5126756+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:56:06.5127901+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:56:06.5128626+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.8320 ms
2025-06-07T09:56:06.5129245+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:06.5129536+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:06.5129697+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:06.5130115+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.357ms
2025-06-07T09:56:06.5130561+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6S"" disconnecting.
2025-06-07T09:56:06.5130733+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6S"" stopped.
2025-06-07T09:56:06.5130993+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6S"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:10.2849840+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6T"" accepted.
2025-06-07T09:56:10.2850515+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6T"" started.
2025-06-07T09:56:10.2852562+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T09:56:10.2853651+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T09:56:10.2854739+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T09:56:10.2855129+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:56:10.2855948+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:10.2856271+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:56:10.2861537+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:10.2864158+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:10.2864461+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:10.2864716+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2865067+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2866010+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:10.2866307+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2866477+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2867053+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:56:10.2875747+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:56:10.2877359+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2877887+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:10.2878703+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2879161+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:10.2881826+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2882182+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2883002+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:10.2883215+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2883602+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2884370+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:56:10.2896510+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:56:10.2899300+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2899998+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:10.2900917+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2901419+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:10.2902428+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:10.2902802+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T09:56:10.2904251+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:56:10.2905204+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 4.8805 ms
2025-06-07T09:56:10.2906038+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:10.2906415+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2906650+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:10.2907117+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 5.4553ms
2025-06-07T09:56:10.2908043+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6T"" disconnecting.
2025-06-07T09:56:10.2908410+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6T"" stopped.
2025-06-07T09:56:10.2908694+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6T"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:56:10.2949336+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6U"" accepted.
2025-06-07T09:56:10.2950078+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6U"" started.
2025-06-07T09:56:10.2952066+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T09:56:10.2953211+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T09:56:10.2953698+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T09:56:10.2954123+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:56:10.2954851+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:56:10.2955306+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:56:10.2960864+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:56:10.2963232+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:56:10.2963577+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:56:10.2963814+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2964109+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2965321+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:10.2965896+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2966044+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2966330+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:56:10.2977126+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T09:56:10.2979070+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2979606+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:10.2980395+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2980839+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:10.2983557+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2983970+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2984776+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:56:10.2985069+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2985881+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:56:10.2986219+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:56:10.2994695+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T09:56:10.2996217+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2996730+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:56:10.2997441+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.2997775+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:10.2998623+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:56:10.2998972+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T09:56:10.3000353+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T09:56:10.3001115+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 4.5878 ms
2025-06-07T09:56:10.3002419+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:56:10.3002726+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:56:10.3002973+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:56:10.3003433+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 5.1357ms
2025-06-07T09:56:10.3003827+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6U"" disconnecting.
2025-06-07T09:56:10.3004047+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6U"" stopped.
2025-06-07T09:56:10.3004393+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6U"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:08.0773246+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6V"" accepted.
2025-06-07T09:57:08.0774937+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6V"" started.
2025-06-07T09:57:08.0777134+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:57:08.0778617+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:08.0779250+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:08.0779695+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:08.0780511+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:08.0780967+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:08.0788715+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:08.0793486+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:08.0793987+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:08.0794181+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0794621+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0796119+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:08.0796491+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:08.0796967+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:08.0797445+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:08.0814597+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:08.0817908+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0818570+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:08.0819339+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0819787+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:08.0820571+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:08.0820848+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:57:08.0822312+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:08.0826097+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 4.5019 ms
2025-06-07T09:57:08.0827198+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:08.0827613+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0827912+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:08.0828429+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 5.1373ms
2025-06-07T09:57:08.0829626+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6V"" received FIN.
2025-06-07T09:57:08.0830041+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6V"" disconnecting.
2025-06-07T09:57:08.0830699+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6V"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:08.0842673+07:00 [DBG] (///) Connection id ""0HND5DPO3GR6V"" stopped.
2025-06-07T09:57:08.0871934+07:00 [DBG] (///) Connection id ""0HND5DPO3GR70"" accepted.
2025-06-07T09:57:08.0872671+07:00 [DBG] (///) Connection id ""0HND5DPO3GR70"" started.
2025-06-07T09:57:08.0874573+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:57:08.0875775+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:08.0876282+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:08.0876695+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:08.0877709+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:08.0878167+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:08.0885115+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:08.0888390+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:08.0888783+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:08.0889099+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0889408+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0890441+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:08.0890701+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:08.0890949+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:08.0891274+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:08.0904955+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:08.0907270+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0907826+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:08.0908604+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0909036+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:08.0909847+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:08.0910165+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:57:08.0911585+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:08.0912580+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.4429 ms
2025-06-07T09:57:08.0913373+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:08.0913705+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:08.0914924+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:08.0915526+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.0925ms
2025-06-07T09:57:08.0916135+07:00 [DBG] (///) Connection id ""0HND5DPO3GR70"" disconnecting.
2025-06-07T09:57:08.0916386+07:00 [DBG] (///) Connection id ""0HND5DPO3GR70"" stopped.
2025-06-07T09:57:08.0916842+07:00 [DBG] (///) Connection id ""0HND5DPO3GR70"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:09.3418203+07:00 [DBG] (///) Connection id ""0HND5DPO3GR71"" accepted.
2025-06-07T09:57:09.3419039+07:00 [DBG] (///) Connection id ""0HND5DPO3GR71"" started.
2025-06-07T09:57:09.3421878+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:57:09.3423147+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:09.3423570+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:09.3423892+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:09.3425161+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:09.3426280+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:09.3431475+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:09.3434545+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:09.3434957+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:09.3435143+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:09.3435411+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:09.3436149+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:09.3436355+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:09.3436720+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:09.3437079+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:57:09.3445245+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:57:09.3446368+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:09.3448313+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:09.3448908+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:09.3449275+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:09.3449883+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:09.3450121+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:57:09.3451243+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:09.3452020+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.7112 ms
2025-06-07T09:57:09.3452603+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:09.3452797+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:09.3452977+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:09.3453487+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.1678ms
2025-06-07T09:57:09.3454766+07:00 [DBG] (///) Connection id ""0HND5DPO3GR71"" disconnecting.
2025-06-07T09:57:09.3455038+07:00 [DBG] (///) Connection id ""0HND5DPO3GR71"" stopped.
2025-06-07T09:57:09.3455272+07:00 [DBG] (///) Connection id ""0HND5DPO3GR71"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:26.1692796+07:00 [DBG] (///) Connection id ""0HND5DPO3GR72"" accepted.
2025-06-07T09:57:26.1693850+07:00 [DBG] (///) Connection id ""0HND5DPO3GR72"" started.
2025-06-07T09:57:26.1695414+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 43
2025-06-07T09:57:26.1696448+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:57:26.1696805+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:57:26.1697157+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:57:26.1697871+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:26.1698170+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:57:26.1698247+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:57:26.1698671+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:57:26.1700130+07:00 [DBG] (///) Connection id ""0HND5DPO3GR72"", Request id ""0HND5DPO3GR72:00000001"": started reading request body.
2025-06-07T09:57:26.1700325+07:00 [DBG] (///) Connection id ""0HND5DPO3GR72"", Request id ""0HND5DPO3GR72:00000001"": done reading request body.
2025-06-07T09:57:26.1729651+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:26.1734676+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Tuition>()
    .Where(t => t.StudentCode == __studentCode_0 && __academicYears_1.Contains(t.AcademicYear) && __semesters_2.Contains(t.Semester))
    .ExecuteDelete()"'
2025-06-07T09:57:26.1752753+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition AS t
        SELECT 1
        FROM tuition AS t
        WHERE ((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition AS t
        SELECT 1
        FROM tuition AS t
        WHERE ((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:57:26.1758055+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:57:26.1758468+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:26.1758742+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:26.1758956+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:57:26.1759320+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:57:26.1759552+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1759864+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1761283+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T09:57:26.1780339+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T09:57:26.1781868+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1782366+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:26.1783820+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:26.1784125+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:57:26.1785314+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:57:26.1786158+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 8.7793 ms
2025-06-07T09:57:26.1786779+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:26.1787036+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1787276+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:26.1787723+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 null "application/json; charset=utf-8" 9.2269ms
2025-06-07T09:57:26.1788227+07:00 [DBG] (///) Connection id ""0HND5DPO3GR72"" disconnecting.
2025-06-07T09:57:26.1788401+07:00 [DBG] (///) Connection id ""0HND5DPO3GR72"" stopped.
2025-06-07T09:57:26.1789624+07:00 [DBG] (///) Connection id ""0HND5DPO3GR72"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:26.1856574+07:00 [DBG] (///) Connection id ""0HND5DPO3GR73"" accepted.
2025-06-07T09:57:26.1857342+07:00 [DBG] (///) Connection id ""0HND5DPO3GR73"" started.
2025-06-07T09:57:26.1858874+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:57:26.1859916+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:26.1860440+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:26.1860876+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:26.1861642+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:26.1862066+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:26.1869727+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:26.1872967+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:26.1873319+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:26.1873467+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1874363+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1874969+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:26.1875220+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:26.1875503+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:26.1875824+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:26.1886426+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:26.1887849+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1888245+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:26.1888896+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1889525+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:26.1890094+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:26.1890502+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:57:26.1892218+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:26.1892991+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.1051 ms
2025-06-07T09:57:26.1893730+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:26.1894041+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:26.1894285+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:26.1894694+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.5786ms
2025-06-07T09:57:26.1895228+07:00 [DBG] (///) Connection id ""0HND5DPO3GR73"" disconnecting.
2025-06-07T09:57:26.1895450+07:00 [DBG] (///) Connection id ""0HND5DPO3GR73"" stopped.
2025-06-07T09:57:26.1895709+07:00 [DBG] (///) Connection id ""0HND5DPO3GR73"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:41.0015742+07:00 [DBG] (///) Connection id ""0HND5DPO3GR74"" accepted.
2025-06-07T09:57:41.0016900+07:00 [DBG] (///) Connection id ""0HND5DPO3GR74"" started.
2025-06-07T09:57:41.0019069+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 89
2025-06-07T09:57:41.0021017+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:57:41.0021713+07:00 [DBG] (///) Endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:57:41.0022356+07:00 [DBG] (///) Request matched endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:57:41.0023507+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:41.0024203+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:57:41.0024425+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:57:41.0025289+07:00 [INF] (///) Executing endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:57:41.0027888+07:00 [DBG] (///) Connection id ""0HND5DPO3GR74"", Request id ""0HND5DPO3GR74:00000001"": started reading request body.
2025-06-07T09:57:41.0028157+07:00 [DBG] (///) Connection id ""0HND5DPO3GR74"", Request id ""0HND5DPO3GR74:00000001"": done reading request body.
2025-06-07T09:57:41.0092604+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:41.0773572+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T09:57:41.0802549+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:41.0822908+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:41.0891990+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T09:57:41.1462447+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:41.1463269+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:41.1463498+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1463845+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1487430+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:41.1488111+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:41.1488444+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:41.1488758+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T09:57:41.1626013+07:00 [INF] (///) Executed DbCommand ("14"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T09:57:41.1657540+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1658360+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 2ms reading results.
2025-06-07T09:57:41.1665607+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1666188+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:41.1740618+07:00 [DBG] (///) The '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T09:57:41.1757962+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T09:57:41.1764135+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:41.1764633+07:00 [INF] (///) Executed endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:57:41.1765351+07:00 [INF] (///) HTTP "POST" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 174.1496 ms
2025-06-07T09:57:41.1766585+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:41.1766916+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1767185+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:41.1767624+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 0 null 174.859ms
2025-06-07T09:57:41.1768183+07:00 [DBG] (///) Connection id ""0HND5DPO3GR74"" disconnecting.
2025-06-07T09:57:41.1768487+07:00 [DBG] (///) Connection id ""0HND5DPO3GR74"" stopped.
2025-06-07T09:57:41.1768817+07:00 [DBG] (///) Connection id ""0HND5DPO3GR74"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:41.1816715+07:00 [DBG] (///) Connection id ""0HND5DPO3GR75"" accepted.
2025-06-07T09:57:41.1817378+07:00 [DBG] (///) Connection id ""0HND5DPO3GR75"" started.
2025-06-07T09:57:41.1819185+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:57:41.1820289+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:41.1820913+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:41.1821339+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:41.1822606+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:41.1822954+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:41.1828842+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:41.1832509+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:41.1832883+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:41.1833052+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1833377+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1834253+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:41.1834514+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:41.1834771+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:41.1835104+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:41.1846993+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:41.1849222+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1849766+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:41.1850409+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1850975+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:41.1851759+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:41.1852040+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:57:41.1853224+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:41.1853943+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.0985 ms
2025-06-07T09:57:41.1854577+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:41.1854857+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:41.1855117+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:41.1855556+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.6349ms
2025-06-07T09:57:41.1856664+07:00 [DBG] (///) Connection id ""0HND5DPO3GR75"" disconnecting.
2025-06-07T09:57:41.1856873+07:00 [DBG] (///) Connection id ""0HND5DPO3GR75"" stopped.
2025-06-07T09:57:41.1857052+07:00 [DBG] (///) Connection id ""0HND5DPO3GR75"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:43.9748991+07:00 [DBG] (///) Connection id ""0HND5DPO3GR76"" accepted.
2025-06-07T09:57:43.9749886+07:00 [DBG] (///) Connection id ""0HND5DPO3GR76"" started.
2025-06-07T09:57:43.9752282+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T09:57:43.9754060+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:43.9754737+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:43.9755369+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:43.9756388+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:43.9756847+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:57:43.9758192+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:57:43.9758784+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:43.9760671+07:00 [DBG] (///) Connection id ""0HND5DPO3GR76"", Request id ""0HND5DPO3GR76:00000001"": started reading request body.
2025-06-07T09:57:43.9761157+07:00 [DBG] (///) Connection id ""0HND5DPO3GR76"", Request id ""0HND5DPO3GR76:00000001"": done reading request body.
2025-06-07T09:57:43.9807500+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:43.9808455+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:43.9808744+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:43.9808955+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:43.9809297+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:43.9810145+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:57:43.9810533+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:57:43.9826859+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Tuition>()
    .Include(t => t.TuitionPayments)
    .Where(t => t.StudentCode == __8__locals1_studentCode_0 && t.AcademicYear == __academicYearRequest_1 && t.Semester == __semesterRequest_2)
    .FirstOrDefault()"'
2025-06-07T09:57:43.9863699+07:00 [DBG] (///) Including navigation: '"Tuition.TuitionPayments"'.
2025-06-07T09:57:44.0372251+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Tuition>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Tuition>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Tuition entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Tuition instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Tuition);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Tuition.StudentCode, Tuition.AcademicYear, Tuition.Semester PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindPrimaryKey()], 
                        keyValues: new object[]
                        { 
                            try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetInt32(2) } catch (Exception) { ... }  
                        }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Tuition)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]: 
                                {
                                    return 
                                    {
                                        Tuition instance;
                                        instance = new Tuition();
                                        instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                        instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                        instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                        instance.<TuitionFee>k__BackingField = try { dataReader.GetInt32(3) } catch (Exception) { ... } ;
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Tuition)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Tuition, Tuition>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Tuition)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: Tuition.TuitionPayments (ICollection<TuitionPayment>) Collection ToDependent TuitionPayment Inverse: Tuition | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Tuition, TuitionPayment>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(6) ? default(int?) : (int?)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(7) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right, 
                    (left, right) => left == null ? right == null : right != null && ((DateOnly)left).Equals((DateOnly)right) 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    TuitionPayment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        TuitionPayment instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(TuitionPayment);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                            keyValues: new object[]
                            { 
                                try { dataReader.IsDBNull(4) ? default(object) : (object)dataReader.GetString(4) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetString(5) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(6) ? default(object) : (object)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                            }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (TuitionPayment)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                                    {
                                        return 
                                        {
                                            TuitionPayment instance;
                                            instance = new TuitionPayment();
                                            instance.<StudentCode>k__BackingField = try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } ;
                                            instance.<AcademicYear>k__BackingField = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                                            instance.<Semester>k__BackingField = try { dataReader.IsDBNull(6) ? default(int) : dataReader.GetInt32(6) } catch (Exception) { ... } ;
                                            instance.<PaymentDate>k__BackingField = try { dataReader.IsDBNull(7) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... } ;
                                            instance.<AmountPaid>k__BackingField = try { dataReader.IsDBNull(8) ? default(int) : dataReader.GetInt32(8) } catch (Exception) { ... } ;
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(TuitionPayment)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: TuitionPayment.Tuition (Tuition) ToPrincipal Tuition Inverse: TuitionPayments | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindNavigation(\"Tuition\")], 
                fixup: (namelessParameter{9}, namelessParameter{10}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{10}, 
                        forMaterialization: True);
                    return namelessParameter{10}.<Tuition>k__BackingField = namelessParameter{9};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Tuition)(resultContext.Values[0]) : default(Tuition);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T09:57:44.0398455+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:44.0399023+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0399420+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0399725+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:57:44.0413430+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:57:44.0433451+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T09:57:44.0472000+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.0472577+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 5ms reading results.
2025-06-07T09:57:44.0477339+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2 && p.PaymentDate == __paymentDate_3)
    .FirstOrDefault()"'
2025-06-07T09:57:44.0526756+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T09:57:44.0543354+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:44.0543775+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0546245+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0546793+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:57:44.0556607+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:57:44.0558272+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.0558665+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:44.0565730+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2)
    .Sum(p => p.AmountPaid)"'
2025-06-07T09:57:44.0583304+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T09:57:44.0590371+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:44.0590704+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0590935+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0591225+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T09:57:44.0599987+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T09:57:44.0600895+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.0601187+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:44.0832920+07:00 [DBG] (///) The navigation '"TuitionPayment"."Tuition"' for entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' was detected as changed.
2025-06-07T09:57:44.0867676+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T09:57:44.0872068+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:44.0872585+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:44.0898630+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T09:57:44.0926295+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-07T09:57:44.0946118+07:00 [DBG] (///) Created transaction savepoint.
2025-06-07T09:57:44.0946653+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:44.0946927+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0947255+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.0947656+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T09:57:44.0957468+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T09:57:44.0959046+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.0959372+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:44.0976478+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-07T09:57:44.0994891+07:00 [DBG] (///) Released transaction savepoint.
2025-06-07T09:57:44.0999340+07:00 [DBG] (///) The '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T09:57:44.0999913+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T09:57:44.1000235+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:57:44.1091810+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:57:44.1092741+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.1093431+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:44.1094636+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:57:44.1095691+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:44.1096055+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:44.1097155+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 134.0022 ms
2025-06-07T09:57:44.1098610+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:44.1098924+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.1100216+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:44.1100924+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 134.8617ms
2025-06-07T09:57:44.1101778+07:00 [DBG] (///) Connection id ""0HND5DPO3GR76"" disconnecting.
2025-06-07T09:57:44.1102034+07:00 [DBG] (///) Connection id ""0HND5DPO3GR76"" stopped.
2025-06-07T09:57:44.1102285+07:00 [DBG] (///) Connection id ""0HND5DPO3GR76"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:44.1145266+07:00 [DBG] (///) Connection id ""0HND5DPO3GR77"" accepted.
2025-06-07T09:57:44.1146174+07:00 [DBG] (///) Connection id ""0HND5DPO3GR77"" started.
2025-06-07T09:57:44.1147806+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:57:44.1148786+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:44.1149207+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:44.1149536+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:44.1150012+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:44.1150932+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:44.1155476+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:44.1158917+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:44.1159253+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:44.1159442+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.1159727+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.1160613+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:44.1160881+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.1161133+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:44.1161377+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:44.1172468+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:44.1174458+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.1174949+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:44.1175679+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.1176101+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:44.1176860+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:44.1177102+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:57:44.1178284+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:44.1178936+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.8553 ms
2025-06-07T09:57:44.1179645+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:44.1179933+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:44.1180098+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:44.1180816+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.2701ms
2025-06-07T09:57:44.1181293+07:00 [DBG] (///) Connection id ""0HND5DPO3GR77"" disconnecting.
2025-06-07T09:57:44.1181472+07:00 [DBG] (///) Connection id ""0HND5DPO3GR77"" stopped.
2025-06-07T09:57:44.1182525+07:00 [DBG] (///) Connection id ""0HND5DPO3GR77"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:48.7510089+07:00 [DBG] (///) Connection id ""0HND5DPO3GR78"" accepted.
2025-06-07T09:57:48.7510929+07:00 [DBG] (///) Connection id ""0HND5DPO3GR78"" started.
2025-06-07T09:57:48.7512629+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T09:57:48.7513740+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:48.7514246+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:48.7514614+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:48.7515349+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:48.7516095+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:57:48.7516255+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:57:48.7516584+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:48.7517208+07:00 [DBG] (///) Connection id ""0HND5DPO3GR78"", Request id ""0HND5DPO3GR78:00000001"": started reading request body.
2025-06-07T09:57:48.7517454+07:00 [DBG] (///) Connection id ""0HND5DPO3GR78"", Request id ""0HND5DPO3GR78:00000001"": done reading request body.
2025-06-07T09:57:48.7525074+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:48.7525778+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:48.7527006+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:48.7527196+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7527524+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7528353+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:57:48.7528708+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:57:48.7531413+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:48.7531690+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:48.7532128+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:48.7532541+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:57:48.7543360+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:57:48.7546353+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T09:57:48.7559576+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T09:57:48.7562237+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7562726+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T09:57:48.7565045+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:48.7565278+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:48.7565615+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:48.7565904+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:57:48.7573534+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:57:48.7574834+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7575141+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:48.7581677+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2 && p.PaymentDate == __paymentDate_3)
    .ExecuteUpdate(setters => setters.SetProperty<int>(
        propertyExpression: p => p.AmountPaid, 
        valueExpression: __money_Value_4))"'
2025-06-07T09:57:48.7703584+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        UPDATE tuition_payment AS t
        SET 
        t.amount_paid = @__money_Value_4
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        UPDATE tuition_payment AS t
        SET 
        t.amount_paid = @__money_Value_4
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: BulkUpdate, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T09:57:48.7723428+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:57:48.7724183+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:57:48.7724705+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:57:48.7725367+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__money_Value_4='1000000', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T09:57:48.7735539+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__money_Value_4='1000000', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T09:57:48.7736970+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:48.7737207+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:48.7738835+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T09:57:48.7739123+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 0 entities written to the database.
2025-06-07T09:57:48.7739411+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:57:48.7828872+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:57:48.7830201+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7830936+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:48.7832120+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:57:48.7832757+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:48.7833241+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:48.7834294+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 31.8282 ms
2025-06-07T09:57:48.7836589+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:48.7838385+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7838606+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:48.7839061+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 32.6421ms
2025-06-07T09:57:48.7839598+07:00 [DBG] (///) Connection id ""0HND5DPO3GR78"" disconnecting.
2025-06-07T09:57:48.7839834+07:00 [DBG] (///) Connection id ""0HND5DPO3GR78"" stopped.
2025-06-07T09:57:48.7840058+07:00 [DBG] (///) Connection id ""0HND5DPO3GR78"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:48.7891745+07:00 [DBG] (///) Connection id ""0HND5DPO3GR79"" accepted.
2025-06-07T09:57:48.7892581+07:00 [DBG] (///) Connection id ""0HND5DPO3GR79"" started.
2025-06-07T09:57:48.7894891+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:57:48.7896010+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:48.7896653+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:48.7897022+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:48.7897699+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:48.7898069+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:48.7904725+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:48.7908125+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:48.7908574+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:48.7908871+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7909219+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7910183+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:48.7910486+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:48.7910785+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:48.7911356+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:48.7921957+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:48.7925492+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7925911+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:48.7926458+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7926827+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:48.7927407+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:48.7927669+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:57:48.7928703+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:48.7929304+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.1280 ms
2025-06-07T09:57:48.7930274+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:48.7930487+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:48.7930664+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:48.7931342+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.6809ms
2025-06-07T09:57:48.7931826+07:00 [DBG] (///) Connection id ""0HND5DPO3GR79"" disconnecting.
2025-06-07T09:57:48.7931970+07:00 [DBG] (///) Connection id ""0HND5DPO3GR79"" stopped.
2025-06-07T09:57:48.7932146+07:00 [DBG] (///) Connection id ""0HND5DPO3GR79"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:54.9726259+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7A"" accepted.
2025-06-07T09:57:54.9727447+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7A"" started.
2025-06-07T09:57:54.9729810+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T09:57:54.9731387+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:54.9732081+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:57:54.9732592+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:54.9734051+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:54.9734469+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:57:54.9734691+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:57:54.9735155+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:54.9735753+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7A"", Request id ""0HND5DPO3GR7A:00000001"": started reading request body.
2025-06-07T09:57:54.9736073+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7A"", Request id ""0HND5DPO3GR7A:00000001"": done reading request body.
2025-06-07T09:57:54.9741505+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:54.9742506+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:54.9742787+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:54.9742949+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9743178+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9743867+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:57:54.9744165+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:57:54.9746667+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:54.9747055+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:54.9747302+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:54.9747713+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:57:54.9757803+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:57:54.9759868+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T09:57:54.9761899+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T09:57:54.9762550+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9762967+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:54.9765764+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:54.9766016+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:54.9766240+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:54.9767077+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:57:54.9773707+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:57:54.9774800+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9775090+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:54.9780202+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:57:54.9780531+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:57:54.9780731+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:57:54.9781064+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__money_Value_4='7508544', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T09:57:54.9788155+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__money_Value_4='7508544', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T09:57:54.9789107+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:54.9789351+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T09:57:54.9790363+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T09:57:54.9790705+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 0 entities written to the database.
2025-06-07T09:57:54.9790874+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:57:54.9877345+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:57:54.9878462+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9879012+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:54.9880081+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:57:54.9880527+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:54.9880795+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:57:54.9882353+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 14.7098 ms
2025-06-07T09:57:54.9883592+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:54.9883930+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9884176+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:54.9884730+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 15.4922ms
2025-06-07T09:57:54.9885327+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7A"" disconnecting.
2025-06-07T09:57:54.9885513+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7A"" stopped.
2025-06-07T09:57:54.9885800+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7A"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:57:54.9933228+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7B"" accepted.
2025-06-07T09:57:54.9934031+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7B"" started.
2025-06-07T09:57:54.9936286+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:57:54.9937345+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:54.9938146+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:57:54.9938501+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:54.9939078+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:57:54.9939421+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:54.9944419+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:57:54.9947192+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:57:54.9947541+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:57:54.9947781+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9948332+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9949310+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:57:54.9949563+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:54.9949706+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:57:54.9950339+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:54.9960733+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:57:54.9962183+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9962498+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:57:54.9963031+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9963437+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:54.9964084+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:57:54.9964352+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:57:54.9965446+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:57:54.9966129+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.6686 ms
2025-06-07T09:57:54.9966688+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:57:54.9966884+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:57:54.9967041+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:57:54.9967469+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.191ms
2025-06-07T09:57:54.9967853+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7B"" disconnecting.
2025-06-07T09:57:54.9967991+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7B"" stopped.
2025-06-07T09:57:54.9968177+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7B"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:58:11.2385647+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7C"" accepted.
2025-06-07T09:58:11.2387269+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7C"" started.
2025-06-07T09:58:11.2389367+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 43
2025-06-07T09:58:11.2390631+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:58:11.2391131+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:58:11.2391525+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:58:11.2392078+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:58:11.2392318+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:58:11.2392404+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:58:11.2392657+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:58:11.2393016+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7C"", Request id ""0HND5DPO3GR7C:00000001"": started reading request body.
2025-06-07T09:58:11.2393250+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7C"", Request id ""0HND5DPO3GR7C:00000001"": done reading request body.
2025-06-07T09:58:11.2400353+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:58:11.2403042+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:58:11.2403378+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:58:11.2403661+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:58:11.2403962+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:58:11.2404275+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:58:11.2404577+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2404919+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2406476+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T09:58:11.2502511+07:00 [INF] (///) Executed DbCommand ("10"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T09:58:11.2504097+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2504570+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:11.2505828+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:58:11.2506115+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:58:11.2507051+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:58:11.2507764+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 11.5281 ms
2025-06-07T09:58:11.2508271+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:58:11.2508490+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2508788+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:11.2509197+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 null "application/json; charset=utf-8" 11.9854ms
2025-06-07T09:58:11.2509635+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7C"" disconnecting.
2025-06-07T09:58:11.2509811+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7C"" stopped.
2025-06-07T09:58:11.2509978+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7C"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:58:11.2564264+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7D"" accepted.
2025-06-07T09:58:11.2564880+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7D"" started.
2025-06-07T09:58:11.2566429+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:58:11.2567967+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:58:11.2568296+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:58:11.2568641+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:11.2569276+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:58:11.2569688+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:11.2575057+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:58:11.2580594+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:58:11.2580992+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:58:11.2581316+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2581634+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2582389+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:11.2582801+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:11.2583369+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:11.2583705+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:58:11.2595374+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:58:11.2597076+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2597503+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:11.2598402+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2598838+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:11.2599630+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:58:11.2599938+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:58:11.2600971+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:11.2602168+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.2050 ms
2025-06-07T09:58:11.2602722+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:58:11.2602993+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:11.2603229+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:11.2603670+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.7161ms
2025-06-07T09:58:11.2604075+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7D"" disconnecting.
2025-06-07T09:58:11.2604275+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7D"" stopped.
2025-06-07T09:58:11.2604498+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7D"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:58:29.3046284+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7E"" accepted.
2025-06-07T09:58:29.3047443+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7E"" started.
2025-06-07T09:58:29.3049061+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 89
2025-06-07T09:58:29.3050738+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:58:29.3051158+07:00 [DBG] (///) Endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T09:58:29.3051459+07:00 [DBG] (///) Request matched endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:58:29.3052114+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:58:29.3052425+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:58:29.3052512+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:58:29.3052811+07:00 [INF] (///) Executing endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:58:29.3053209+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7E"", Request id ""0HND5DPO3GR7E:00000001"": started reading request body.
2025-06-07T09:58:29.3053387+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7E"", Request id ""0HND5DPO3GR7E:00000001"": done reading request body.
2025-06-07T09:58:29.3059317+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:58:29.3061550+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T09:58:29.3061855+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T09:58:29.3062138+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T09:58:29.3062565+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T09:58:29.3066489+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:58:29.3066913+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:58:29.3067098+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3108456+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3109934+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:29.3110196+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:29.3110442+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:29.3110812+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T09:58:29.3132194+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T09:58:29.3133930+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3134353+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:29.3135071+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3135412+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:29.3136675+07:00 [DBG] (///) The '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T09:58:29.3136990+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T09:58:29.3137524+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:58:29.3137785+07:00 [INF] (///) Executed endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T09:58:29.3138443+07:00 [INF] (///) HTTP "POST" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 8.5980 ms
2025-06-07T09:58:29.3139706+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:58:29.3140040+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3141379+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:29.3141857+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 0 null 9.2747ms
2025-06-07T09:58:29.3142406+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7E"" disconnecting.
2025-06-07T09:58:29.3142589+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7E"" stopped.
2025-06-07T09:58:29.3142902+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7E"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:58:29.3195876+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7F"" accepted.
2025-06-07T09:58:29.3196580+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7F"" started.
2025-06-07T09:58:29.3198822+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:58:29.3199912+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:58:29.3200383+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:58:29.3200811+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:29.3201591+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:58:29.3201983+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:29.3208207+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:58:29.3211247+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:58:29.3211664+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:58:29.3211887+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3212135+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3213093+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:29.3213366+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:29.3213532+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:29.3213833+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:58:29.3234477+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:58:29.3237074+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3238343+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:29.3238947+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3239236+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:29.3240064+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:58:29.3240401+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:58:29.3242068+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:29.3242979+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 4.0959 ms
2025-06-07T09:58:29.3243903+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:58:29.3244276+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:29.3244661+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:29.3245287+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.6323ms
2025-06-07T09:58:29.3245858+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7F"" disconnecting.
2025-06-07T09:58:29.3246090+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7F"" stopped.
2025-06-07T09:58:29.3246485+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7F"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:58:38.1569033+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7G"" accepted.
2025-06-07T09:58:38.1570187+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7G"" started.
2025-06-07T09:58:38.1572145+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T09:58:38.1573845+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:58:38.1578299+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:58:38.1578867+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:58:38.1579523+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:58:38.1579888+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:58:38.1579976+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:58:38.1580297+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:58:38.1580841+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7G"", Request id ""0HND5DPO3GR7G:00000001"": started reading request body.
2025-06-07T09:58:38.1581093+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7G"", Request id ""0HND5DPO3GR7G:00000001"": done reading request body.
2025-06-07T09:58:38.1586597+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:58:38.1587151+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:58:38.1587355+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:58:38.1587550+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1587845+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1588554+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:58:38.1588819+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:58:38.1591537+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:38.1591820+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1592060+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1592362+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:58:38.1603859+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:58:38.1605601+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T09:58:38.1606260+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1606531+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:38.1608594+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:38.1608809+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1609091+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1609354+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:58:38.1614599+07:00 [INF] (///) Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:58:38.1615600+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1615948+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:38.1618195+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:38.1618385+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1618537+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1619055+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T09:58:38.1623195+07:00 [INF] (///) Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T09:58:38.1623897+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1624221+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:38.1634473+07:00 [DBG] (///) The navigation '"TuitionPayment"."Tuition"' for entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' was detected as changed.
2025-06-07T09:58:38.1635272+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T09:58:38.1635685+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T09:58:38.1635887+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T09:58:38.1636787+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T09:58:38.1639065+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-07T09:58:38.1644572+07:00 [DBG] (///) Created transaction savepoint.
2025-06-07T09:58:38.1645025+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:38.1645348+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1645597+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1645957+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T09:58:38.1656373+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T09:58:38.1657674+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1658119+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:38.1658919+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-07T09:58:38.1665312+07:00 [DBG] (///) Released transaction savepoint.
2025-06-07T09:58:38.1666545+07:00 [DBG] (///) The '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T09:58:38.1666889+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T09:58:38.1667592+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:58:38.1750402+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:58:38.1751403+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1751969+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:38.1753217+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:58:38.1754525+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:58:38.1754905+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:58:38.1755830+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 17.5715 ms
2025-06-07T09:58:38.1757191+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:58:38.1757603+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1757869+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:38.1758573+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 18.6249ms
2025-06-07T09:58:38.1759115+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7G"" disconnecting.
2025-06-07T09:58:38.1759322+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7G"" stopped.
2025-06-07T09:58:38.1759528+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7G"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:58:38.1804243+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7H"" accepted.
2025-06-07T09:58:38.1805005+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7H"" started.
2025-06-07T09:58:38.1806397+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:58:38.1807193+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:58:38.1807699+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:58:38.1807980+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:38.1808364+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:58:38.1808602+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:38.1813446+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:58:38.1816209+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:58:38.1816574+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:58:38.1816759+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1817417+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1818047+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:38.1818221+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1818353+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:38.1818694+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:58:38.1829520+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:58:38.1830985+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1831346+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:38.1831927+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1832298+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:38.1833208+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:58:38.1833431+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:58:38.1834480+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:58:38.1835088+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.6411 ms
2025-06-07T09:58:38.1835628+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:58:38.1835852+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:38.1836021+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:38.1836385+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.9985ms
2025-06-07T09:58:38.1836684+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7H"" disconnecting.
2025-06-07T09:58:38.1836864+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7H"" stopped.
2025-06-07T09:58:38.1837064+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7H"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:58:50.8940086+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7I"" accepted.
2025-06-07T09:58:50.8940916+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7I"" started.
2025-06-07T09:58:50.8942275+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T09:58:50.8943401+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:58:50.8944422+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:58:50.8944692+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:58:50.8945106+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:58:50.8945369+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:58:50.8945526+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:58:50.8945824+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:58:50.8946367+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7I"", Request id ""0HND5DPO3GR7I:00000001"": started reading request body.
2025-06-07T09:58:50.8946538+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7I"", Request id ""0HND5DPO3GR7I:00000001"": done reading request body.
2025-06-07T09:58:50.8951388+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:58:50.8951922+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:58:50.8952243+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:58:50.8952429+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:50.8952629+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:50.8953320+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:58:50.8953600+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:58:50.8956080+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:50.8956376+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:50.8956566+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:50.8956980+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:58:50.8968681+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T09:58:50.8971248+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T09:58:50.8972616+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T09:58:50.8973707+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:50.8974584+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:50.8977110+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:50.8977422+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:50.8977630+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:50.8977931+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/05/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:58:50.8986965+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/05/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T09:58:50.8988047+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:50.8988408+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:50.8990810+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:58:50.8991083+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:50.8991274+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:58:50.8992161+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T09:58:50.8999074+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T09:58:50.9000002+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:50.9000360+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:58:50.9020260+07:00 [DBG] (///) Rolling back transaction.
2025-06-07T09:58:50.9054901+07:00 [DBG] (///) Rolled back transaction.
2025-06-07T09:58:50.9055869+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:50.9056264+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:50.9275389+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:58:50.9279113+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:58:50.9285743+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: S tin thanh ton vt qu s tin hc ph
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 316
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 349
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 350
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T09:58:50.9710142+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 76.4483 ms
2025-06-07T09:58:50.9711018+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:58:50.9711319+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:58:50.9711548+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:58:50.9711861+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 76.9571ms
2025-06-07T09:58:50.9712203+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7I"" disconnecting.
2025-06-07T09:58:50.9712351+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7I"" stopped.
2025-06-07T09:58:50.9712566+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7I"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:59:04.3248798+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7J"" accepted.
2025-06-07T09:59:04.3249747+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7J"" started.
2025-06-07T09:59:04.3251416+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:59:04.3252949+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:04.3253674+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:04.3254051+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:04.3254485+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:59:04.3254749+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:04.3259633+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:59:04.3261490+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:59:04.3261733+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:59:04.3261883+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:04.3262086+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:04.3262850+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:59:04.3263026+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:04.3263187+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:04.3263701+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:59:04.3273177+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:59:04.3274217+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:04.3274524+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:59:04.3275045+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:04.3275314+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:04.3275944+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:59:04.3276153+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:59:04.3277041+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:04.3277568+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.2802 ms
2025-06-07T09:59:04.3278488+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:59:04.3278685+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:04.3278840+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:04.3279100+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.7681ms
2025-06-07T09:59:04.3279336+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7J"" disconnecting.
2025-06-07T09:59:04.3279438+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7J"" stopped.
2025-06-07T09:59:04.3279564+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7J"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:59:08.0880665+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7K"" accepted.
2025-06-07T09:59:08.0881327+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7K"" started.
2025-06-07T09:59:08.0882391+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T09:59:08.0883406+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:08.0883724+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:08.0884002+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:08.0884413+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:59:08.0884795+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:59:08.0884943+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:59:08.0885335+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:08.0885815+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7K"", Request id ""0HND5DPO3GR7K:00000001"": started reading request body.
2025-06-07T09:59:08.0885996+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7K"", Request id ""0HND5DPO3GR7K:00000001"": done reading request body.
2025-06-07T09:59:08.0891852+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:59:08.0892620+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:59:08.0892927+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:59:08.0893177+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.0894126+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.0895233+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:59:08.0895607+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:59:08.0898220+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:59:08.0898509+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:59:08.0898769+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:59:08.0899771+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '06/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:59:08.0909150+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '06/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:59:08.0910117+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:59:08.0913694+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:59:08.0914162+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.0914512+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:08.0915090+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:59:08.0915412+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:59:08.0915612+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:59:08.0916429+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:08.0917044+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.2314 ms
2025-06-07T09:59:08.0917544+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:59:08.0917756+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.0917919+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:08.0918203+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.5819ms
2025-06-07T09:59:08.0918581+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7K"" disconnecting.
2025-06-07T09:59:08.0919285+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7K"" stopped.
2025-06-07T09:59:08.0919522+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7K"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:59:08.0996462+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7L"" accepted.
2025-06-07T09:59:08.0997193+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7L"" started.
2025-06-07T09:59:08.0998284+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:59:08.0999125+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:59:08.0999444+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:59:08.0999712+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:59:08.1000083+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:59:08.1000362+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:59:08.1004910+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:59:08.1007589+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:59:08.1008330+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:59:08.1008533+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1008791+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1009363+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:59:08.1009554+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:08.1009696+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:08.1009957+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:59:08.1020593+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:59:08.1022079+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1022471+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:59:08.1023108+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1023361+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:08.1024240+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:59:08.1024432+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:59:08.1025555+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:59:08.1026137+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.5711 ms
2025-06-07T09:59:08.1026636+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:59:08.1026850+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1027013+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:08.1027326+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.9022ms
2025-06-07T09:59:08.1027624+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7L"" disconnecting.
2025-06-07T09:59:08.1027779+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7L"" stopped.
2025-06-07T09:59:08.1027993+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7L"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:59:08.1093730+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7M"" accepted.
2025-06-07T09:59:08.1094245+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7M"" started.
2025-06-07T09:59:08.1095178+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:59:08.1095961+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:08.1096226+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:08.1096461+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:08.1096861+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:59:08.1097149+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:08.1101639+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:59:08.1104249+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:59:08.1104587+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:59:08.1104833+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1105188+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1106178+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:59:08.1106483+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:08.1107095+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:08.1107465+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:59:08.1116667+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:59:08.1117665+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1118001+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:59:08.1118561+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1118799+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:08.1119391+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:59:08.1119625+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:59:08.1120382+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:08.1120865+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.3756 ms
2025-06-07T09:59:08.1121268+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:59:08.1121449+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:08.1121645+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:08.1121915+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.6718ms
2025-06-07T09:59:08.1122158+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7M"" disconnecting.
2025-06-07T09:59:08.1122270+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7M"" stopped.
2025-06-07T09:59:08.1122419+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7M"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:59:44.3824066+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7N"" accepted.
2025-06-07T09:59:44.3826326+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7N"" started.
2025-06-07T09:59:44.3827598+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T09:59:44.3828779+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:44.3829231+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:44.3829555+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:44.3830033+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:59:44.3830379+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T09:59:44.3830490+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T09:59:44.3830783+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:44.3831281+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7N"", Request id ""0HND5DPO3GR7N:00000001"": started reading request body.
2025-06-07T09:59:44.3832604+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7N"", Request id ""0HND5DPO3GR7N:00000001"": done reading request body.
2025-06-07T09:59:44.3837641+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:59:44.3838588+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:59:44.3838805+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:59:44.3838983+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.3839221+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.3839849+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:59:44.3840096+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T09:59:44.3842251+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T09:59:44.3842521+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:59:44.3842781+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T09:59:44.3843239+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '06/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:59:44.3853128+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '06/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T09:59:44.3854384+07:00 [DBG] (///) Committing transaction.
2025-06-07T09:59:44.3858094+07:00 [DBG] (///) Committed transaction.
2025-06-07T09:59:44.3858525+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.3858928+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:44.3859562+07:00 [DBG] (///) Disposing transaction.
2025-06-07T09:59:44.3859917+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:59:44.3860163+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T09:59:44.3861015+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:44.3863293+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.2932 ms
2025-06-07T09:59:44.3863950+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:59:44.3865002+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.3865265+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:44.3865571+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.7958ms
2025-06-07T09:59:44.3865992+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7N"" disconnecting.
2025-06-07T09:59:44.3866160+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7N"" stopped.
2025-06-07T09:59:44.3866302+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7N"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:59:44.3996443+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7O"" accepted.
2025-06-07T09:59:44.3997246+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7O"" started.
2025-06-07T09:59:44.3998308+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T09:59:44.3999184+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:59:44.3999872+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T09:59:44.4000325+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:59:44.4000746+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:59:44.4001036+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:59:44.4005516+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:59:44.4007984+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:59:44.4008250+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:59:44.4008450+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4008686+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4009378+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:59:44.4009608+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:44.4009765+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:44.4010051+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:59:44.4020621+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T09:59:44.4021917+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4022269+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:59:44.4022807+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4023094+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:44.4023854+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:59:44.4024117+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T09:59:44.4025029+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T09:59:44.4025629+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.4558 ms
2025-06-07T09:59:44.4026113+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:59:44.4027068+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4027244+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:44.4027582+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.9226ms
2025-06-07T09:59:44.4027875+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7O"" disconnecting.
2025-06-07T09:59:44.4028039+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7O"" stopped.
2025-06-07T09:59:44.4028290+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7O"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T09:59:44.4108503+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7P"" accepted.
2025-06-07T09:59:44.4109339+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7P"" started.
2025-06-07T09:59:44.4110657+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T09:59:44.4111756+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:44.4112119+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T09:59:44.4112507+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:44.4113563+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T09:59:44.4113898+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:44.4118688+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T09:59:44.4121635+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T09:59:44.4121990+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T09:59:44.4122225+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4122531+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4123268+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T09:59:44.4123518+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:44.4123749+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T09:59:44.4124145+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:59:44.4132692+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T09:59:44.4133683+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4133957+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T09:59:44.4134695+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4134949+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:44.4135584+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T09:59:44.4135824+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T09:59:44.4136571+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T09:59:44.4137133+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.3265 ms
2025-06-07T09:59:44.4137579+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T09:59:44.4137786+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T09:59:44.4137942+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T09:59:44.4138223+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.7575ms
2025-06-07T09:59:44.4138447+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7P"" disconnecting.
2025-06-07T09:59:44.4138575+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7P"" stopped.
2025-06-07T09:59:44.4138685+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7P"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:02:42.7030876+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7Q"" accepted.
2025-06-07T10:02:42.7034252+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7Q"" started.
2025-06-07T10:02:42.7035466+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:02:42.7036355+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:02:42.7036680+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:02:42.7038244+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:02:42.7038768+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:02:42.7039077+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:02:42.7043875+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:02:42.7046564+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:02:42.7046848+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:02:42.7047035+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:42.7047306+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:42.7048087+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:02:42.7048342+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:02:42.7048538+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:02:42.7048831+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:02:42.7062935+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:02:42.7065429+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:42.7066025+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:02:42.7066829+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:42.7067144+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:02:42.7067808+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:02:42.7068056+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:02:42.7068936+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:02:42.7069538+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.0441 ms
2025-06-07T10:02:42.7070062+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:02:42.7070315+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:42.7070496+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:02:42.7070813+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.5328ms
2025-06-07T10:02:42.7071111+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7Q"" disconnecting.
2025-06-07T10:02:42.7072100+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7Q"" stopped.
2025-06-07T10:02:42.7072270+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7Q"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:02:53.9905133+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7R"" accepted.
2025-06-07T10:02:53.9905949+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7R"" started.
2025-06-07T10:02:53.9906849+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:02:53.9907684+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:02:53.9907986+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:02:53.9908274+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:02:53.9908712+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:02:53.9908972+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:02:53.9914781+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:02:53.9917461+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:02:53.9917782+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:02:53.9917984+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:53.9918252+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:53.9919187+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:02:53.9919407+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:02:53.9919587+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:02:53.9919945+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:02:53.9933794+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:02:53.9936164+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:53.9936590+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:02:53.9937229+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:53.9937566+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:02:53.9938362+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:02:53.9938662+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:02:53.9939687+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:02:53.9940398+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.1343 ms
2025-06-07T10:02:53.9941488+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:02:53.9941806+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:02:53.9942038+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:02:53.9942380+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.5502ms
2025-06-07T10:02:53.9942716+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7R"" disconnecting.
2025-06-07T10:02:53.9942883+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7R"" stopped.
2025-06-07T10:02:53.9943055+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7R"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:03:04.4399348+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7S"" accepted.
2025-06-07T10:03:04.4400144+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7S"" started.
2025-06-07T10:03:04.4402761+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:03:04.4403725+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:04.4404583+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:04.4404910+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:04.4405398+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:03:04.4405690+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:04.4411497+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:03:04.4414671+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:03:04.4415052+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:03:04.4415318+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:04.4415589+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:04.4416584+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:03:04.4416789+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:04.4416947+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:04.4417242+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:04.4430958+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:04.4433003+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:04.4433355+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:03:04.4433942+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:04.4434220+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:04.4434912+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:03:04.4435185+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:03:04.4436091+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:04.4437310+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.0967 ms
2025-06-07T10:03:04.4437906+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:03:04.4438123+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:04.4438296+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:04.4438604+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.5877ms
2025-06-07T10:03:04.4438900+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7S"" disconnecting.
2025-06-07T10:03:04.4439040+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7S"" stopped.
2025-06-07T10:03:04.4439336+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7S"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:03:11.7472524+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7T"" accepted.
2025-06-07T10:03:11.7473226+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7T"" started.
2025-06-07T10:03:11.7475822+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:03:11.7476753+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:11.7477079+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:11.7477977+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:11.7478415+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:03:11.7478707+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:11.7484093+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:03:11.7488030+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:03:11.7488451+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:03:11.7488680+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:11.7488953+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:11.7489949+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:03:11.7490200+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:11.7490357+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:11.7490662+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:11.7502333+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:11.7504118+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:11.7504433+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:03:11.7505307+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:11.7505583+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:11.7506220+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:03:11.7506539+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:03:11.7507459+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:11.7508051+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.9336 ms
2025-06-07T10:03:11.7508559+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:03:11.7508814+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:11.7508999+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:11.7509303+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.3483ms
2025-06-07T10:03:11.7509614+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7T"" disconnecting.
2025-06-07T10:03:11.7509770+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7T"" stopped.
2025-06-07T10:03:11.7509992+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7T"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:03:18.2798564+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7U"" accepted.
2025-06-07T10:03:18.2799428+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7U"" started.
2025-06-07T10:03:18.2801582+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:03:18.2802883+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:18.2803258+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:18.2803536+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:18.2803988+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:03:18.2804268+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:18.2809514+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:03:18.2812135+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:03:18.2812426+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:03:18.2813212+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:18.2813483+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:18.2814074+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:03:18.2814244+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:18.2814397+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:18.2814692+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:18.2826481+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:18.2828372+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:18.2828739+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:03:18.2829325+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:18.2829634+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:18.2830626+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:03:18.2830854+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:03:18.2831660+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:18.2832221+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.7931 ms
2025-06-07T10:03:18.2832817+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:03:18.2833047+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:18.2833223+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:18.2833520+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.2105ms
2025-06-07T10:03:18.2833804+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7U"" disconnecting.
2025-06-07T10:03:18.2833946+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7U"" stopped.
2025-06-07T10:03:18.2834128+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7U"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:03:25.0860121+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7V"" accepted.
2025-06-07T10:03:25.0861073+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7V"" started.
2025-06-07T10:03:25.0862230+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:03:25.0863124+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:25.0865283+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:25.0865694+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:25.0866219+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:03:25.0867233+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:25.0872230+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:03:25.0875208+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:03:25.0875589+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:03:25.0875805+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:25.0876124+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:25.0877097+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:03:25.0877301+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:25.0877474+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:25.0877787+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:25.0891269+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:25.0893725+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:25.0894086+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:03:25.0894622+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:25.0894897+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:25.0895509+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:03:25.0895706+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:03:25.0896593+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:25.0897184+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.0672 ms
2025-06-07T10:03:25.0897642+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:03:25.0897839+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:25.0897987+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:25.0898262+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.6041ms
2025-06-07T10:03:25.0898533+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7V"" disconnecting.
2025-06-07T10:03:25.0898674+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7V"" stopped.
2025-06-07T10:03:25.0899277+07:00 [DBG] (///) Connection id ""0HND5DPO3GR7V"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:03:36.9497052+07:00 [DBG] (///) Connection id ""0HND5DPO3GR80"" accepted.
2025-06-07T10:03:36.9497717+07:00 [DBG] (///) Connection id ""0HND5DPO3GR80"" started.
2025-06-07T10:03:36.9498742+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:03:36.9499558+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:36.9499903+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:36.9500162+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:36.9500563+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:03:36.9500822+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:36.9505654+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:03:36.9508101+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:03:36.9508389+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:03:36.9508540+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:36.9549117+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:36.9550509+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:03:36.9550766+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:36.9550960+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:36.9551384+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:36.9578347+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:36.9580703+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:36.9581083+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:03:36.9582240+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:36.9582527+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:36.9583105+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:03:36.9583367+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:03:36.9584417+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:36.9585262+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 8.4174 ms
2025-06-07T10:03:36.9585927+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:03:36.9586187+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:36.9586395+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:36.9586781+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 8.7973ms
2025-06-07T10:03:36.9587220+07:00 [DBG] (///) Connection id ""0HND5DPO3GR80"" disconnecting.
2025-06-07T10:03:36.9587434+07:00 [DBG] (///) Connection id ""0HND5DPO3GR80"" stopped.
2025-06-07T10:03:36.9587612+07:00 [DBG] (///) Connection id ""0HND5DPO3GR80"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:03:53.4200637+07:00 [DBG] (///) Connection id ""0HND5DPO3GR81"" accepted.
2025-06-07T10:03:53.4201436+07:00 [DBG] (///) Connection id ""0HND5DPO3GR81"" started.
2025-06-07T10:03:53.4202942+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:03:53.4204139+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:53.4204606+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:03:53.4205124+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:53.4205717+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:03:53.4206153+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:53.4216361+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:03:53.4219468+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:03:53.4219778+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:03:53.4220028+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:53.4220336+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:53.4221401+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:03:53.4221707+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:53.4221870+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:03:53.4222211+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:53.4237743+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:03:53.4239965+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:53.4240492+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:03:53.4241274+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:53.4241591+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:53.4242224+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:03:53.4242429+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:03:53.4243254+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:03:53.4243842+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.7824 ms
2025-06-07T10:03:53.4244484+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:03:53.4245728+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:03:53.4245980+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:03:53.4246274+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.3373ms
2025-06-07T10:03:53.4246612+07:00 [DBG] (///) Connection id ""0HND5DPO3GR81"" disconnecting.
2025-06-07T10:03:53.4246767+07:00 [DBG] (///) Connection id ""0HND5DPO3GR81"" stopped.
2025-06-07T10:03:53.4247111+07:00 [DBG] (///) Connection id ""0HND5DPO3GR81"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:04:10.9168755+07:00 [DBG] (///) Connection id ""0HND5DPO3GR82"" accepted.
2025-06-07T10:04:10.9169523+07:00 [DBG] (///) Connection id ""0HND5DPO3GR82"" started.
2025-06-07T10:04:10.9170551+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:04:10.9171973+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:04:10.9172251+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:04:10.9172542+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:04:10.9172967+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:04:10.9173259+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:04:10.9182860+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:04:10.9186687+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:04:10.9187124+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:04:10.9187348+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:04:10.9187627+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:04:10.9188764+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:04:10.9189000+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:04:10.9189140+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:04:10.9189453+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:04:10.9205542+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:04:10.9207794+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:04:10.9208143+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:04:10.9208716+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:04:10.9209055+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:04:10.9209722+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:04:10.9209930+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:04:10.9210806+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:04:10.9211455+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.8172 ms
2025-06-07T10:04:10.9212545+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:04:10.9212790+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:04:10.9212959+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:04:10.9213242+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.2689ms
2025-06-07T10:04:10.9213562+07:00 [DBG] (///) Connection id ""0HND5DPO3GR82"" disconnecting.
2025-06-07T10:04:10.9213719+07:00 [DBG] (///) Connection id ""0HND5DPO3GR82"" stopped.
2025-06-07T10:04:10.9214073+07:00 [DBG] (///) Connection id ""0HND5DPO3GR82"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:13:02.5338294+07:00 [DBG] (///) Connection id ""0HND5DPO3GR83"" accepted.
2025-06-07T10:13:02.5352425+07:00 [DBG] (///) Connection id ""0HND5DPO3GR83"" started.
2025-06-07T10:13:02.5354394+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:13:02.5355456+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:13:02.5355771+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:13:02.5356061+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:13:02.5356482+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:13:02.5356774+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:13:02.5362789+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:13:02.5365698+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:13:02.5366063+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:13:02.5366273+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:02.5366562+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:02.5367657+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:13:02.5367903+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:02.5368443+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:02.5368760+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:13:02.5387349+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:13:02.5390308+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:02.5390899+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:13:02.5391661+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:02.5392014+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:02.5392689+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:13:02.5392931+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:13:02.5393856+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:13:02.5394530+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.7634 ms
2025-06-07T10:13:02.5395085+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:13:02.5396366+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:02.5396609+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:02.5396930+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.2509ms
2025-06-07T10:13:02.5397250+07:00 [DBG] (///) Connection id ""0HND5DPO3GR83"" disconnecting.
2025-06-07T10:13:02.5397412+07:00 [DBG] (///) Connection id ""0HND5DPO3GR83"" stopped.
2025-06-07T10:13:02.5398346+07:00 [DBG] (///) Connection id ""0HND5DPO3GR83"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:13:05.3159358+07:00 [DBG] (///) Connection id ""0HND5DPO3GR84"" accepted.
2025-06-07T10:13:05.3160126+07:00 [DBG] (///) Connection id ""0HND5DPO3GR84"" started.
2025-06-07T10:13:05.3161165+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:13:05.3162080+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:13:05.3162381+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:13:05.3163429+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:05.3163837+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:13:05.3164103+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:05.3168447+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:13:05.3170418+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:13:05.3170676+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:13:05.3170830+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:05.3171084+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:05.3171744+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:13:05.3171980+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:05.3172133+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:05.3172385+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:13:05.3181243+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:13:05.3182505+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:05.3183088+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:13:05.3183497+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:05.3183710+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:05.3184177+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:13:05.3184436+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:13:05.3185260+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:05.3185728+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.1645 ms
2025-06-07T10:13:05.3186170+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:13:05.3186373+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:05.3186526+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:05.3186801+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.5645ms
2025-06-07T10:13:05.3187160+07:00 [DBG] (///) Connection id ""0HND5DPO3GR84"" disconnecting.
2025-06-07T10:13:05.3187867+07:00 [DBG] (///) Connection id ""0HND5DPO3GR84"" stopped.
2025-06-07T10:13:05.3188012+07:00 [DBG] (///) Connection id ""0HND5DPO3GR84"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:13:10.2225963+07:00 [DBG] (///) Connection id ""0HND5DPO3GR85"" accepted.
2025-06-07T10:13:10.2226788+07:00 [DBG] (///) Connection id ""0HND5DPO3GR85"" started.
2025-06-07T10:13:10.2227962+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:13:10.2228904+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:13:10.2229174+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:13:10.2229449+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:10.2229864+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:13:10.2230140+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:13:10.2230243+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:13:10.2230494+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:10.2231079+07:00 [DBG] (///) Connection id ""0HND5DPO3GR85"", Request id ""0HND5DPO3GR85:00000001"": started reading request body.
2025-06-07T10:13:10.2231247+07:00 [DBG] (///) Connection id ""0HND5DPO3GR85"", Request id ""0HND5DPO3GR85:00000001"": done reading request body.
2025-06-07T10:13:10.2236273+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:13:10.2236791+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:13:10.2237007+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:13:10.2237152+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2237418+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2238150+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:13:10.2238407+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:13:10.2240551+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T10:13:10.2240811+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:13:10.2241087+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:13:10.2241568+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:13:10.2256428+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:13:10.2257960+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:13:10.2262435+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:13:10.2262986+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2263974+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:10.2264507+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:13:10.2264863+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:13:10.2265080+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T10:13:10.2265801+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:10.2266528+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.6257 ms
2025-06-07T10:13:10.2267085+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:13:10.2267359+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2267562+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:10.2267872+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.9913ms
2025-06-07T10:13:10.2268273+07:00 [DBG] (///) Connection id ""0HND5DPO3GR85"" disconnecting.
2025-06-07T10:13:10.2268426+07:00 [DBG] (///) Connection id ""0HND5DPO3GR85"" stopped.
2025-06-07T10:13:10.2268658+07:00 [DBG] (///) Connection id ""0HND5DPO3GR85"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:13:10.2364793+07:00 [DBG] (///) Connection id ""0HND5DPO3GR86"" accepted.
2025-06-07T10:13:10.2365652+07:00 [DBG] (///) Connection id ""0HND5DPO3GR86"" started.
2025-06-07T10:13:10.2366790+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:13:10.2367725+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:13:10.2368044+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:13:10.2368344+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:13:10.2368753+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:13:10.2369031+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:13:10.2373825+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:13:10.2376194+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:13:10.2376501+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:13:10.2376701+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2376968+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2378232+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:13:10.2378468+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:10.2378623+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:10.2378859+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:13:10.2392048+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:13:10.2394467+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2394873+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:13:10.2395532+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2395881+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:10.2396527+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:13:10.2396794+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:13:10.2398210+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:13:10.2398853+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.9786 ms
2025-06-07T10:13:10.2399475+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:13:10.2399724+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2399901+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:10.2400193+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.3411ms
2025-06-07T10:13:10.2400487+07:00 [DBG] (///) Connection id ""0HND5DPO3GR86"" disconnecting.
2025-06-07T10:13:10.2400634+07:00 [DBG] (///) Connection id ""0HND5DPO3GR86"" stopped.
2025-06-07T10:13:10.2400886+07:00 [DBG] (///) Connection id ""0HND5DPO3GR86"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:13:10.2514527+07:00 [DBG] (///) Connection id ""0HND5DPO3GR87"" accepted.
2025-06-07T10:13:10.2515284+07:00 [DBG] (///) Connection id ""0HND5DPO3GR87"" started.
2025-06-07T10:13:10.2516445+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:13:10.2517326+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:13:10.2517598+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:13:10.2517877+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:10.2518300+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:13:10.2518560+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:10.2523281+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:13:10.2525328+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:13:10.2525623+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:13:10.2525829+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2526169+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2526916+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:13:10.2527111+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:10.2527640+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:13:10.2527909+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:13:10.2538512+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:13:10.2540019+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2540428+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:13:10.2541055+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2541434+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:10.2542127+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:13:10.2542373+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:13:10.2543097+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:13:10.2543638+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.4999 ms
2025-06-07T10:13:10.2544637+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:13:10.2544828+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:13:10.2544967+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:13:10.2545249+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.8804ms
2025-06-07T10:13:10.2545527+07:00 [DBG] (///) Connection id ""0HND5DPO3GR87"" disconnecting.
2025-06-07T10:13:10.2545681+07:00 [DBG] (///) Connection id ""0HND5DPO3GR87"" stopped.
2025-06-07T10:13:10.2545830+07:00 [DBG] (///) Connection id ""0HND5DPO3GR87"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:17:32.9289259+07:00 [INF] (///) Application is shutting down...
2025-06-07T10:17:32.9300621+07:00 [DBG] (///) Hosting stopping
2025-06-07T10:17:32.9352906+07:00 [DBG] (///) Hosting stopped
2025-06-07T10:18:00.8536196+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:18:00.9809551+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:18:00.9865333+07:00 [DBG] (///) Hosting starting
2025-06-07T10:18:01.1841488+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:18:01.1847438+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:18:01.2786715+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:18:01.2811171+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:18:01.2923012+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:18:01.2930335+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:18:01.2932053+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:18:01.2936003+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:18:01.2936684+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:18:01.2936966+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:18:01.2937478+07:00 [DBG] (///) Hosting started
2025-06-07T10:18:04.1881384+07:00 [DBG] (///) Connection id ""0HND5E7L96978"" accepted.
2025-06-07T10:18:04.2106726+07:00 [DBG] (///) Connection id ""0HND5E7L96978"" started.
2025-06-07T10:18:04.2408785+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:18:04.3227924+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:18:04.3277451+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:18:04.3314401+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:18:04.3419441+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:18:04.3433362+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:18:04.3436450+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:18:04.3451409+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:18:04.3572344+07:00 [DBG] (///) Connection id ""0HND5E7L96978"", Request id ""0HND5E7L96978:00000001"": started reading request body.
2025-06-07T10:18:04.3576463+07:00 [DBG] (///) Connection id ""0HND5E7L96978"", Request id ""0HND5E7L96978:00000001"": done reading request body.
2025-06-07T10:18:04.6430784+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:18:05.2075393+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:18:05.2078730+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:18:05.2855430+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:18:05.3141974+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:18:05.4485589+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:18:05.4629912+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:18:05.5097217+07:00 [DBG] (///) Created DbConnection. (44ms).
2025-06-07T10:18:05.5165026+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:18:05.6242442+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:18:05.6378529+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:18:05.6467848+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:18:09.3852664+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __paymentDates_3.Contains(p.PaymentDate))
    .FirstOrDefault()"'
2025-06-07T10:18:09.8513227+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:18:09.9104985+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:18:09.9201634+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (5ms).
2025-06-07T10:18:09.9308772+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (20ms).
2025-06-07T10:18:09.9457935+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)
LIMIT 1"
2025-06-07T10:18:10.1739599+07:00 [INF] (///) Executed DbCommand ("229"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)
LIMIT 1"
2025-06-07T10:18:10.1869396+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:18:10.1989909+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 15ms reading results.
2025-06-07T10:20:08.7157460+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:20:08.8451961+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:20:08.8506617+07:00 [DBG] (///) Hosting starting
2025-06-07T10:20:09.0537350+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:20:09.0543284+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:20:09.1403850+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:20:09.1426609+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:20:09.1538836+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:20:09.1545750+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:20:09.1547042+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:20:09.1550783+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:20:09.1551291+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:20:09.1551548+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:20:09.1552098+07:00 [DBG] (///) Hosting started
2025-06-07T10:20:13.1524278+07:00 [DBG] (///) Connection id ""0HND5E8RN327D"" accepted.
2025-06-07T10:20:13.1535638+07:00 [DBG] (///) Connection id ""0HND5E8RN327D"" started.
2025-06-07T10:20:13.1794301+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:20:13.2437059+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:20:13.2476858+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:20:13.2511031+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:20:13.2578668+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:20:13.2588868+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:20:13.2590680+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:20:13.2602661+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:20:13.2702901+07:00 [DBG] (///) Connection id ""0HND5E8RN327D"", Request id ""0HND5E8RN327D:00000001"": started reading request body.
2025-06-07T10:20:13.2706273+07:00 [DBG] (///) Connection id ""0HND5E8RN327D"", Request id ""0HND5E8RN327D:00000001"": done reading request body.
2025-06-07T10:20:13.5174988+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:20:14.0835341+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:20:14.0841708+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:20:14.1645646+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:20:14.1904636+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:20:14.3211860+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:20:14.3351701+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:20:14.3788188+07:00 [DBG] (///) Created DbConnection. (41ms).
2025-06-07T10:20:14.3826554+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:20:14.4747177+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:20:14.4847737+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:20:14.4943963+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:20:17.8661491+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __get_Item_1 == p.AcademicYear && __get_Item_2 == p.Semester && __get_Item_3 == p.PaymentDate)
    .FirstOrDefault()"'
2025-06-07T10:20:18.2328282+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester)) && (@__get_Item_3 == t.payment_date)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester)) && (@__get_Item_3 == t.payment_date), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:20:18.2867387+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:20:18.2957212+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (4ms).
2025-06-07T10:20:18.3070070+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (20ms).
2025-06-07T10:20:18.3207261+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2', @__get_Item_3='07/06/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester AND @__get_Item_3 = t.payment_date
LIMIT 1"
2025-06-07T10:20:18.4341279+07:00 [INF] (///) Executed DbCommand ("113"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2', @__get_Item_3='07/06/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester AND @__get_Item_3 = t.payment_date
LIMIT 1"
2025-06-07T10:20:18.4464558+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:20:18.4585019+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 15ms reading results.
2025-06-07T10:20:32.1895674+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:20:32.3157613+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:20:32.3205758+07:00 [DBG] (///) Hosting starting
2025-06-07T10:20:32.5122790+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:20:32.5128584+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:20:32.6077747+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:20:32.6101411+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:20:32.6218457+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:20:32.6224818+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:20:32.6225876+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:20:32.6228665+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:20:32.6229130+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:20:32.6229369+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:20:32.6229836+07:00 [DBG] (///) Hosting started
2025-06-07T10:20:36.0667629+07:00 [DBG] (///) Connection id ""0HND5E92HJVIH"" accepted.
2025-06-07T10:20:36.0680164+07:00 [DBG] (///) Connection id ""0HND5E92HJVIH"" started.
2025-06-07T10:20:36.0992500+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:20:36.1788325+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:20:36.1852561+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:20:36.1899972+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:20:36.1989501+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:20:36.2005677+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:20:36.2008370+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:20:36.2028099+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:20:36.2171879+07:00 [DBG] (///) Connection id ""0HND5E92HJVIH"", Request id ""0HND5E92HJVIH:00000001"": started reading request body.
2025-06-07T10:20:36.2176670+07:00 [DBG] (///) Connection id ""0HND5E92HJVIH"", Request id ""0HND5E92HJVIH:00000001"": done reading request body.
2025-06-07T10:20:36.4980281+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:20:37.0634322+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:20:37.0647003+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:20:37.1487218+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:20:37.1750582+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:20:37.3065311+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:20:37.3214481+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:20:37.3633285+07:00 [DBG] (///) Created DbConnection. (40ms).
2025-06-07T10:20:37.3668088+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:20:37.4703362+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:20:37.4800825+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:20:37.4884136+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:21:29.9307444+07:00 [DBG] (///) Connection id ""0HND5E92HJVIH"" received FIN.
2025-06-07T10:21:29.9488420+07:00 [DBG] (///) Connection id ""0HND5E92HJVIH"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:21:30.0368268+07:00 [DBG] (///) Connection id ""0HND5E92HJVIH"" disconnecting.
2025-06-07T10:21:30.1827103+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __get_Item_1 == p.AcademicYear && __get_Item_2 == p.Semester && __get_Item_3 == p.PaymentDate)
    .FirstOrDefault()"'
2025-06-07T10:21:30.4694247+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester)) && (@__get_Item_3 == t.payment_date)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester)) && (@__get_Item_3 == t.payment_date), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:21:30.5124788+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:21:30.5196336+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T10:21:30.5281792+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (16ms).
2025-06-07T10:21:30.5367283+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2', @__get_Item_3='07/06/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester AND @__get_Item_3 = t.payment_date
LIMIT 1"
2025-06-07T10:21:30.6210659+07:00 [INF] (///) Executed DbCommand ("83"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2', @__get_Item_3='07/06/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester AND @__get_Item_3 = t.payment_date
LIMIT 1"
2025-06-07T10:21:30.6288339+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:30.6374359+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 9ms reading results.
2025-06-07T10:21:52.7421178+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:21:52.8467104+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:21:52.8514226+07:00 [DBG] (///) Hosting starting
2025-06-07T10:21:53.0122398+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:21:53.0127604+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:21:53.0841761+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:21:53.0860006+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:21:53.0956595+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:21:53.0962597+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:21:53.0963630+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:21:53.0966350+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:21:53.0966769+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:21:53.0967039+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:21:53.0967499+07:00 [DBG] (///) Hosting started
2025-06-07T10:21:54.4952650+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"" accepted.
2025-06-07T10:21:54.4960911+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"" started.
2025-06-07T10:21:54.5184865+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:21:54.5690692+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:21:54.5722932+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:21:54.5747791+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:21:54.5797590+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:21:54.5804688+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:21:54.5805889+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:21:54.5815130+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:21:54.5896172+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"", Request id ""0HND5E9PTIEN8:00000001"": started reading request body.
2025-06-07T10:21:54.5899683+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"", Request id ""0HND5E9PTIEN8:00000001"": done reading request body.
2025-06-07T10:21:54.7838935+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:21:55.2332610+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:21:55.2334910+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:21:55.2977736+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:21:55.3185547+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:21:55.4312035+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:21:55.4438442+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:21:55.4793334+07:00 [DBG] (///) Created DbConnection. (33ms).
2025-06-07T10:21:55.4829912+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:55.5677442+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:55.5763145+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:21:55.5831932+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:21:57.5936502+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0)
    .FirstOrDefault()"'
2025-06-07T10:21:57.8974957+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE t.student_code == @__studentCode_0) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE t.student_code == @__studentCode_0, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:21:57.9426219+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:21:57.9503626+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (4ms).
2025-06-07T10:21:57.9597285+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (17ms).
2025-06-07T10:21:57.9688240+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0
LIMIT 1"
2025-06-07T10:21:58.0998349+07:00 [INF] (///) Executed DbCommand ("130"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0
LIMIT 1"
2025-06-07T10:21:58.1479921+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:21:58.1740352+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.1933208+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 76ms reading results.
2025-06-07T10:21:58.2104381+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __paymentDates_3.Contains(p.PaymentDate))
    .ExecuteDelete()"'
2025-06-07T10:21:58.2586916+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:21:58.2659823+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T10:21:58.2660972+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:21:58.2678735+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (1ms).
2025-06-07T10:21:58.2700827+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:21:58.3477440+07:00 [INF] (///) Executed DbCommand ("79"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:21:58.3509289+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:21:58.3553993+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:21:58.3575610+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.3604706+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T10:21:58.3626389+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:21:58.3635936+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:21:58.3642108+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T10:21:58.3805652+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:21:58.3924300+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3808.1058 ms
2025-06-07T10:21:58.3994783+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"" received FIN.
2025-06-07T10:21:58.4003473+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:21:58.4045664+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"" disconnecting.
2025-06-07T10:21:58.4052766+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN9"" accepted.
2025-06-07T10:21:58.4053870+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN9"" started.
2025-06-07T10:21:58.4057508+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:21:58.4063442+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:21:58.4070266+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:21:58.4071794+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:21:58.4072908+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:21:58.4075503+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:21:58.4076593+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:21:58.4103983+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.4122041+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (1ms).
2025-06-07T10:21:58.4139574+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3896.165ms
2025-06-07T10:21:58.4200903+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN8"" stopped.
2025-06-07T10:21:58.4231113+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:21:58.4268855+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T10:21:58.5201892+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:21:58.5274158+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:21:58.5275560+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:21:58.5275923+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5280454+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5281710+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:21:58.5281998+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:21:58.5282285+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:21:58.5282702+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:21:58.5302338+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:21:58.5399819+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5402065+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 9ms reading results.
2025-06-07T10:21:58.5403575+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5404075+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:21:58.5407181+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:21:58.5455730+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:21:58.5538293+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:21:58.5541170+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 146.4414 ms
2025-06-07T10:21:58.5543630+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:21:58.5544538+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5545426+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:21:58.5546921+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN9"" received FIN.
2025-06-07T10:21:58.5547794+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN9"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:21:58.5546809+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 148.328ms
2025-06-07T10:21:58.5548942+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN9"" disconnecting.
2025-06-07T10:21:58.5560987+07:00 [DBG] (///) Connection id ""0HND5E9PTIEN9"" stopped.
2025-06-07T10:21:58.5601970+07:00 [DBG] (///) Connection id ""0HND5E9PTIENA"" accepted.
2025-06-07T10:21:58.5603586+07:00 [DBG] (///) Connection id ""0HND5E9PTIENA"" started.
2025-06-07T10:21:58.5605721+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:21:58.5607393+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:21:58.5607957+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:21:58.5608440+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:21:58.5609473+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:21:58.5609988+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:21:58.5746001+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:21:58.5772692+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T10:21:58.5839721+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:21:58.5849206+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:21:58.5849928+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:21:58.5850269+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5850821+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5851950+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:21:58.5852273+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:21:58.5852532+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:21:58.5852929+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:21:58.5875613+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:21:58.5901778+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5902600+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 2ms reading results.
2025-06-07T10:21:58.5903372+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5903705+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:21:58.5905189+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:21:58.5910556+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:21:58.5918531+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:21:58.5919454+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 30.9547 ms
2025-06-07T10:21:58.5920056+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:21:58.5920336+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:21:58.5920567+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:21:58.5920947+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 31.5237ms
2025-06-07T10:21:58.5921423+07:00 [DBG] (///) Connection id ""0HND5E9PTIENA"" disconnecting.
2025-06-07T10:21:58.5921690+07:00 [DBG] (///) Connection id ""0HND5E9PTIENA"" stopped.
2025-06-07T10:21:58.5922363+07:00 [DBG] (///) Connection id ""0HND5E9PTIENA"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:22:19.7661287+07:00 [DBG] (///) Connection id ""0HND5E9PTIENB"" accepted.
2025-06-07T10:22:19.7663213+07:00 [DBG] (///) Connection id ""0HND5E9PTIENB"" started.
2025-06-07T10:22:19.7666987+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:22:19.7670374+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:22:19.7671549+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:22:19.7672578+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:22:19.7674856+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:22:19.7677338+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:22:19.7677704+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:22:19.7678310+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:22:19.7680282+07:00 [DBG] (///) Connection id ""0HND5E9PTIENB"", Request id ""0HND5E9PTIENB:00000001"": started reading request body.
2025-06-07T10:22:19.7681009+07:00 [DBG] (///) Connection id ""0HND5E9PTIENB"", Request id ""0HND5E9PTIENB:00000001"": done reading request body.
2025-06-07T10:22:19.7688876+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:22:19.7691534+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:22:19.7692154+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:22:19.7692516+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:22:19.7693065+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:22:19.7695360+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:22:19.7696026+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:22:19.7749947+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:22:19.7751362+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:22:19.7751777+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:22:19.7752227+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0
LIMIT 1"
2025-06-07T10:22:19.7766508+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0
LIMIT 1"
2025-06-07T10:22:19.7772349+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:22:19.7773966+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:22:19.7775039+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:22:52.8869265+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:22:52.9941122+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:22:52.9982201+07:00 [DBG] (///) Hosting starting
2025-06-07T10:22:53.1575966+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:22:53.1580997+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:22:53.2328114+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:22:53.2349976+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:22:53.2461979+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:22:53.2468019+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:22:53.2469188+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:22:53.2471986+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:22:53.2472413+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:22:53.2472625+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:22:53.2473090+07:00 [DBG] (///) Hosting started
2025-06-07T10:22:56.3537161+07:00 [DBG] (///) Connection id ""0HND5EACBG5DH"" accepted.
2025-06-07T10:22:56.3545614+07:00 [DBG] (///) Connection id ""0HND5EACBG5DH"" started.
2025-06-07T10:22:56.3807215+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:22:56.4366570+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:22:56.4397697+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:22:56.4421153+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:22:56.4474766+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:22:56.4484647+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:22:56.4486147+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:22:56.4497633+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:22:56.4575300+07:00 [DBG] (///) Connection id ""0HND5EACBG5DH"", Request id ""0HND5EACBG5DH:00000001"": started reading request body.
2025-06-07T10:22:56.4577973+07:00 [DBG] (///) Connection id ""0HND5EACBG5DH"", Request id ""0HND5EACBG5DH:00000001"": done reading request body.
2025-06-07T10:22:56.6497316+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:22:57.0870728+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:22:57.0872876+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:22:57.1520716+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:22:57.1727135+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:22:57.2724314+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:22:57.2840683+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:22:57.3199287+07:00 [DBG] (///) Created DbConnection. (34ms).
2025-06-07T10:22:57.3227743+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:22:57.4032688+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:22:57.4137623+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:22:57.4204365+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:22:57.4959728+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __get_Item_1 == p.AcademicYear && __get_Item_2 == p.Semester)
    .FirstOrDefault()"'
2025-06-07T10:22:57.7894731+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:22:57.8347145+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:22:57.8430435+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (4ms).
2025-06-07T10:22:57.8525969+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (17ms).
2025-06-07T10:22:57.8627191+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester
LIMIT 1"
2025-06-07T10:22:57.9590589+07:00 [INF] (///) Executed DbCommand ("97"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester
LIMIT 1"
2025-06-07T10:22:58.0044122+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:22:58.0304657+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:22:58.0385132+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 73ms reading results.
2025-06-07T10:25:51.2390966+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:25:51.3497199+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:25:51.3537485+07:00 [DBG] (///) Hosting starting
2025-06-07T10:25:51.5075249+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:25:51.5079782+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:25:51.5750477+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:25:51.5771380+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:25:51.5865503+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:25:51.5871020+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:25:51.5871932+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:25:51.5874433+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:25:51.5874812+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:25:51.5874971+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:25:51.5875445+07:00 [DBG] (///) Hosting started
2025-06-07T10:25:56.4385616+07:00 [DBG] (///) Connection id ""0HND5EC20TM0F"" accepted.
2025-06-07T10:25:56.4392876+07:00 [DBG] (///) Connection id ""0HND5EC20TM0F"" started.
2025-06-07T10:25:56.4739769+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:25:56.5540292+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:25:56.5597398+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:25:56.5639935+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:25:56.5708130+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:25:56.5717958+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:25:56.7750131+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:25:57.2385645+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:25:57.2390437+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:25:57.2992372+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:25:57.3231680+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:25:57.4175049+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:25:57.4652411+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T10:25:57.7277525+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:25:57.7678147+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:25:57.8003603+07:00 [DBG] (///) Created DbConnection. (31ms).
2025-06-07T10:25:57.8032869+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:25:57.8908169+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:25:57.8983431+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:25:57.9052400+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T10:25:57.9130592+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (14ms).
2025-06-07T10:25:57.9206820+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:25:57.9961135+07:00 [INF] (///) Executed DbCommand ("73"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:25:58.0327344+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:25:58.0424544+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 39ms reading results.
2025-06-07T10:25:58.0491300+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:25:58.0552163+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (6ms).
2025-06-07T10:25:58.0573980+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:25:58.0632938+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:25:58.0897810+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:25:58.1003527+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 1524.8767 ms
2025-06-07T10:25:58.1079028+07:00 [DBG] (///) Connection id ""0HND5EC20TM0F"" received FIN.
2025-06-07T10:25:58.1085914+07:00 [DBG] (///) Connection id ""0HND5EC20TM0F"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:25:58.1120837+07:00 [DBG] (///) Connection id ""0HND5EC20TM0F"" disconnecting.
2025-06-07T10:25:58.1157871+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:25:58.1212969+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:25:58.1236915+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T10:25:58.1260765+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 1653.7638ms
2025-06-07T10:25:58.1305765+07:00 [DBG] (///) Connection id ""0HND5EC20TM0F"" stopped.
2025-06-07T10:26:02.4097013+07:00 [DBG] (///) Connection id ""0HND5EC20TM0G"" accepted.
2025-06-07T10:26:02.4099627+07:00 [DBG] (///) Connection id ""0HND5EC20TM0G"" started.
2025-06-07T10:26:02.4110931+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T10:26:02.4119363+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:26:02.4120322+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:26:02.4121138+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:02.4122883+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:26:02.4129731+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:26:02.4130958+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:26:02.4137202+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:02.4309785+07:00 [DBG] (///) Connection id ""0HND5EC20TM0G"", Request id ""0HND5EC20TM0G:00000001"": started reading request body.
2025-06-07T10:26:02.4313717+07:00 [DBG] (///) Connection id ""0HND5EC20TM0G"", Request id ""0HND5EC20TM0G:00000001"": done reading request body.
2025-06-07T10:26:02.4490019+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:26:02.4798985+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:26:02.4800717+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:26:02.4801077+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.4805407+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.4822243+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:26:02.4864282+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:26:02.4921211+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Tuition>()
    .Include(t => t.TuitionPayments)
    .Where(t => t.StudentCode == __8__locals1_studentCode_0 && t.AcademicYear == __academicYearRequest_1 && t.Semester == __semesterRequest_2)
    .FirstOrDefault()"'
2025-06-07T10:26:02.4965379+07:00 [DBG] (///) Including navigation: '"Tuition.TuitionPayments"'.
2025-06-07T10:26:02.5487344+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Tuition>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Tuition>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Tuition entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Tuition instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Tuition);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Tuition.StudentCode, Tuition.AcademicYear, Tuition.Semester PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindPrimaryKey()], 
                        keyValues: new object[]
                        { 
                            try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetInt32(2) } catch (Exception) { ... }  
                        }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Tuition)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]: 
                                {
                                    return 
                                    {
                                        Tuition instance;
                                        instance = new Tuition();
                                        instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                        instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                        instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                        instance.<TuitionFee>k__BackingField = try { dataReader.GetInt32(3) } catch (Exception) { ... } ;
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Tuition)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Tuition, Tuition>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Tuition)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: Tuition.TuitionPayments (ICollection<TuitionPayment>) Collection ToDependent TuitionPayment Inverse: Tuition | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Tuition, TuitionPayment>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(6) ? default(int?) : (int?)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(7) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right, 
                    (left, right) => left == null ? right == null : right != null && ((DateOnly)left).Equals((DateOnly)right) 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    TuitionPayment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        TuitionPayment instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(TuitionPayment);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                            keyValues: new object[]
                            { 
                                try { dataReader.IsDBNull(4) ? default(object) : (object)dataReader.GetString(4) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetString(5) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(6) ? default(object) : (object)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                            }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (TuitionPayment)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                                    {
                                        return 
                                        {
                                            TuitionPayment instance;
                                            instance = new TuitionPayment();
                                            instance.<StudentCode>k__BackingField = try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } ;
                                            instance.<AcademicYear>k__BackingField = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                                            instance.<Semester>k__BackingField = try { dataReader.IsDBNull(6) ? default(int) : dataReader.GetInt32(6) } catch (Exception) { ... } ;
                                            instance.<PaymentDate>k__BackingField = try { dataReader.IsDBNull(7) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... } ;
                                            instance.<AmountPaid>k__BackingField = try { dataReader.IsDBNull(8) ? default(int) : dataReader.GetInt32(8) } catch (Exception) { ... } ;
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(TuitionPayment)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: TuitionPayment.Tuition (Tuition) ToPrincipal Tuition Inverse: TuitionPayments | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindNavigation(\"Tuition\")], 
                fixup: (namelessParameter{9}, namelessParameter{10}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{10}, 
                        forMaterialization: True);
                    return namelessParameter{10}.<Tuition>k__BackingField = namelessParameter{9};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Tuition)(resultContext.Values[0]) : default(Tuition);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:26:02.5507498+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:26:02.5508401+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.5512806+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.5513768+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T10:26:02.5555128+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T10:26:02.5805591+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T10:26:02.5994052+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.5995728+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 43ms reading results.
2025-06-07T10:26:02.6002516+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2 && p.PaymentDate == __paymentDate_3)
    .FirstOrDefault()"'
2025-06-07T10:26:02.6040261+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:26:02.6054527+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:26:02.6055151+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.6057548+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.6062840+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T10:26:02.6095925+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T10:26:02.6097817+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.6098342+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:26:02.6108253+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2)
    .Sum(p => p.AmountPaid)"'
2025-06-07T10:26:02.6122545+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:26:02.6165682+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:26:02.6166830+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.6167163+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.6167703+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T10:26:02.6208820+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T10:26:02.6229447+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.6230333+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T10:26:02.6625053+07:00 [DBG] (///) The navigation '"TuitionPayment"."Tuition"' for entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' was detected as changed.
2025-06-07T10:26:02.6674373+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:26:02.6704002+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T10:26:02.6735191+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T10:26:02.6816403+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T10:26:02.7358281+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-07T10:26:02.7403569+07:00 [DBG] (///) Created transaction savepoint.
2025-06-07T10:26:02.7418238+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:26:02.7418853+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.7419239+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.7419757+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T10:26:02.7434806+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T10:26:02.7454699+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.7455387+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T10:26:02.7477913+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-07T10:26:02.7499043+07:00 [DBG] (///) Released transaction savepoint.
2025-06-07T10:26:02.7562486+07:00 [DBG] (///) The '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T10:26:02.7578912+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T10:26:02.7604586+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:26:02.7733949+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:26:02.7750387+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.7754326+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:26:02.7770090+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:26:02.7771289+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:26:02.7776228+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:02.7778861+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 365.4024 ms
2025-06-07T10:26:02.7783965+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:26:02.7784587+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.7785763+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:26:02.7786684+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 367.5668ms
2025-06-07T10:26:02.7788371+07:00 [DBG] (///) Connection id ""0HND5EC20TM0G"" disconnecting.
2025-06-07T10:26:02.7788770+07:00 [DBG] (///) Connection id ""0HND5EC20TM0G"" stopped.
2025-06-07T10:26:02.7789409+07:00 [DBG] (///) Connection id ""0HND5EC20TM0G"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:26:02.7835058+07:00 [DBG] (///) Connection id ""0HND5EC20TM0H"" accepted.
2025-06-07T10:26:02.7836288+07:00 [DBG] (///) Connection id ""0HND5EC20TM0H"" started.
2025-06-07T10:26:02.7838000+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:26:02.7839203+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:26:02.7839683+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:26:02.7840252+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:26:02.7841537+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:26:02.7842035+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:26:02.7960967+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:26:02.7990389+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:26:02.7991597+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:26:02.7991863+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.7992336+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.7993781+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:26:02.7994176+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.7994509+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:02.7994924+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:26:02.8008542+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:26:02.8011179+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.8011735+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:26:02.8012823+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.8013203+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:26:02.8014386+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:26:02.8014868+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:26:02.8017072+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:26:02.8017904+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 17.6328 ms
2025-06-07T10:26:02.8018524+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:26:02.8018846+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:02.8019108+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:26:02.8019771+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 18.1666ms
2025-06-07T10:26:02.8020342+07:00 [DBG] (///) Connection id ""0HND5EC20TM0H"" disconnecting.
2025-06-07T10:26:02.8020556+07:00 [DBG] (///) Connection id ""0HND5EC20TM0H"" stopped.
2025-06-07T10:26:02.8020891+07:00 [DBG] (///) Connection id ""0HND5EC20TM0H"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:26:05.0153990+07:00 [DBG] (///) Connection id ""0HND5EC20TM0I"" accepted.
2025-06-07T10:26:05.0155575+07:00 [DBG] (///) Connection id ""0HND5EC20TM0I"" started.
2025-06-07T10:26:05.0158457+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:26:05.0160602+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:26:05.0161660+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:26:05.0162426+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:05.0163909+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:26:05.0164710+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:05.0181077+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:26:05.0204010+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T10:26:05.0277842+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:26:05.0286897+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:26:05.0287765+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:26:05.0288044+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:05.0288587+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:05.0289793+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:26:05.0290123+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:05.0290455+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:05.0291449+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:26:05.0302081+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:26:05.0345360+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:05.0346962+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 4ms reading results.
2025-06-07T10:26:05.0348020+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:05.0348390+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:26:05.0350416+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:26:05.0358040+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:26:05.0366480+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:05.0367476+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 20.3169 ms
2025-06-07T10:26:05.0368165+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:26:05.0368563+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:05.0368852+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:26:05.0369581+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 21.1005ms
2025-06-07T10:26:05.0370047+07:00 [DBG] (///) Connection id ""0HND5EC20TM0I"" disconnecting.
2025-06-07T10:26:05.0370235+07:00 [DBG] (///) Connection id ""0HND5EC20TM0I"" stopped.
2025-06-07T10:26:05.0370721+07:00 [DBG] (///) Connection id ""0HND5EC20TM0I"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:26:35.3679166+07:00 [DBG] (///) Connection id ""0HND5EC20TM0J"" accepted.
2025-06-07T10:26:35.3694764+07:00 [DBG] (///) Connection id ""0HND5EC20TM0J"" started.
2025-06-07T10:26:35.3697811+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:26:35.3699141+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:26:35.3699559+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:26:35.3700843+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:35.3701898+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:26:35.3703267+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:26:35.3703527+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:26:35.3704705+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:26:35.3706536+07:00 [DBG] (///) Connection id ""0HND5EC20TM0J"", Request id ""0HND5EC20TM0J:00000001"": started reading request body.
2025-06-07T10:26:35.3707381+07:00 [DBG] (///) Connection id ""0HND5EC20TM0J"", Request id ""0HND5EC20TM0J:00000001"": done reading request body.
2025-06-07T10:26:35.3765167+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:26:35.3979755+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:26:35.4193405+07:00 [DBG] (///) Created DbConnection. (21ms).
2025-06-07T10:26:35.4194349+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:35.4195513+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:35.4620761+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:26:35.4631754+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:26:35.4723181+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __get_Item_1 == p.AcademicYear && __get_Item_2 == p.Semester)
    .FirstOrDefault()"'
2025-06-07T10:26:35.4758791+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:26:35.4767355+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:26:35.4767933+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:35.4768227+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:26:35.4768652+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester
LIMIT 1"
2025-06-07T10:26:35.4778444+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester
LIMIT 1"
2025-06-07T10:26:35.4781227+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:26:35.4782320+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:26:35.4782766+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:32:02.7848505+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:32:02.9075771+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:32:02.9130103+07:00 [DBG] (///) Hosting starting
2025-06-07T10:32:03.1032923+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:32:03.1038399+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:32:03.1861287+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:32:03.1879795+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:32:03.1993509+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:32:03.1999264+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:32:03.2000250+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:32:03.2002911+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:32:03.2003363+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:32:03.2003554+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:32:03.2003973+07:00 [DBG] (///) Hosting started
2025-06-07T10:32:38.9861580+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:32:39.1114203+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:32:39.1160483+07:00 [DBG] (///) Hosting starting
2025-06-07T10:32:39.3055916+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:32:39.3061406+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:32:39.3935776+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:32:39.3955110+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:32:39.4063503+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:32:39.4069808+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:32:39.4071030+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:32:39.4074165+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:32:39.4074711+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:32:39.4075028+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:32:39.4075929+07:00 [DBG] (///) Hosting started
2025-06-07T10:32:43.7799253+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"" accepted.
2025-06-07T10:32:43.7810154+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"" started.
2025-06-07T10:32:43.8065768+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T10:32:43.8734131+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:32:43.8776320+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:32:43.8807681+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:32:43.8873552+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:32:43.8883625+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:32:43.8885529+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:32:43.8898895+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:32:43.8994981+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"", Request id ""0HND5EFRDKDQR:00000001"": started reading request body.
2025-06-07T10:32:43.8998727+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"", Request id ""0HND5EFRDKDQR:00000001"": done reading request body.
2025-06-07T10:32:44.1373338+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:32:44.6969654+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:32:44.6976125+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:32:44.7750639+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:32:44.8000282+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:32:44.9248291+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:32:44.9406776+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:32:44.9812296+07:00 [DBG] (///) Created DbConnection. (38ms).
2025-06-07T10:32:44.9848680+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:45.0838158+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:45.0936389+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:32:45.1036318+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:32:45.1968700+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __get_Item_1 == p.AcademicYear && __get_Item_2 == p.Semester)
    .FirstOrDefault()"'
2025-06-07T10:32:45.5447480+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__studentCode_0) && (@__get_Item_1 == t.academic_year)) && (@__get_Item_2 == t.semester), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:32:45.6005562+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:32:45.6098502+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (4ms).
2025-06-07T10:32:45.6229892+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (21ms).
2025-06-07T10:32:45.6348110+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester
LIMIT 1"
2025-06-07T10:32:45.7462231+07:00 [INF] (///) Executed DbCommand ("109"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__get_Item_1='2024-2025', @__get_Item_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND @__get_Item_1 = t.academic_year AND @__get_Item_2 = t.semester
LIMIT 1"
2025-06-07T10:32:45.8171128+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:32:45.8567108+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:45.8680419+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 113ms reading results.
2025-06-07T10:32:45.8783502+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __paymentDates_3.Contains(p.PaymentDate))
    .ExecuteDelete()"'
2025-06-07T10:32:45.9434903+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:32:45.9513668+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T10:32:45.9514683+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:32:45.9537910+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (2ms).
2025-06-07T10:32:45.9563092+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:32:46.0815605+07:00 [INF] (///) Executed DbCommand ("127"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/06/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:32:46.0850572+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:32:46.0901374+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:32:46.0926510+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.0967154+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (4ms).
2025-06-07T10:32:46.0995193+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:32:46.1005448+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:32:46.1012160+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T10:32:46.1205329+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:32:46.1299578+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2238.4674 ms
2025-06-07T10:32:46.1380493+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"" received FIN.
2025-06-07T10:32:46.1389468+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:32:46.1433111+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"" disconnecting.
2025-06-07T10:32:46.1431226+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQS"" accepted.
2025-06-07T10:32:46.1440623+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQS"" started.
2025-06-07T10:32:46.1458514+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:32:46.1466342+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:32:46.1468001+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:32:46.1468111+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:32:46.1469269+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:32:46.1471404+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:32:46.1472461+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:32:46.1522068+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.1547800+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T10:32:46.1570839+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2351.347ms
2025-06-07T10:32:46.1616567+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:32:46.1642062+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQR"" stopped.
2025-06-07T10:32:46.1666038+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T10:32:46.2762115+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:32:46.2856531+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:32:46.2858180+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:32:46.2858655+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.2864120+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.2865965+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:32:46.2866543+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:32:46.2866891+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:32:46.2867388+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:32:46.2898655+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:32:46.3011095+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3012898+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 11ms reading results.
2025-06-07T10:32:46.3014100+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3014577+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:32:46.3017393+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:32:46.3062321+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:32:46.3131294+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:32:46.3134281+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 166.1700 ms
2025-06-07T10:32:46.3137596+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:32:46.3138772+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3139511+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:32:46.3139545+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQS"" received FIN.
2025-06-07T10:32:46.3141212+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQS"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:32:46.3141963+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 168.3562ms
2025-06-07T10:32:46.3142497+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQS"" disconnecting.
2025-06-07T10:32:46.3143685+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQS"" stopped.
2025-06-07T10:32:46.3191312+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQT"" accepted.
2025-06-07T10:32:46.3192823+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQT"" started.
2025-06-07T10:32:46.3195686+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:32:46.3197505+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:32:46.3198256+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:32:46.3199102+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:32:46.3200620+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:32:46.3201907+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:32:46.3362369+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:32:46.3395480+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T10:32:46.3479045+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:32:46.3489666+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:32:46.3491196+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:32:46.3491664+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3492179+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3493432+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:32:46.3493868+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:32:46.3494312+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:32:46.3495025+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:32:46.3505290+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:32:46.3537821+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3538903+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 3ms reading results.
2025-06-07T10:32:46.3539853+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3540351+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:32:46.3542708+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:32:46.3550140+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:32:46.3561121+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:32:46.3562239+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 36.1168 ms
2025-06-07T10:32:46.3562963+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:32:46.3563349+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:32:46.3563660+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:32:46.3564216+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 36.8569ms
2025-06-07T10:32:46.3564788+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQT"" disconnecting.
2025-06-07T10:32:46.3565053+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQT"" stopped.
2025-06-07T10:32:46.3566760+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQT"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:33:47.5431073+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"" accepted.
2025-06-07T10:33:47.5445077+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"" started.
2025-06-07T10:33:47.5449083+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 68
2025-06-07T10:33:47.5451108+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:33:47.5451915+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:33:47.5452655+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:33:47.5454124+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:33:47.5456018+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:33:47.5456408+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:33:47.5458959+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:33:47.5473009+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"", Request id ""0HND5EFRDKDQU:00000001"": started reading request body.
2025-06-07T10:33:47.5475146+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"", Request id ""0HND5EFRDKDQU:00000001"": done reading request body.
2025-06-07T10:33:47.5545921+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:33:47.5559426+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "List<DeleteTuitionPaymentRequest> request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON value could not be converted to System.DateOnly. Path: $[0].paymentDate | LineNumber: 0 | BytePositionInLine: 66.
 ---> System.FormatException: The JSON value is not in a supported DateOnly format.
   at System.Text.Json.ThrowHelper.ThrowFormatException(DataType dataType)
   at System.Text.Json.Serialization.Converters.DateOnlyConverter.ReadCore(Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.DateOnlyConverter.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T10:33:47.6103581+07:00 [ERR] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 64.9127 ms
2025-06-07T10:33:47.6105596+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 65.6641ms
2025-06-07T10:33:47.6125881+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"" received FIN.
2025-06-07T10:33:47.6117942+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"" disconnecting.
2025-06-07T10:33:47.6126950+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:33:47.6138189+07:00 [DBG] (///) Connection id ""0HND5EFRDKDQU"" stopped.
2025-06-07T10:34:11.8021331+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:34:11.8787679+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:34:11.8828884+07:00 [DBG] (///) Hosting starting
2025-06-07T10:34:12.0447692+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:34:12.0451860+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:34:12.1064197+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:34:12.1076630+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:34:12.1132199+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:34:12.1138378+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:34:12.1139882+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:34:12.1141855+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:34:12.1142624+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:34:12.1142956+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:34:12.1143376+07:00 [DBG] (///) Hosting started
2025-06-07T10:34:18.4601751+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"" accepted.
2025-06-07T10:34:18.4612177+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"" started.
2025-06-07T10:34:18.4804652+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 68
2025-06-07T10:34:18.5428008+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:34:18.5460214+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:34:18.5493048+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:34:18.5543488+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:34:18.5550647+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:34:18.5552397+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:34:18.5559922+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:34:18.5614096+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"", Request id ""0HND5EGNKIHN2:00000001"": started reading request body.
2025-06-07T10:34:18.5615798+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"", Request id ""0HND5EGNKIHN2:00000001"": done reading request body.
2025-06-07T10:34:18.5705784+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:34:18.5716378+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "List<DeleteTuitionPaymentRequest> request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON value could not be converted to System.DateOnly. Path: $[0].paymentDate | LineNumber: 0 | BytePositionInLine: 66.
 ---> System.FormatException: The JSON value is not in a supported DateOnly format.
   at System.Text.Json.ThrowHelper.ThrowFormatException(DataType dataType)
   at System.Text.Json.Serialization.Converters.DateOnlyConverter.ReadCore(Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.DateOnlyConverter.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T10:34:18.6184797+07:00 [ERR] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 62.4835 ms
2025-06-07T10:34:18.6256808+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"" received FIN.
2025-06-07T10:34:18.6259601+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:34:18.6278870+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 148.4843ms
2025-06-07T10:34:18.6289943+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"" disconnecting.
2025-06-07T10:34:18.6292426+07:00 [DBG] (///) Connection id ""0HND5EGNKIHN2"" stopped.
2025-06-07T10:36:38.4552511+07:00 [INF] (///) Application is shutting down...
2025-06-07T10:36:38.4559182+07:00 [DBG] (///) Hosting stopping
2025-06-07T10:36:38.4602793+07:00 [DBG] (///) Hosting stopped
2025-06-07T10:38:44.7549648+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:38:44.8309122+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:38:44.8351981+07:00 [DBG] (///) Hosting starting
2025-06-07T10:38:45.0076596+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:38:45.0081115+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:38:45.0731889+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:38:45.0745174+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:38:45.0808697+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:38:45.0814286+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:38:45.0815678+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:38:45.0818026+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:38:45.0818601+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:38:45.0818855+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:38:45.0819297+07:00 [DBG] (///) Hosting started
2025-06-07T10:38:52.8230562+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"" accepted.
2025-06-07T10:38:52.8241353+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"" started.
2025-06-07T10:38:52.8421228+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T10:38:52.9047029+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:38:52.9079499+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:38:52.9114551+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:38:52.9164469+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:38:52.9171485+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:38:52.9173364+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:38:52.9182249+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:38:52.9238845+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"", Request id ""0HND5EJ9D3F7J:00000001"": started reading request body.
2025-06-07T10:38:52.9240831+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"", Request id ""0HND5EJ9D3F7J:00000001"": done reading request body.
2025-06-07T10:38:53.0567667+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:38:53.4666057+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:38:53.4668978+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:38:53.5354785+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:38:53.5562920+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:38:53.6510154+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:38:53.6606652+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:38:53.6913441+07:00 [DBG] (///) Created DbConnection. (29ms).
2025-06-07T10:38:53.6943519+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:53.7779677+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:53.7848192+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:38:53.7915198+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:38:53.8551758+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Tuition>()
    .Include(t => t.TuitionPayments)
    .Where(t => t.StudentCode == __8__locals1_studentCode_0 && t.AcademicYear == __academicYearRequest_1 && t.Semester == __semesterRequest_2)
    .FirstOrDefault()"'
2025-06-07T10:38:53.9044324+07:00 [DBG] (///) Including navigation: '"Tuition.TuitionPayments"'.
2025-06-07T10:38:54.2430199+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Tuition>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Tuition>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Tuition entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Tuition instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Tuition);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Tuition.StudentCode, Tuition.AcademicYear, Tuition.Semester PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindPrimaryKey()], 
                        keyValues: new object[]
                        { 
                            try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetInt32(2) } catch (Exception) { ... }  
                        }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Tuition)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]: 
                                {
                                    return 
                                    {
                                        Tuition instance;
                                        instance = new Tuition();
                                        instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                        instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                        instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                        instance.<TuitionFee>k__BackingField = try { dataReader.GetInt32(3) } catch (Exception) { ... } ;
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Tuition)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Tuition, Tuition>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Tuition)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: Tuition.TuitionPayments (ICollection<TuitionPayment>) Collection ToDependent TuitionPayment Inverse: Tuition | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Tuition, TuitionPayment>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(6) ? default(int?) : (int?)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(7) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right, 
                    (left, right) => left == null ? right == null : right != null && ((DateOnly)left).Equals((DateOnly)right) 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    TuitionPayment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        TuitionPayment instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(TuitionPayment);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                            keyValues: new object[]
                            { 
                                try { dataReader.IsDBNull(4) ? default(object) : (object)dataReader.GetString(4) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetString(5) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(6) ? default(object) : (object)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                            }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (TuitionPayment)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                                    {
                                        return 
                                        {
                                            TuitionPayment instance;
                                            instance = new TuitionPayment();
                                            instance.<StudentCode>k__BackingField = try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } ;
                                            instance.<AcademicYear>k__BackingField = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                                            instance.<Semester>k__BackingField = try { dataReader.IsDBNull(6) ? default(int) : dataReader.GetInt32(6) } catch (Exception) { ... } ;
                                            instance.<PaymentDate>k__BackingField = try { dataReader.IsDBNull(7) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... } ;
                                            instance.<AmountPaid>k__BackingField = try { dataReader.IsDBNull(8) ? default(int) : dataReader.GetInt32(8) } catch (Exception) { ... } ;
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(TuitionPayment)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: TuitionPayment.Tuition (Tuition) ToPrincipal Tuition Inverse: TuitionPayments | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindNavigation(\"Tuition\")], 
                fixup: (namelessParameter{9}, namelessParameter{10}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{10}, 
                        forMaterialization: True);
                    return namelessParameter{10}.<Tuition>k__BackingField = namelessParameter{9};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Tuition)(resultContext.Values[0]) : default(Tuition);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:38:54.2900583+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:38:54.2975869+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T10:38:54.3063222+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (16ms).
2025-06-07T10:38:54.3164811+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T10:38:54.4043915+07:00 [INF] (///) Executed DbCommand ("85"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T10:38:54.4556398+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T10:38:54.5162972+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:38:54.5246274+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.5349476+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 122ms reading results.
2025-06-07T10:38:54.5402261+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2 && p.PaymentDate == __paymentDate_3)
    .FirstOrDefault()"'
2025-06-07T10:38:54.5472714+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:38:54.5499397+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:38:54.5500821+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:38:54.5503657+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:38:54.5505157+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T10:38:54.5561941+07:00 [INF] (///) Executed DbCommand ("6"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T10:38:54.5601499+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.5603281+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 3ms reading results.
2025-06-07T10:38:54.5619888+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2 && p.PaymentDate == __paymentDate_3)
    .ExecuteUpdate(setters => setters.SetProperty<int>(
        propertyExpression: p => p.AmountPaid, 
        valueExpression: __money_Value_4))"'
2025-06-07T10:38:54.5727127+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        UPDATE tuition_payment AS t
        SET 
        t.amount_paid = @__money_Value_4
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        UPDATE tuition_payment AS t
        SET 
        t.amount_paid = @__money_Value_4
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: BulkUpdate, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:38:54.5773073+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T10:38:54.5774549+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:38:54.5775108+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:38:54.5779016+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__money_Value_4='1000000', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T10:38:54.5826621+07:00 [INF] (///) Executed DbCommand ("5"ms) [Parameters=["@__money_Value_4='1000000', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T10:38:54.5858051+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T10:38:54.5876116+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T10:38:54.5948271+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T10:38:54.5991357+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 0 entities written to the database.
2025-06-07T10:38:54.6013409+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:38:54.6137271+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:38:54.6161215+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.6194779+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (3ms).
2025-06-07T10:38:54.6213373+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:38:54.6221318+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:38:54.6230670+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:38:54.6307781+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 1710.6072 ms
2025-06-07T10:38:54.6469158+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"" received FIN.
2025-06-07T10:38:54.6472998+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:38:54.6509333+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"" disconnecting.
2025-06-07T10:38:54.6512832+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7K"" accepted.
2025-06-07T10:38:54.6514149+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7K"" started.
2025-06-07T10:38:54.6515783+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:38:54.6523984+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:38:54.6533928+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:38:54.6535896+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:38:54.6537145+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:38:54.6539851+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:38:54.6541310+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:38:54.6560716+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.6580569+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (1ms).
2025-06-07T10:38:54.6597375+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 1818.7319ms
2025-06-07T10:38:54.6637397+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7J"" stopped.
2025-06-07T10:38:54.6756251+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:38:54.6800374+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T10:38:54.7234412+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:38:54.7317157+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:38:54.7318979+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:38:54.7319526+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.7323836+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.7325544+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:38:54.7325992+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:38:54.7326337+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:38:54.7327059+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:38:54.7349242+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:38:54.7421757+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.7423195+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 7ms reading results.
2025-06-07T10:38:54.7424687+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.7425470+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:38:54.7429819+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:38:54.7478886+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:38:54.7558124+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:38:54.7560867+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 102.0050 ms
2025-06-07T10:38:54.7563351+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:38:54.7564319+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.7564435+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7K"" received FIN.
2025-06-07T10:38:54.7565162+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:38:54.7565380+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7K"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:38:54.7566832+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7K"" disconnecting.
2025-06-07T10:38:54.7566627+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 104.2437ms
2025-06-07T10:38:54.7568198+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7K"" stopped.
2025-06-07T10:38:54.7626466+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7L"" accepted.
2025-06-07T10:38:54.7628042+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7L"" started.
2025-06-07T10:38:54.7630212+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:38:54.7631896+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:38:54.7632634+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:38:54.7633403+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:38:54.7634569+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:38:54.7636213+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:38:54.8027352+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:38:54.8059169+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T10:38:54.8139157+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:38:54.8153449+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:38:54.8154392+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:38:54.8154775+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.8155439+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.8156768+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:38:54.8157243+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:38:54.8157642+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:38:54.8158205+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:38:54.8168628+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:38:54.8188692+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.8189584+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T10:38:54.8190457+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.8190919+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:38:54.8192917+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:38:54.8198919+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:38:54.8209713+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:38:54.8211475+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 57.5828 ms
2025-06-07T10:38:54.8212408+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:38:54.8212949+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:38:54.8213400+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:38:54.8214236+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 58.3913ms
2025-06-07T10:38:54.8215050+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7L"" disconnecting.
2025-06-07T10:38:54.8215406+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7L"" stopped.
2025-06-07T10:38:54.8216126+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7L"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:39:14.4895475+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7M"" accepted.
2025-06-07T10:39:14.4897665+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7M"" started.
2025-06-07T10:39:14.4900553+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 68
2025-06-07T10:39:14.4903482+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:39:14.4904329+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:39:14.4905327+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:14.4907043+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:39:14.4908605+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:39:14.4909071+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:39:14.4909877+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:14.4912210+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7M"", Request id ""0HND5EJ9D3F7M:00000001"": started reading request body.
2025-06-07T10:39:14.4913113+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7M"", Request id ""0HND5EJ9D3F7M:00000001"": done reading request body.
2025-06-07T10:39:14.4995590+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:14.5005194+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "List<DeleteTuitionPaymentRequest> request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON value could not be converted to System.DateOnly. Path: $[0].paymentDate | LineNumber: 0 | BytePositionInLine: 66.
 ---> System.FormatException: The JSON value is not in a supported DateOnly format.
   at System.Text.Json.ThrowHelper.ThrowFormatException(DataType dataType)
   at System.Text.Json.Serialization.Converters.DateOnlyConverter.ReadCore(Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.DateOnlyConverter.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T10:39:14.5396246+07:00 [ERR] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 48.8045 ms
2025-06-07T10:39:14.5398763+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 49.8187ms
2025-06-07T10:39:14.5400215+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7M"" disconnecting.
2025-06-07T10:39:14.5400812+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7M"" stopped.
2025-06-07T10:39:14.5401228+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7M"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:39:31.9927907+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7N"" accepted.
2025-06-07T10:39:31.9929207+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7N"" started.
2025-06-07T10:39:31.9931406+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T10:39:31.9933054+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:39:31.9933628+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:39:31.9934149+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:31.9937016+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:39:31.9937640+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:39:31.9937820+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:39:31.9938569+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:31.9939463+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7N"", Request id ""0HND5EJ9D3F7N:00000001"": started reading request body.
2025-06-07T10:39:31.9940844+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7N"", Request id ""0HND5EJ9D3F7N:00000001"": done reading request body.
2025-06-07T10:39:32.0026526+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:39:32.0047279+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:39:32.0048492+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:39:32.0048826+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.0049332+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.0050897+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:39:32.0051468+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:39:32.0077928+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:39:32.0078855+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0079251+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0081099+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T10:39:32.0092814+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T10:39:32.0098257+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T10:39:32.0100724+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.0101406+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:39:32.0106029+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:39:32.0106448+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0106866+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0107948+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T10:39:32.0116845+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T10:39:32.0118518+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.0118991+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:39:32.0129305+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2)
    .Sum(p => p.AmountPaid)"'
2025-06-07T10:39:32.0166160+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:39:32.0205984+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:39:32.0206644+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0206957+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0207811+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T10:39:32.0221480+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T10:39:32.0240634+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.0241762+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T10:39:32.0426937+07:00 [DBG] (///) The navigation '"TuitionPayment"."Tuition"' for entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' was detected as changed.
2025-06-07T10:39:32.0441606+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T10:39:32.0448479+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T10:39:32.0449506+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T10:39:32.0460568+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T10:39:32.0859613+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-07T10:39:32.0899821+07:00 [DBG] (///) Created transaction savepoint.
2025-06-07T10:39:32.0917461+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:39:32.0918278+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0918906+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.0919693+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='7508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T10:39:32.0941679+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='7508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T10:39:32.0966277+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.0967127+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 2ms reading results.
2025-06-07T10:39:32.0985951+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-07T10:39:32.1013534+07:00 [DBG] (///) Released transaction savepoint.
2025-06-07T10:39:32.1079954+07:00 [DBG] (///) The '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T10:39:32.1093526+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T10:39:32.1095121+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:39:32.1106185+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:39:32.1106991+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1107654+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:32.1109121+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:39:32.1109876+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:39:32.1110331+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:32.1111471+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 117.3691 ms
2025-06-07T10:39:32.1113460+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:39:32.1113908+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1114345+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:32.1115005+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 118.3561ms
2025-06-07T10:39:32.1115680+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7N"" disconnecting.
2025-06-07T10:39:32.1115934+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7N"" stopped.
2025-06-07T10:39:32.1116238+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7N"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:39:32.1163995+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7O"" accepted.
2025-06-07T10:39:32.1164950+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7O"" started.
2025-06-07T10:39:32.1166933+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:39:32.1168437+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:39:32.1168961+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:39:32.1169300+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:39:32.1170680+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:39:32.1171378+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:39:32.1179717+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:39:32.1193263+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:39:32.1193802+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:39:32.1194033+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1194538+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1195780+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:39:32.1196141+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.1196549+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.1197078+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:39:32.1211400+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:39:32.1214324+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1214865+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:39:32.1215685+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1216152+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:32.1217269+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:39:32.1217658+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:39:32.1219045+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:39:32.1220029+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 4.8747 ms
2025-06-07T10:39:32.1220896+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:39:32.1221184+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1222325+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:32.1222858+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 5.5872ms
2025-06-07T10:39:32.1223526+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7O"" disconnecting.
2025-06-07T10:39:32.1223810+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7O"" stopped.
2025-06-07T10:39:32.1224124+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7O"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:39:32.1269959+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7P"" accepted.
2025-06-07T10:39:32.1271014+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7P"" started.
2025-06-07T10:39:32.1273200+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:39:32.1274533+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:39:32.1275028+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:39:32.1275400+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:32.1276185+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:39:32.1277216+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:32.1284945+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:39:32.1289534+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:39:32.1290058+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:39:32.1290383+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1290843+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1292115+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:39:32.1292434+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.1292779+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:32.1293230+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:39:32.1302667+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:39:32.1304897+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1306069+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:39:32.1307005+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1307667+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:32.1308974+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:39:32.1309420+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:39:32.1310865+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:39:32.1311879+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.5151 ms
2025-06-07T10:39:32.1312861+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:39:32.1313288+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:32.1313665+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:32.1314213+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 4.0952ms
2025-06-07T10:39:32.1314844+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7P"" disconnecting.
2025-06-07T10:39:32.1315240+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7P"" stopped.
2025-06-07T10:39:32.1315591+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7P"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:39:39.9306974+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7Q"" accepted.
2025-06-07T10:39:39.9307773+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7Q"" started.
2025-06-07T10:39:39.9314910+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:39:39.9316749+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:39:39.9317351+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:39:39.9317769+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:39:39.9318793+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:39:39.9319948+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:39:39.9333472+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:39:39.9341245+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:39:39.9342171+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:39:39.9342649+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:39.9343206+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:39.9344862+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:39:39.9345344+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:39.9345761+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:39:39.9346297+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:39:39.9364841+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:39:39.9369684+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:39.9370686+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:39:39.9372534+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:39.9373249+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:39.9374332+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:39:39.9374720+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:39:39.9376648+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:39:39.9378058+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 5.8469 ms
2025-06-07T10:39:39.9379046+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:39:39.9379589+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:39:39.9379927+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:39:39.9380508+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 6.5529ms
2025-06-07T10:39:39.9381082+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7Q"" disconnecting.
2025-06-07T10:39:39.9381337+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7Q"" stopped.
2025-06-07T10:39:39.9381748+07:00 [DBG] (///) Connection id ""0HND5EJ9D3F7Q"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:41:14.0291223+07:00 [INF] (///) Application is shutting down...
2025-06-07T10:41:14.0300629+07:00 [DBG] (///) Hosting stopping
2025-06-07T10:41:14.0357465+07:00 [DBG] (///) Hosting stopped
2025-06-07T10:41:16.7344902+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:41:16.8090011+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:41:16.8135044+07:00 [DBG] (///) Hosting starting
2025-06-07T10:41:16.9713971+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:41:16.9718306+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:41:17.0315130+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:41:17.0329221+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:41:17.0385982+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:41:17.0391646+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:41:17.0392530+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:41:17.0394867+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:41:17.0395286+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:41:17.0395456+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:41:17.0395703+07:00 [DBG] (///) Hosting started
2025-06-07T10:41:18.9354942+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUC"" accepted.
2025-06-07T10:41:18.9360821+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUC"" started.
2025-06-07T10:41:18.9566095+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:41:19.0212840+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:41:19.0246743+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:41:19.0279954+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:41:19.0333214+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:41:19.0341121+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:41:19.1572657+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:41:19.6056297+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:41:19.6059341+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:41:19.6741376+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:41:19.6984030+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:41:19.7916898+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:41:19.8276651+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T10:41:20.0603586+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:41:20.0950333+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:41:20.1257484+07:00 [DBG] (///) Created DbConnection. (29ms).
2025-06-07T10:41:20.1286236+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:41:20.2075900+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:41:20.2141132+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:41:20.2199745+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (2ms).
2025-06-07T10:41:20.2297186+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (15ms).
2025-06-07T10:41:20.2381467+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:41:20.3158694+07:00 [INF] (///) Executed DbCommand ("75"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:41:20.3453612+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:41:20.3547582+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 31ms reading results.
2025-06-07T10:41:20.3610184+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:41:20.3671442+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (6ms).
2025-06-07T10:41:20.3693523+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:41:20.3766494+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:41:20.4074420+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:41:20.4180699+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 1380.3556 ms
2025-06-07T10:41:20.4255287+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUC"" received FIN.
2025-06-07T10:41:20.4258585+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUC"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:41:20.4290099+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUC"" disconnecting.
2025-06-07T10:41:20.4324118+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:41:20.4383163+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:41:20.4408105+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T10:41:20.4431141+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 1487.6364ms
2025-06-07T10:41:20.4477666+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUC"" stopped.
2025-06-07T10:41:23.0186479+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"" accepted.
2025-06-07T10:41:23.0188712+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"" started.
2025-06-07T10:41:23.0199743+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 68
2025-06-07T10:41:23.0210572+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:41:23.0212896+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:41:23.0214199+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:41:23.0216675+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:41:23.0223478+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:41:23.0225319+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:41:23.0228730+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:41:23.0264388+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"", Request id ""0HND5EKKUHDUD:00000001"": started reading request body.
2025-06-07T10:41:23.0267339+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"", Request id ""0HND5EKKUHDUD:00000001"": done reading request body.
2025-06-07T10:41:23.0357559+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:41:23.0366802+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Microsoft.AspNetCore.Http.BadHttpRequestException: Failed to read parameter "List<DeleteTuitionPaymentRequest> request" from the request body as JSON.
 ---> System.Text.Json.JsonException: The JSON value could not be converted to System.DateTime. Path: $[0].paymentDate | LineNumber: 0 | BytePositionInLine: 66.
 ---> System.FormatException: The JSON value is not in a supported DateTime format.
   at System.Text.Json.ThrowHelper.ThrowFormatException(DataType dataType)
   at System.Text.Json.Utf8JsonReader.GetDateTime()
   at System.Text.Json.Serialization.Converters.DateTimeConverter.Read(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options)
   at System.Text.Json.Serialization.Metadata.JsonPropertyInfo`1.ReadJsonAndSetMember(Object obj, ReadStack& state, Utf8JsonReader& reader)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonCollectionConverter`2.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, TCollection& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   --- End of inner exception stack trace ---
   at System.Text.Json.ThrowHelper.ReThrowWithPath(ReadStack& state, Utf8JsonReader& reader, Exception ex)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, T& value, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack, T& value)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsObjectAsync(Stream utf8Json, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.HttpRequestJsonExtensions.ReadFromJsonAsync(HttpRequest request, JsonTypeInfo jsonTypeInfo, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.Log.InvalidJsonRequestBody(HttpContext httpContext, String parameterTypeName, String parameterName, Exception exception, Boolean shouldThrow)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<HandleRequestBodyAndCompileRequestDelegateForJson>g__TryReadBodyAsync|101_0(HttpContext httpContext, Type bodyType, String parameterTypeName, String parameterName, Boolean allowEmptyRequestBody, Boolean throwOnBadRequest, JsonTypeInfo jsonTypeInfo)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T10:41:23.0761952+07:00 [ERR] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 54.3067 ms
2025-06-07T10:41:23.0765383+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 56.5502ms
2025-06-07T10:41:23.0766907+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"" disconnecting.
2025-06-07T10:41:23.0767439+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"" stopped.
2025-06-07T10:41:23.0767295+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"" received FIN.
2025-06-07T10:41:23.0768593+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUD"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:43:02.8570257+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUE"" accepted.
2025-06-07T10:43:02.8573567+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUE"" started.
2025-06-07T10:43:02.8575948+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:43:02.8577737+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:43:02.8578402+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:43:02.8578948+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:02.8580358+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:43:02.8581503+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:02.8994788+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:43:02.9022449+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T10:43:02.9762292+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:43:02.9868336+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:43:02.9869739+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:43:02.9870259+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:02.9874394+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:02.9876502+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:43:02.9876969+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:02.9877467+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:02.9880335+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:43:02.9918228+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:43:02.9987347+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:02.9989183+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 6ms reading results.
2025-06-07T10:43:02.9991146+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:02.9991836+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:02.9994167+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:43:03.0003717+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:43:03.0033917+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:03.0035944+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 145.4792 ms
2025-06-07T10:43:03.0037224+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:43:03.0038058+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:03.0038519+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:03.0039227+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 146.322ms
2025-06-07T10:43:03.0039972+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUE"" disconnecting.
2025-06-07T10:43:03.0040381+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUE"" stopped.
2025-06-07T10:43:03.0040441+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUE"" received FIN.
2025-06-07T10:43:03.0040792+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:43:15.3575236+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUF"" accepted.
2025-06-07T10:43:15.3576013+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUF"" started.
2025-06-07T10:43:15.3578078+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:43:15.3579612+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:43:15.3580126+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:43:15.3580539+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:15.3581837+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:43:15.3582555+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:15.3995875+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:43:15.4033952+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:43:15.4034638+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:43:15.4034872+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:15.4035293+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:15.4036447+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:43:15.4036683+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:15.4037185+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:15.4037628+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:43:15.4052208+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:43:15.4054585+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:15.4055467+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:43:15.4056136+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:15.4056547+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:15.4057553+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:43:15.4057882+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:43:15.4059230+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:15.4060096+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 47.7821 ms
2025-06-07T10:43:15.4060770+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:43:15.4061087+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:15.4061300+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:15.4061840+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 48.3664ms
2025-06-07T10:43:15.4062290+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUF"" disconnecting.
2025-06-07T10:43:15.4063223+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUF"" stopped.
2025-06-07T10:43:15.4063453+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUF"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:43:24.8887250+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"" accepted.
2025-06-07T10:43:24.8888208+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"" started.
2025-06-07T10:43:24.8891270+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T10:43:24.8893062+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:43:24.8893467+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:43:24.8893820+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:43:24.8894702+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:43:24.8895892+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:43:24.8896044+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:43:24.8896545+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:43:24.8897567+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"", Request id ""0HND5EKKUHDUG:00000001"": started reading request body.
2025-06-07T10:43:24.8898191+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"", Request id ""0HND5EKKUHDUG:00000001"": done reading request body.
2025-06-07T10:43:24.8947752+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:43:24.9025854+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:43:24.9027229+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:43:24.9027649+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:24.9028174+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:24.9050542+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:43:24.9091084+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:43:24.9165273+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __paymentDates_3.Contains(p.PaymentDate))
    .ExecuteDelete()"'
2025-06-07T10:43:24.9519654+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:43:24.9579337+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T10:43:24.9580220+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:43:24.9598129+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (1ms).
2025-06-07T10:43:24.9619471+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/05/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:43:25.0337989+07:00 [INF] (///) Executed DbCommand ("73"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/05/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:43:25.0374256+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:43:25.0428872+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:43:25.0449864+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0454925+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:25.0474873+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:43:25.0478275+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:43:25.0481421+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T10:43:25.0513645+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:43:25.0515248+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 161.9779 ms
2025-06-07T10:43:25.0516204+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:43:25.0516750+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0517192+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:25.0517899+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 162.7106ms
2025-06-07T10:43:25.0518557+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"" disconnecting.
2025-06-07T10:43:25.0518543+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"" received FIN.
2025-06-07T10:43:25.0518804+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"" stopped.
2025-06-07T10:43:25.0519082+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUG"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:43:25.0584869+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUH"" accepted.
2025-06-07T10:43:25.0585506+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUH"" started.
2025-06-07T10:43:25.0587851+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:43:25.0589003+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:43:25.0589404+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:43:25.0589780+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:25.0590585+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:43:25.0590964+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:25.0597543+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:43:25.0601018+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:43:25.0601486+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:43:25.0601758+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0602468+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0604652+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:43:25.0604960+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:25.0605762+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:25.0606415+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:43:25.0621341+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:43:25.0624097+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0624860+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:43:25.0625719+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0626127+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:25.0627098+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:43:25.0627480+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:43:25.0629019+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:43:25.0629879+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.8816 ms
2025-06-07T10:43:25.0630615+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:43:25.0630975+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0631208+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:25.0631791+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.3807ms
2025-06-07T10:43:25.0632261+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUH"" disconnecting.
2025-06-07T10:43:25.0632444+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUH"" stopped.
2025-06-07T10:43:25.0632711+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUH"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:43:25.0718596+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUI"" accepted.
2025-06-07T10:43:25.0719330+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUI"" started.
2025-06-07T10:43:25.0721335+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:43:25.0723087+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:43:25.0723506+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:43:25.0723827+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:43:25.0724581+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:43:25.0724941+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:43:25.0731592+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:43:25.0735929+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:43:25.0736319+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:43:25.0736520+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0736880+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0738227+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:43:25.0738515+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:25.0738848+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:43:25.0739297+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:43:25.0751684+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:43:25.0754785+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0755349+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:43:25.0756322+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0756759+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:25.0758165+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:43:25.0758596+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:43:25.0760137+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:43:25.0761198+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.6093 ms
2025-06-07T10:43:25.0762181+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:43:25.0762723+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:43:25.0764350+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:43:25.0765222+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 4.354ms
2025-06-07T10:43:25.0765911+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUI"" disconnecting.
2025-06-07T10:43:25.0766192+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUI"" stopped.
2025-06-07T10:43:25.0766503+07:00 [DBG] (///) Connection id ""0HND5EKKUHDUI"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:43:52.7235953+07:00 [INF] (///) Application is shutting down...
2025-06-07T10:43:52.7243293+07:00 [DBG] (///) Hosting stopping
2025-06-07T10:43:52.7302880+07:00 [DBG] (///) Hosting stopped
2025-06-07T10:43:54.0478146+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:43:54.1230636+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:43:54.1273270+07:00 [DBG] (///) Hosting starting
2025-06-07T10:43:54.2814241+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:43:54.2818470+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:43:54.3427331+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:43:54.3440787+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:43:54.3498527+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:43:54.3505448+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:43:54.3506744+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:43:54.3508516+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:43:54.3508989+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:43:54.3509161+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:43:54.3509517+07:00 [DBG] (///) Hosting started
2025-06-07T10:44:29.6805163+07:00 [DBG] (///) Connection id ""0HND5EMDPK63G"" accepted.
2025-06-07T10:44:29.6816717+07:00 [DBG] (///) Connection id ""0HND5EMDPK63G"" started.
2025-06-07T10:44:29.7165276+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:44:29.8562637+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:44:29.8623269+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:44:29.8672175+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:44:29.8748808+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:44:29.8761406+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:44:30.0723452+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:44:30.5259589+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:44:30.5262782+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:44:30.5942712+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:44:30.6189807+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:44:30.7093632+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:44:30.7563664+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T10:44:31.0307214+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:44:31.0708720+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:44:31.1015256+07:00 [DBG] (///) Created DbConnection. (28ms).
2025-06-07T10:44:31.1045490+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:31.1844336+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:31.1911532+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:44:31.1970759+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (2ms).
2025-06-07T10:44:31.2038520+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (12ms).
2025-06-07T10:44:31.2118901+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:44:31.2864611+07:00 [INF] (///) Executed DbCommand ("71"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:44:31.3216711+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:31.3313097+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 37ms reading results.
2025-06-07T10:44:31.3370294+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:31.3427352+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (5ms).
2025-06-07T10:44:31.3447309+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:44:31.3505862+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:44:31.3699513+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:44:31.3797927+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 1501.4951 ms
2025-06-07T10:44:31.3877216+07:00 [DBG] (///) Connection id ""0HND5EMDPK63G"" received FIN.
2025-06-07T10:44:31.3882187+07:00 [DBG] (///) Connection id ""0HND5EMDPK63G"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:44:31.3923719+07:00 [DBG] (///) Connection id ""0HND5EMDPK63G"" disconnecting.
2025-06-07T10:44:31.3939173+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:44:31.3991148+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:31.4016878+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T10:44:31.4036267+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 1689.3528ms
2025-06-07T10:44:31.4075916+07:00 [DBG] (///) Connection id ""0HND5EMDPK63G"" stopped.
2025-06-07T10:44:32.5953860+07:00 [DBG] (///) Connection id ""0HND5EMDPK63H"" accepted.
2025-06-07T10:44:32.5956419+07:00 [DBG] (///) Connection id ""0HND5EMDPK63H"" started.
2025-06-07T10:44:32.5961780+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:44:32.5973690+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:44:32.5975442+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:44:32.5977026+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:32.5979486+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:44:32.5980473+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:32.6280439+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:44:32.6312128+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T10:44:32.6405019+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:44:32.6421949+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:44:32.6423034+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:44:32.6423483+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:32.6427607+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:32.6429834+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:44:32.6430384+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:44:32.6430904+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:44:32.6433252+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:44:32.6475389+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:44:32.6508140+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:32.6509256+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 3ms reading results.
2025-06-07T10:44:32.6510455+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:32.6511059+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:32.6513060+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:44:32.6520517+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:44:32.6531310+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:32.6533678+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 55.2819 ms
2025-06-07T10:44:32.6536296+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:44:32.6537210+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:32.6539013+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:32.6542261+07:00 [DBG] (///) Connection id ""0HND5EMDPK63H"" received FIN.
2025-06-07T10:44:32.6541997+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 57.9523ms
2025-06-07T10:44:32.6543167+07:00 [DBG] (///) Connection id ""0HND5EMDPK63H"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:44:32.6544932+07:00 [DBG] (///) Connection id ""0HND5EMDPK63H"" disconnecting.
2025-06-07T10:44:32.6557235+07:00 [DBG] (///) Connection id ""0HND5EMDPK63H"" stopped.
2025-06-07T10:44:36.0037133+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"" accepted.
2025-06-07T10:44:36.0038582+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"" started.
2025-06-07T10:44:36.0046030+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T10:44:36.0048053+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:44:36.0048518+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:44:36.0048954+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:36.0050071+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:44:36.0055522+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:44:36.0056972+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:44:36.0060216+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:36.0092833+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"", Request id ""0HND5EMDPK63I:00000001"": started reading request body.
2025-06-07T10:44:36.0094013+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"", Request id ""0HND5EMDPK63I:00000001"": done reading request body.
2025-06-07T10:44:36.0568392+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:44:36.0637978+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:44:36.0638926+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:44:36.0639254+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.0639844+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.0655885+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:44:36.0691246+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:44:36.0765335+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __paymentDates_3.Contains(p.PaymentDate))
    .ExecuteDelete()"'
2025-06-07T10:44:36.1112156+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T10:44:36.1170596+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T10:44:36.1171413+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T10:44:36.1187776+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (1ms).
2025-06-07T10:44:36.1204443+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/05/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:44:36.1840930+07:00 [INF] (///) Executed DbCommand ("65"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '07/05/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T10:44:36.1871257+07:00 [DBG] (///) Committing transaction.
2025-06-07T10:44:36.1912432+07:00 [DBG] (///) Committed transaction.
2025-06-07T10:44:36.1926144+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.1929457+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:36.1947059+07:00 [DBG] (///) Disposing transaction.
2025-06-07T10:44:36.1950067+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:44:36.1954151+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T10:44:36.1983302+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:36.1985008+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 193.3759 ms
2025-06-07T10:44:36.1985940+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:44:36.1986463+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.1986823+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:36.1987481+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 194.1383ms
2025-06-07T10:44:36.1988411+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"" disconnecting.
2025-06-07T10:44:36.1988895+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"" stopped.
2025-06-07T10:44:36.1989008+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"" received FIN.
2025-06-07T10:44:36.1989333+07:00 [DBG] (///) Connection id ""0HND5EMDPK63I"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:44:36.2063942+07:00 [DBG] (///) Connection id ""0HND5EMDPK63J"" accepted.
2025-06-07T10:44:36.2065307+07:00 [DBG] (///) Connection id ""0HND5EMDPK63J"" started.
2025-06-07T10:44:36.2067375+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:44:36.2068737+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:44:36.2069227+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:44:36.2069704+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:44:36.2070846+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:44:36.2071342+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:44:36.2084553+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:44:36.2130388+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:44:36.2131345+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:44:36.2131687+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2132125+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2133988+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:44:36.2134283+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:44:36.2134590+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:44:36.2135035+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:44:36.2150475+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:44:36.2153679+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2154659+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:44:36.2155774+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2156244+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:36.2158076+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:44:36.2158703+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:44:36.2160580+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:44:36.2161562+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 9.0161 ms
2025-06-07T10:44:36.2162315+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:44:36.2162831+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2163114+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:36.2163594+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 9.6162ms
2025-06-07T10:44:36.2164080+07:00 [DBG] (///) Connection id ""0HND5EMDPK63J"" disconnecting.
2025-06-07T10:44:36.2164275+07:00 [DBG] (///) Connection id ""0HND5EMDPK63J"" stopped.
2025-06-07T10:44:36.2164569+07:00 [DBG] (///) Connection id ""0HND5EMDPK63J"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:44:36.2235896+07:00 [DBG] (///) Connection id ""0HND5EMDPK63K"" accepted.
2025-06-07T10:44:36.2236606+07:00 [DBG] (///) Connection id ""0HND5EMDPK63K"" started.
2025-06-07T10:44:36.2239164+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T10:44:36.2242028+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:44:36.2242806+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:44:36.2243485+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:36.2244813+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:44:36.2245495+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:36.2255817+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:44:36.2259226+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:44:36.2259586+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:44:36.2259834+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2260257+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2261560+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:44:36.2261874+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:44:36.2262231+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:44:36.2263004+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:44:36.2274422+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T10:44:36.2276247+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2276654+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T10:44:36.2277533+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2277889+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:36.2278865+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:44:36.2279256+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T10:44:36.2280890+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:44:36.2281944+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.6570 ms
2025-06-07T10:44:36.2282720+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:44:36.2283037+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:44:36.2283283+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:44:36.2283772+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 4.4654ms
2025-06-07T10:44:36.2284291+07:00 [DBG] (///) Connection id ""0HND5EMDPK63K"" disconnecting.
2025-06-07T10:44:36.2284491+07:00 [DBG] (///) Connection id ""0HND5EMDPK63K"" stopped.
2025-06-07T10:44:36.2284843+07:00 [DBG] (///) Connection id ""0HND5EMDPK63K"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:45:40.3942006+07:00 [INF] (///) Application is shutting down...
2025-06-07T10:45:40.3952152+07:00 [DBG] (///) Hosting stopping
2025-06-07T10:45:40.4014389+07:00 [DBG] (///) Hosting stopped
2025-06-07T10:45:43.3821781+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:45:43.5081759+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:45:43.5128726+07:00 [DBG] (///) Hosting starting
2025-06-07T10:45:43.7022664+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:45:43.7028196+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:45:43.7868603+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:45:43.7889450+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:45:43.8012333+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:45:43.8018667+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:45:43.8019726+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:45:43.8022900+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:45:43.8023385+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:45:43.8023585+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:45:43.8023979+07:00 [DBG] (///) Hosting started
2025-06-07T10:45:48.3135875+07:00 [DBG] (///) Connection id ""0HND5EN57H2HC"" accepted.
2025-06-07T10:45:48.3145781+07:00 [DBG] (///) Connection id ""0HND5EN57H2HC"" started.
2025-06-07T10:45:48.3406424+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T10:45:48.4065892+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:45:48.4106380+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T10:45:48.4135549+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:45:48.4207193+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:45:48.4217720+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:45:48.4219236+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:45:48.4230943+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:45:48.4300768+07:00 [DBG] (///) Connection id ""0HND5EN57H2HC"", Request id ""0HND5EN57H2HC:00000001"": started reading request body.
2025-06-07T10:45:48.4303626+07:00 [DBG] (///) Connection id ""0HND5EN57H2HC"", Request id ""0HND5EN57H2HC:00000001"": done reading request body.
2025-06-07T10:45:48.6571308+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:45:49.2081121+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:45:49.2084380+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:45:49.2883441+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:45:49.3144899+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:45:49.4426743+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:45:49.4591264+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:45:49.5009054+07:00 [DBG] (///) Created DbConnection. (39ms).
2025-06-07T10:45:49.5047126+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:45:49.6043026+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:45:49.6148166+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:45:49.6234828+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:49:10.2777356+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T10:49:10.4047076+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T10:49:10.4099208+07:00 [DBG] (///) Hosting starting
2025-06-07T10:49:10.6049035+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T10:49:10.6057722+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T10:49:10.6915659+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T10:49:10.6935362+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T10:49:10.7038655+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T10:49:10.7044727+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T10:49:10.7045786+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T10:49:10.7048748+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T10:49:10.7049239+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T10:49:10.7049497+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T10:49:10.7049984+07:00 [DBG] (///) Hosting started
2025-06-07T10:49:20.1052497+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"" accepted.
2025-06-07T10:49:20.1059838+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"" started.
2025-06-07T10:49:20.1320951+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 89
2025-06-07T10:49:20.1959633+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T10:49:20.2005806+07:00 [DBG] (///) Endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T10:49:20.2039146+07:00 [DBG] (///) Request matched endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T10:49:20.2106543+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:49:20.2116846+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:49:20.2118436+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:49:20.2129772+07:00 [INF] (///) Executing endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T10:49:20.2200802+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"", Request id ""0HND5EP4BAC7K:00000001"": started reading request body.
2025-06-07T10:49:20.2204946+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"", Request id ""0HND5EP4BAC7K:00000001"": done reading request body.
2025-06-07T10:49:20.4585131+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T10:49:21.0059594+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T10:49:21.0065883+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T10:49:21.0853863+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T10:49:21.1106308+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T10:49:21.2412892+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:49:21.3438306+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 1}"'.
2025-06-07T10:49:21.3481447+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T10:49:21.3544505+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T10:49:21.3637447+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T10:49:21.5123856+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:49:21.5568365+07:00 [DBG] (///) Created DbConnection. (41ms).
2025-06-07T10:49:21.5605948+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:21.6645060+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:21.6794576+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:49:21.6882323+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (4ms).
2025-06-07T10:49:21.6989103+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (19ms).
2025-06-07T10:49:21.7099249+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='1', @p2='N22DCCN888' (Nullable = false), @p3='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T10:49:21.8147194+07:00 [INF] (///) Executed DbCommand ("104"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='1', @p2='N22DCCN888' (Nullable = false), @p3='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T10:49:21.8250103+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:21.8322689+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 10ms reading results.
2025-06-07T10:49:21.8386399+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:21.8439917+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (5ms).
2025-06-07T10:49:21.8550108+07:00 [DBG] (///) The '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 1}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T10:49:21.8575828+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T10:49:21.8601695+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:49:21.8618194+07:00 [INF] (///) Executed endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T10:49:21.8747038+07:00 [INF] (///) HTTP "POST" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 1657.4367 ms
2025-06-07T10:49:21.9046183+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"" received FIN.
2025-06-07T10:49:21.9058799+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:49:21.9104335+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7L"" accepted.
2025-06-07T10:49:21.9106271+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"" disconnecting.
2025-06-07T10:49:21.9106641+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7L"" started.
2025-06-07T10:49:21.9131442+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T10:49:21.9139189+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:49:21.9140895+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T10:49:21.9142114+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:49:21.9144579+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:49:21.9145540+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:49:21.9150184+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:49:21.9209261+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:21.9280805+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T10:49:21.9307048+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 0 null 1799.5927ms
2025-06-07T10:49:21.9364506+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7K"" stopped.
2025-06-07T10:49:21.9446698+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:49:22.0039585+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T10:49:22.3020301+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T10:49:22.3427954+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:49:22.3429454+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:49:22.3429899+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:22.3435210+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:22.3437100+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T10:49:22.3437887+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:49:22.3438419+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T10:49:22.3439061+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:49:22.3534148+07:00 [INF] (///) Executed DbCommand ("9"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T10:49:22.3785976+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:22.3804852+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 26ms reading results.
2025-06-07T10:49:22.3806586+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:22.3807932+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:49:22.3813191+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T10:49:22.3873768+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T10:49:22.3967893+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T10:49:22.3971155+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 482.4766 ms
2025-06-07T10:49:22.3974524+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T10:49:22.3975520+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:22.3976259+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T10:49:22.3977666+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 484.6474ms
2025-06-07T10:49:22.3978944+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7L"" disconnecting.
2025-06-07T10:49:22.3979617+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7L"" stopped.
2025-06-07T10:49:22.3980351+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7L"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T10:49:33.8172441+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7M"" accepted.
2025-06-07T10:49:33.8176393+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7M"" started.
2025-06-07T10:49:33.8178706+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments""" - "application/json" 58
2025-06-07T10:49:33.8180138+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments"'
2025-06-07T10:49:33.8180647+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments"'
2025-06-07T10:49:33.8181161+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:49:33.8182492+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T10:49:33.8184003+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T10:49:33.8184330+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T10:49:33.8184882+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T10:49:33.8186709+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7M"", Request id ""0HND5EP4BAC7M:00000001"": started reading request body.
2025-06-07T10:49:33.8187571+07:00 [DBG] (///) Connection id ""0HND5EP4BAC7M"", Request id ""0HND5EP4BAC7M:00000001"": done reading request body.
2025-06-07T10:49:33.8313787+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T10:49:33.8421128+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T10:49:33.8422555+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T10:49:33.8422858+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:33.8423349+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T10:49:33.8442074+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T10:49:33.8490030+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T11:09:13.0731734+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T11:09:13.1463488+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T11:09:13.1504268+07:00 [DBG] (///) Hosting starting
2025-06-07T11:09:13.3027435+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T11:09:13.3031754+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T11:09:13.3988525+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T11:09:13.4001508+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T11:09:13.4061773+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T11:09:13.4068443+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T11:09:13.4069411+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T11:09:13.4071108+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T11:09:13.4071563+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T11:09:13.4071766+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T11:09:13.4072208+07:00 [DBG] (///) Hosting started
2025-06-07T11:09:38.9466704+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"" accepted.
2025-06-07T11:09:38.9475118+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"" started.
2025-06-07T11:09:38.9661324+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 58
2025-06-07T11:09:39.0277997+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T11:09:39.0311088+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T11:09:39.0345622+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:09:39.0401567+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T11:09:39.0410101+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T11:09:39.0412439+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T11:09:39.0422321+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:09:39.0479835+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"", Request id ""0HND5F4FJ3LTM:00000001"": started reading request body.
2025-06-07T11:09:39.0481888+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"", Request id ""0HND5F4FJ3LTM:00000001"": done reading request body.
2025-06-07T11:09:39.1841017+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T11:09:39.5859259+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T11:09:39.5862730+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T11:09:39.6551067+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T11:09:39.6758421+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T11:09:39.7691436+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T11:09:39.7795764+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T11:09:39.8116082+07:00 [DBG] (///) Created DbConnection. (30ms).
2025-06-07T11:09:39.8147182+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:09:39.8971895+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:09:39.9044912+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T11:09:39.9107884+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T11:09:39.9153083+07:00 [DBG] (///) Rolling back transaction.
2025-06-07T11:09:39.9216028+07:00 [DBG] (///) Rolled back transaction.
2025-06-07T11:09:39.9242899+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:09:39.9296021+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T11:09:39.9314546+07:00 [DBG] (///) Disposing transaction.
2025-06-07T11:09:39.9328537+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:09:39.9341452+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 288
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 354
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 355
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T11:09:39.9890843+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 946.1484 ms
2025-06-07T11:09:39.9992442+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"" received FIN.
2025-06-07T11:09:39.9996074+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T11:09:40.0030389+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"" disconnecting.
2025-06-07T11:09:40.0041896+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T11:09:40.0087240+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:09:40.0118021+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T11:09:40.0132825+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 1048.2157ms
2025-06-07T11:09:40.0169537+07:00 [DBG] (///) Connection id ""0HND5F4FJ3LTM"" stopped.
2025-06-07T11:10:47.6630725+07:00 [INF] (///) Application is shutting down...
2025-06-07T11:10:47.6637384+07:00 [DBG] (///) Hosting stopping
2025-06-07T11:10:47.6700146+07:00 [DBG] (///) Hosting stopped
2025-06-07T11:10:48.9313762+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T11:10:49.0135267+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T11:10:49.0180757+07:00 [DBG] (///) Hosting starting
2025-06-07T11:10:49.1697694+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T11:10:49.1702066+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T11:10:49.2309846+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T11:10:49.2322880+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T11:10:49.2384410+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T11:10:49.2388871+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T11:10:49.2389814+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T11:10:49.2391668+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T11:10:49.2392108+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T11:10:49.2392356+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T11:10:49.2392939+07:00 [DBG] (///) Hosting started
2025-06-07T11:11:08.1245266+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"" accepted.
2025-06-07T11:11:08.1256462+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"" started.
2025-06-07T11:11:08.1446319+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 58
2025-06-07T11:11:08.2077591+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T11:11:08.2110978+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T11:11:08.2144279+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:11:08.2199525+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T11:11:08.2207312+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T11:11:08.2209402+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T11:11:08.2217308+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:11:08.2273126+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"", Request id ""0HND5F5A5IJKE:00000001"": started reading request body.
2025-06-07T11:11:08.2274937+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"", Request id ""0HND5F5A5IJKE:00000001"": done reading request body.
2025-06-07T11:11:08.3577588+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T11:11:08.7711096+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T11:11:08.7714526+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T11:11:08.8407934+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T11:11:08.8617270+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T11:11:08.9585834+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T11:11:08.9684305+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T11:11:08.9993065+07:00 [DBG] (///) Created DbConnection. (29ms).
2025-06-07T11:11:09.0026196+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:11:09.0826085+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:11:09.0892477+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T11:11:09.0952847+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T11:11:09.0999161+07:00 [DBG] (///) Rolling back transaction.
2025-06-07T11:11:09.1052824+07:00 [DBG] (///) Rolled back transaction.
2025-06-07T11:11:09.1079301+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:11:09.1130490+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T11:11:09.1149082+07:00 [DBG] (///) Disposing transaction.
2025-06-07T11:11:09.1163747+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:11:09.1178072+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 288
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 354
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 355
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T11:11:09.1724258+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 949.8955 ms
2025-06-07T11:11:09.1820893+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"" received FIN.
2025-06-07T11:11:09.1824273+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T11:11:09.1857694+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"" disconnecting.
2025-06-07T11:11:09.1873123+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T11:11:09.1916661+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:11:09.1935200+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (1ms).
2025-06-07T11:11:09.1949530+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 1051.3926ms
2025-06-07T11:11:09.1985514+07:00 [DBG] (///) Connection id ""0HND5F5A5IJKE"" stopped.
2025-06-07T11:12:04.6146228+07:00 [INF] (///) Application is shutting down...
2025-06-07T11:12:04.6153599+07:00 [DBG] (///) Hosting stopping
2025-06-07T11:12:04.6218358+07:00 [DBG] (///) Hosting stopped
2025-06-07T11:12:07.5423477+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T11:12:07.6655652+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T11:12:07.6703364+07:00 [DBG] (///) Hosting starting
2025-06-07T11:12:07.8539672+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T11:12:07.8545190+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T11:12:07.9566516+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T11:12:07.9585105+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T11:12:07.9695788+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T11:12:07.9701914+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T11:12:07.9703004+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T11:12:07.9705672+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T11:12:07.9706120+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T11:12:07.9706328+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T11:12:07.9706790+07:00 [DBG] (///) Hosting started
2025-06-07T11:12:18.6421256+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"" accepted.
2025-06-07T11:12:18.6427272+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"" started.
2025-06-07T11:12:18.6721050+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 58
2025-06-07T11:12:18.7714286+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T11:12:18.7778657+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T11:12:18.7827187+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:12:18.7999087+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T11:12:18.8022391+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T11:12:18.8026753+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T11:12:18.8053723+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:12:18.8169854+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"", Request id ""0HND5F5V62P9J:00000001"": started reading request body.
2025-06-07T11:12:18.8174195+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"", Request id ""0HND5F5V62P9J:00000001"": done reading request body.
2025-06-07T11:12:19.0583541+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T11:12:19.6229667+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T11:12:19.6236419+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T11:12:19.7057972+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T11:12:19.7319754+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T11:12:19.8626554+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T11:12:19.8774644+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T11:12:19.9198096+07:00 [DBG] (///) Created DbConnection. (40ms).
2025-06-07T11:12:19.9236570+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:12:20.0186645+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:12:20.0286659+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T11:12:20.0371997+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T11:12:20.1510792+07:00 [DBG] (///) Rolling back transaction.
2025-06-07T11:12:20.1623694+07:00 [DBG] (///) Rolled back transaction.
2025-06-07T11:12:20.1664855+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:12:20.1739453+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (4ms).
2025-06-07T11:12:20.1917866+07:00 [DBG] (///) Disposing transaction.
2025-06-07T11:12:20.2114556+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T11:12:20.2136373+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 288
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 354
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_16>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 355
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T11:12:20.3020883+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 1501.1692 ms
2025-06-07T11:12:20.3141410+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"" received FIN.
2025-06-07T11:12:20.3149966+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T11:12:20.3193441+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"" disconnecting.
2025-06-07T11:12:20.3221649+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T11:12:20.3278569+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T11:12:20.3302277+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T11:12:20.3327087+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 1661.58ms
2025-06-07T11:12:20.3384636+07:00 [DBG] (///) Connection id ""0HND5F5V62P9J"" stopped.
2025-06-07T12:45:12.8544939+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T12:45:12.9179367+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T12:45:12.9215940+07:00 [DBG] (///) Hosting starting
2025-06-07T12:45:13.0532539+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T12:45:13.0535979+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T12:45:13.1045148+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T12:45:13.1056079+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T12:45:13.1102328+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T12:45:13.1106777+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T12:45:13.1108051+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T12:45:13.1109914+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T12:45:13.1110385+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T12:45:13.1110632+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T12:45:13.1111028+07:00 [DBG] (///) Hosting started
2025-06-07T12:48:58.8662304+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGR"" accepted.
2025-06-07T12:48:58.8672896+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGR"" started.
2025-06-07T12:48:58.8918440+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T12:48:58.9437069+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T12:48:58.9473410+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T12:48:58.9502935+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T12:48:58.9544516+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T12:48:58.9550184+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T12:48:59.0732139+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T12:48:59.3824338+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T12:48:59.3826861+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T12:48:59.4355567+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T12:48:59.4533008+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T12:48:59.5245103+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T12:48:59.5603049+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Count()"'
2025-06-07T12:48:59.7029396+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T12:48:59.7270700+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T12:48:59.7519176+07:00 [DBG] (///) Created DbConnection. (22ms).
2025-06-07T12:48:59.7546562+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.8382453+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.8429645+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:48:59.8491055+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T12:48:59.8501176+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (7ms).
2025-06-07T12:48:59.8549561+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T12:48:59.8821459+07:00 [INF] (///) Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T12:48:59.9126752+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.9185068+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 31ms reading results.
2025-06-07T12:48:59.9217120+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.9264915+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (4ms).
2025-06-07T12:48:59.9308820+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-07T12:48:59.9370602+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T12:48:59.9377010+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T12:48:59.9469338+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<StudentBasicInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        string value2;
        string value3;
        string value4;
        string value5;
        value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
        value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
        value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
        value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
        return new StudentBasicInfo{ 
            StudentCode = value1, 
            LastName = value2, 
            FirstName = value3, 
            ClassCode = value4, 
            FacultyCode = value5 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T12:48:59.9536035+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.9540333+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.9542353+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:48:59.9542901+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:48:59.9579370+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T12:48:59.9598060+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T12:48:59.9687183+07:00 [INF] (///) Executed DbCommand ("11"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T12:48:59.9727289+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.9728831+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 3ms reading results.
2025-06-07T12:48:59.9730240+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:48:59.9730875+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:48:59.9744162+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T12:48:59.9799822+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T12:48:59.9935840+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T12:48:59.9995696+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 1042.8122 ms
2025-06-07T12:49:00.0047557+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGR"" received FIN.
2025-06-07T12:49:00.0051083+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGR"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T12:49:00.0054085+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGR"" disconnecting.
2025-06-07T12:49:00.0094068+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T12:49:00.0135489+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:00.0153326+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (1ms).
2025-06-07T12:49:00.0170823+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 1126.1895ms
2025-06-07T12:49:00.0201389+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGR"" stopped.
2025-06-07T12:49:02.3505507+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGS"" accepted.
2025-06-07T12:49:02.3508237+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGS"" started.
2025-06-07T12:49:02.3513595+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T12:49:02.3528848+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T12:49:02.3533070+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T12:49:02.3535450+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T12:49:02.3538942+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T12:49:02.3540232+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T12:49:02.3797004+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T12:49:02.3920772+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T12:49:02.4689508+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T12:49:02.4790404+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T12:49:02.4792518+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T12:49:02.4793090+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.4793903+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.4795725+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:49:02.4796250+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:02.4800857+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:02.4802349+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T12:49:02.4943104+07:00 [INF] (///) Executed DbCommand ("14"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T12:49:02.5019873+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5021383+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 7ms reading results.
2025-06-07T12:49:02.5023073+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5023696+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:02.5025819+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T12:49:02.5061073+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T12:49:02.5098182+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T12:49:02.5101208+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 156.0533 ms
2025-06-07T12:49:02.5103884+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T12:49:02.5105063+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5106863+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:02.5108344+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 159.4523ms
2025-06-07T12:49:02.5109021+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGS"" received FIN.
2025-06-07T12:49:02.5109913+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGS"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T12:49:02.5110922+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGS"" disconnecting.
2025-06-07T12:49:02.5123677+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGS"" stopped.
2025-06-07T12:49:02.5164254+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGT"" accepted.
2025-06-07T12:49:02.5165450+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGT"" started.
2025-06-07T12:49:02.5167864+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T12:49:02.5170130+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T12:49:02.5171055+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T12:49:02.5171837+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T12:49:02.5173126+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T12:49:02.5173868+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T12:49:02.5500617+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T12:49:02.5527609+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T12:49:02.5528846+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T12:49:02.5529356+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5529923+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5531303+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:49:02.5531764+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:02.5532342+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:02.5533143+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T12:49:02.5546114+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T12:49:02.5549291+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5550239+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T12:49:02.5551338+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5551971+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:02.5553566+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T12:49:02.5554220+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T12:49:02.5556546+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T12:49:02.5557778+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 38.3975 ms
2025-06-07T12:49:02.5558759+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T12:49:02.5559277+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:02.5559688+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:02.5560380+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 39.2468ms
2025-06-07T12:49:02.5561107+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGT"" disconnecting.
2025-06-07T12:49:02.5561461+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGT"" stopped.
2025-06-07T12:49:02.5562337+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGT"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T12:49:03.9588380+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGU"" accepted.
2025-06-07T12:49:03.9589172+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGU"" started.
2025-06-07T12:49:03.9591309+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T12:49:03.9594442+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:49:03.9594869+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:49:03.9595767+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:49:03.9596780+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T12:49:03.9597146+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:49:03.9615965+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T12:49:03.9627886+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(\"dd/mm/yyyy\"), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T12:49:03.9698545+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(\"dd/mm/yyyy\"), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T12:49:03.9708955+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T12:49:03.9709562+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T12:49:03.9709792+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:03.9710150+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:03.9711144+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:49:03.9711351+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:03.9711749+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:03.9712258+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:49:03.9721838+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:49:03.9785957+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"TuitionService.Domain.TuitionDbContext"'."
""System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method473(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method473(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-07T12:49:03.9897836+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:03.9906698+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 18ms reading results.
2025-06-07T12:49:03.9907786+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:03.9908301+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:03.9910019+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:49:03.9916834+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method473(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 230
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T12:49:04.0148435+07:00 [ERR] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 55.0553 ms
2025-06-07T12:49:04.0150380+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T12:49:04.0151366+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:04.0151876+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:04.0152847+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 56.1196ms
2025-06-07T12:49:04.0153572+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGU"" disconnecting.
2025-06-07T12:49:04.0154062+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGU"" stopped.
2025-06-07T12:49:04.0154506+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGU"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T12:49:09.4113394+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGV"" accepted.
2025-06-07T12:49:09.4114021+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGV"" started.
2025-06-07T12:49:09.4116085+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T12:49:09.4118122+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:49:09.4118832+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:49:09.4119191+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:49:09.4120017+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T12:49:09.4120448+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:49:09.4126218+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T12:49:09.4131158+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T12:49:09.4131484+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T12:49:09.4131710+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:09.4132094+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:09.4133090+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:49:09.4133314+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:09.4133606+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T12:49:09.4133992+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:49:09.4142923+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:49:09.4146482+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"TuitionService.Domain.TuitionDbContext"'."
""System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method473(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method473(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-07T12:49:09.4155601+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:09.4156355+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T12:49:09.4157532+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:09.4157988+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:09.4159400+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:49:09.4159934+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method473(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 230
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T12:49:09.4187286+07:00 [ERR] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 6.6713 ms
2025-06-07T12:49:09.4188993+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T12:49:09.4189480+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:49:09.4189832+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T12:49:09.4190732+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 7.416ms
2025-06-07T12:49:09.4191209+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGV"" disconnecting.
2025-06-07T12:49:09.4191404+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGV"" stopped.
2025-06-07T12:49:09.4191742+07:00 [DBG] (///) Connection id ""0HND5GRVPAPGV"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T12:49:37.0381126+07:00 [INF] (///) Application is shutting down...
2025-06-07T12:49:37.0388227+07:00 [DBG] (///) Hosting stopping
2025-06-07T12:49:37.0442703+07:00 [DBG] (///) Hosting stopped
2025-06-07T12:49:39.8115730+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T12:49:39.9253673+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T12:49:39.9301080+07:00 [DBG] (///) Hosting starting
2025-06-07T12:49:40.1094570+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T12:49:40.1101121+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T12:49:40.1919415+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T12:49:40.1939785+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T12:49:40.2047538+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T12:49:40.2053673+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T12:49:40.2054900+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T12:49:40.2058361+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T12:49:40.2058859+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T12:49:40.2059100+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T12:49:40.2059668+07:00 [DBG] (///) Hosting started
2025-06-07T12:50:17.0466237+07:00 [DBG] (///) Connection id ""0HND5GSN2TGE8"" accepted.
2025-06-07T12:50:17.0690492+07:00 [DBG] (///) Connection id ""0HND5GSN2TGE8"" started.
2025-06-07T12:50:17.0894927+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T12:50:17.1423351+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:50:17.1459023+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:50:17.1483706+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:50:17.1530404+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T12:50:17.1536120+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:51:07.8816868+07:00 [DBG] (///) Connection id ""0HND5GSN2TGE8"" received FIN.
2025-06-07T12:51:40.0942785+07:00 [DBG] (///) Connection id ""0HND5GSN2TGE8"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T12:51:40.1855477+07:00 [DBG] (///) Connection id ""0HND5GSN2TGE8"" disconnecting.
2025-06-07T12:51:40.2737000+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T12:51:40.7372161+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T12:51:40.7375895+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T12:51:40.8110294+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T12:51:40.8345873+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T12:51:40.9504668+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T12:51:41.0679303+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(\"dd/mm/yyyy\"), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T12:51:41.3434099+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(\"dd/mm/yyyy\"), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T12:51:41.3784172+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T12:51:41.4125116+07:00 [DBG] (///) Created DbConnection. (32ms).
2025-06-07T12:51:41.4156140+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:51:41.5112092+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:51:41.5215955+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:51:41.5288626+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T12:51:41.5389443+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (17ms).
2025-06-07T12:51:41.5477675+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:51:41.6265113+07:00 [INF] (///) Executed DbCommand ("77"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:51:41.6771110+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"TuitionService.Domain.TuitionDbContext"'."
""System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-07T12:51:41.7100699+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:51:41.7263388+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 92ms reading results.
2025-06-07T12:51:41.7337964+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:51:41.7415371+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (7ms).
2025-06-07T12:59:41.5702377+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T12:59:41.6736397+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T12:59:41.6777050+07:00 [DBG] (///) Hosting starting
2025-06-07T12:59:41.8294295+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T12:59:41.8299778+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T12:59:41.8976953+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T12:59:41.8993193+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T12:59:41.9083333+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T12:59:41.9089086+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T12:59:41.9090253+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T12:59:41.9093057+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T12:59:41.9093534+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T12:59:41.9093702+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T12:59:41.9094136+07:00 [DBG] (///) Hosting started
2025-06-07T12:59:46.0916430+07:00 [DBG] (///) Connection id ""0HND5H20LO9VC"" accepted.
2025-06-07T12:59:46.0923509+07:00 [DBG] (///) Connection id ""0HND5H20LO9VC"" started.
2025-06-07T12:59:46.1125498+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T12:59:46.1608086+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:59:46.1637895+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T12:59:46.1664433+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:59:46.1717621+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T12:59:46.1725346+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:59:49.6348332+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T12:59:50.2096432+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T12:59:50.2100155+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T12:59:50.3272961+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T12:59:50.3713056+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T12:59:50.4871561+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T12:59:50.5289914+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(\"dd/mm/yyyy\"), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T12:59:50.7758473+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(\"dd/mm/yyyy\"), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T12:59:50.8307731+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T12:59:50.8708587+07:00 [DBG] (///) Created DbConnection. (38ms).
2025-06-07T12:59:50.8741214+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:59:50.9662216+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:59:50.9741454+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T12:59:50.9806572+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T12:59:50.9884309+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (14ms).
2025-06-07T12:59:50.9963439+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:59:51.0878340+07:00 [INF] (///) Executed DbCommand ("88"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T12:59:51.1214345+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"TuitionService.Domain.TuitionDbContext"'."
""System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-07T12:59:51.1457964+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:59:51.1598184+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 64ms reading results.
2025-06-07T12:59:51.1665202+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:59:51.1731887+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (6ms).
2025-06-07T12:59:51.2199685+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T12:59:51.2226590+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 230
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T12:59:51.3049305+07:00 [ERR] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 5127.9074 ms
2025-06-07T12:59:51.3126308+07:00 [DBG] (///) Connection id ""0HND5H20LO9VC"" received FIN.
2025-06-07T12:59:51.3136758+07:00 [DBG] (///) Connection id ""0HND5H20LO9VC"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T12:59:51.3176718+07:00 [DBG] (///) Connection id ""0HND5H20LO9VC"" disconnecting.
2025-06-07T12:59:51.3258975+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T12:59:51.3334205+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T12:59:51.3373191+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (3ms).
2025-06-07T12:59:51.3433879+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 5230.3328ms
2025-06-07T12:59:51.3508731+07:00 [DBG] (///) Connection id ""0HND5H20LO9VC"" stopped.
2025-06-07T13:00:05.9089896+07:00 [DBG] (///) Connection id ""0HND5H20LO9VD"" accepted.
2025-06-07T13:00:05.9092608+07:00 [DBG] (///) Connection id ""0HND5H20LO9VD"" started.
2025-06-07T13:00:05.9097948+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:00:05.9106605+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:00:05.9108181+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:00:05.9109089+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:00:05.9111504+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:00:05.9112404+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:00:17.1662195+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:00:17.1746115+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:00:17.1750207+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:00:17.1753493+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:17.1767416+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:17.1771080+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:00:17.1772161+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:00:17.1772948+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:00:17.1774842+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:00:17.1834921+07:00 [INF] (///) Executed DbCommand ("6"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:00:17.1847249+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"TuitionService.Domain.TuitionDbContext"'."
""System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-07T13:00:17.1862782+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:17.1864328+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 2ms reading results.
2025-06-07T13:00:17.1866094+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:17.1866729+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:00:17.2035341+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:00:17.2038295+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 230
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:00:17.2090425+07:00 [ERR] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 11297.8144 ms
2025-06-07T13:00:17.2092741+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:00:17.2093658+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:17.2094204+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:00:17.2095331+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 11299.7699ms
2025-06-07T13:00:17.2096476+07:00 [DBG] (///) Connection id ""0HND5H20LO9VD"" disconnecting.
2025-06-07T13:00:17.2097015+07:00 [DBG] (///) Connection id ""0HND5H20LO9VD"" stopped.
2025-06-07T13:00:17.2097907+07:00 [DBG] (///) Connection id ""0HND5H20LO9VD"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:00:17.2302482+07:00 [DBG] (///) Connection id ""0HND5H20LO9VE"" accepted.
2025-06-07T13:00:17.2304540+07:00 [DBG] (///) Connection id ""0HND5H20LO9VE"" started.
2025-06-07T13:00:17.2306711+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:00:17.2308497+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:00:17.2310142+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:00:17.2310798+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:00:17.2312193+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:00:17.2313063+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:00:19.0753945+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:00:19.0761122+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:00:19.0761823+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:00:19.0762119+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:19.0762556+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:19.0763799+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:00:19.0765319+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:00:19.0765770+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:00:19.0766271+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:00:19.0779098+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:00:19.0783059+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"TuitionService.Domain.TuitionDbContext"'."
""System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-07T13:00:19.0799907+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:19.0800966+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 2ms reading results.
2025-06-07T13:00:19.0802519+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:19.0803087+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:00:19.0999796+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:00:19.1002780+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 230
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:00:19.1045757+07:00 [ERR] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 1873.3255 ms
2025-06-07T13:00:19.1047651+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:00:19.1048603+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:00:19.1049262+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:00:19.1050056+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 1874.3193ms
2025-06-07T13:00:19.1051370+07:00 [DBG] (///) Connection id ""0HND5H20LO9VE"" disconnecting.
2025-06-07T13:00:19.1051793+07:00 [DBG] (///) Connection id ""0HND5H20LO9VE"" stopped.
2025-06-07T13:00:19.1052574+07:00 [DBG] (///) Connection id ""0HND5H20LO9VE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:00:54.6426739+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T13:00:54.7457412+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T13:00:54.7498095+07:00 [DBG] (///) Hosting starting
2025-06-07T13:00:54.9169424+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T13:00:54.9176190+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T13:00:54.9858741+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T13:00:54.9874649+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T13:00:54.9965934+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T13:00:54.9971546+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T13:00:54.9972946+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T13:00:54.9975991+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T13:00:54.9976435+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T13:00:54.9976662+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T13:00:54.9977153+07:00 [DBG] (///) Hosting started
2025-06-07T13:00:58.3456761+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T13:00:58.4682270+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T13:00:58.4727800+07:00 [DBG] (///) Hosting starting
2025-06-07T13:00:58.6348993+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T13:00:58.6353718+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T13:00:58.7082023+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T13:00:58.7098704+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T13:00:58.7208717+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T13:00:58.7215026+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T13:00:58.7216361+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T13:00:58.7219566+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T13:00:58.7220030+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T13:00:58.7220277+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T13:00:58.7220841+07:00 [DBG] (///) Hosting started
2025-06-07T13:01:02.5285736+07:00 [DBG] (///) Connection id ""0HND5H2NEMVNM"" accepted.
2025-06-07T13:01:02.5291174+07:00 [DBG] (///) Connection id ""0HND5H2NEMVNM"" started.
2025-06-07T13:01:02.5615163+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:01:02.6090128+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:01:02.6120422+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:01:02.6142637+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:01:02.6190739+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:01:02.6197123+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:01:09.5962814+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T13:01:10.1384446+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T13:01:10.1387904+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T13:01:10.2200590+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T13:01:10.2512720+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T13:01:10.3722677+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:01:10.4247838+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(\"dd/mm/yyyy\"), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T13:01:10.6910715+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(\"dd/mm/yyyy\"), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T13:01:10.7312626+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:01:10.7769337+07:00 [DBG] (///) Created DbConnection. (44ms).
2025-06-07T13:01:10.7801264+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:01:10.8629438+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:01:10.8717035+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:01:10.8783057+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T13:01:10.8864446+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (14ms).
2025-06-07T13:01:10.8945999+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:01:10.9819858+07:00 [INF] (///) Executed DbCommand ("83"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:01:11.0165952+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"TuitionService.Domain.TuitionDbContext"'."
""System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-07T13:01:11.0398543+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:01:11.0520500+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 61ms reading results.
2025-06-07T13:01:11.0597695+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:01:11.0671899+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (7ms).
2025-06-07T13:01:11.1211346+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:01:11.1236395+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.FormatException: Input string was not in a correct format.
   at System.DateTimeFormat.IsValidCustomDateOnlyFormat(ReadOnlySpan`1 format, Boolean throwOnError)
   at System.DateOnly.ToString(String format, IFormatProvider provider)
   at lambda_method439(Closure, QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 230
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:01:11.1964996+07:00 [ERR] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 500 in 8570.1162 ms
2025-06-07T13:01:11.2047060+07:00 [DBG] (///) Connection id ""0HND5H2NEMVNM"" received FIN.
2025-06-07T13:01:11.2057323+07:00 [DBG] (///) Connection id ""0HND5H2NEMVNM"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:01:11.2094234+07:00 [DBG] (///) Connection id ""0HND5H2NEMVNM"" disconnecting.
2025-06-07T13:01:11.2156408+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:01:11.2230800+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:01:11.2277490+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (3ms).
2025-06-07T13:01:11.2323370+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 500 null "application/problem+json" 8670.3302ms
2025-06-07T13:01:11.2404191+07:00 [DBG] (///) Connection id ""0HND5H2NEMVNM"" stopped.
2025-06-07T13:01:25.8281518+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T13:01:25.9290436+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T13:01:25.9326998+07:00 [DBG] (///) Hosting starting
2025-06-07T13:01:26.0815063+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T13:01:26.0820646+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T13:01:26.1508984+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T13:01:26.1524228+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T13:01:26.1610582+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T13:01:26.1615550+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T13:01:26.1616587+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T13:01:26.1619326+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T13:01:26.1619736+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T13:01:26.1619963+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T13:01:26.1620562+07:00 [DBG] (///) Hosting started
2025-06-07T13:01:29.3367395+07:00 [DBG] (///) Connection id ""0HND5H2VEC5E7"" accepted.
2025-06-07T13:01:29.3375625+07:00 [DBG] (///) Connection id ""0HND5H2VEC5E7"" started.
2025-06-07T13:01:29.3599543+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:01:29.4077967+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:01:29.4111734+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:01:29.4140848+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:01:29.4199650+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:01:29.4206890+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:01:38.5808191+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T13:01:39.0716536+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T13:01:39.0720503+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T13:01:39.1677585+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T13:01:39.1936629+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T13:01:39.3280226+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:01:39.3654672+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(\"dd/mm/yyyy\"), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T13:01:39.6601624+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(\"dd/mm/yyyy\"), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T13:01:39.6990348+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:01:39.7318941+07:00 [DBG] (///) Created DbConnection. (31ms).
2025-06-07T13:01:39.7348652+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:01:39.8225190+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:01:39.8306053+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:01:39.8372488+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (3ms).
2025-06-07T13:01:39.8450730+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (14ms).
2025-06-07T13:01:39.8539458+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:01:39.9331258+07:00 [INF] (///) Executed DbCommand ("77"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:02:33.9252567+07:00 [DBG] (///) Connection id ""0HND5H2VEC5E7"" received FIN.
2025-06-07T13:02:38.6244140+07:00 [DBG] (///) Connection id ""0HND5H2VEC5E7"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:06:19.2174176+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T13:06:19.3193905+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T13:06:19.3229481+07:00 [DBG] (///) Hosting starting
2025-06-07T13:06:19.5135622+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T13:06:19.5141014+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T13:06:19.5845890+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T13:06:19.5863798+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T13:06:19.5945222+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T13:06:19.5950826+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T13:06:19.5952145+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T13:06:19.5955120+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T13:06:19.5955581+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T13:06:19.5955767+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T13:06:19.5956288+07:00 [DBG] (///) Hosting started
2025-06-07T13:06:23.8313369+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T13:06:23.8924280+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T13:06:23.8961458+07:00 [DBG] (///) Hosting starting
2025-06-07T13:06:24.0219753+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T13:06:24.0223747+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T13:06:24.0777130+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T13:06:24.0789308+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T13:06:24.0834537+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T13:06:24.0838607+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T13:06:24.0839586+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T13:06:24.0841234+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T13:06:24.0841629+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T13:06:24.0841793+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T13:06:24.0842087+07:00 [DBG] (///) Hosting started
2025-06-07T13:06:28.9204677+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTU"" accepted.
2025-06-07T13:06:28.9212742+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTU"" started.
2025-06-07T13:06:28.9370640+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:06:28.9848328+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:06:28.9874607+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:06:28.9899772+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:28.9936893+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:06:28.9942309+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:29.0893810+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableSensitiveDataLogging', configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-07T13:06:29.4031475+07:00 [DBG] (///) The index "{'StudentCode'}" was not created on entity type '"Tuition"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester'}".
2025-06-07T13:06:29.4035205+07:00 [DBG] (///) The index "{'StudentCode', 'AcademicYear', 'Semester'}" was not created on entity type '"TuitionPayment"' as the properties are already covered by the index "{'StudentCode', 'AcademicYear', 'Semester', 'PaymentDate'}".
2025-06-07T13:06:29.4591092+07:00 [WRN] (///) Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-07T13:06:29.4772811+07:00 [DBG] (///) The property '"GlobalStudentCode"."StudentBasicInfoStudentCode"' was created in shadow state because there are no eligible CLR members with a matching name.
2025-06-07T13:06:29.5502525+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:06:29.5794516+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && p.AcademicYear == __academicYear_1 && p.Semester == __semester_2)
    .Select(p => new PaymentResponse{ 
        PaymentDate = p.PaymentDate.ToString(\"dd/MM/yyyy\"), 
        AmountPaid = (decimal)p.AmountPaid 
    }
    )"'
2025-06-07T13:06:29.7564468+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<PaymentResponse>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Client Projections:
            0 -> 0
            1 -> 1
        SELECT t.payment_date, CAST(t.amount_paid AS numeric)
        FROM tuition_payment AS t
        WHERE ((t.student_code == @__studentCode_0) && (t.academic_year == @__academicYear_1)) && (t.semester == @__semester_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        DateOnly? value1;
        decimal? value2;
        value1 = try { (DateOnly?)dataReader.GetFieldValue<DateOnly>(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.IsDBNull(1) ? default(decimal?) : (decimal?)dataReader.GetDecimal(1) } catch (Exception) { ... } ;
        return new PaymentResponse{ 
            PaymentDate = value1 == default(DateOnly?) ? null : ((DateOnly)value1).ToString(\"dd/MM/yyyy\"), 
            AmountPaid = (decimal)value2 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T13:06:29.7831431+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:06:29.8062954+07:00 [DBG] (///) Created DbConnection. (21ms).
2025-06-07T13:06:29.8087999+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:29.8705219+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:29.8754589+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:06:29.8800406+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (2ms).
2025-06-07T13:06:29.8855423+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (10ms).
2025-06-07T13:06:29.8915890+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:06:29.9509575+07:00 [INF] (///) Executed DbCommand ("56"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:06:29.9722496+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:29.9796132+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 23ms reading results.
2025-06-07T13:06:29.9839221+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:29.9882891+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (4ms).
2025-06-07T13:06:29.9898050+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:06:29.9937739+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:06:30.0079004+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:30.0155713+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 1018.3732 ms
2025-06-07T13:06:30.0219179+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTU"" received FIN.
2025-06-07T13:06:30.0223297+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTU"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:06:30.0252323+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTU"" disconnecting.
2025-06-07T13:06:30.0280186+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:06:30.0330548+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:30.0352415+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (2ms).
2025-06-07T13:06:30.0370400+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 1100.6866ms
2025-06-07T13:06:30.0409037+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTU"" stopped.
2025-06-07T13:06:33.8099446+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTV"" accepted.
2025-06-07T13:06:33.8102455+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTV"" started.
2025-06-07T13:06:33.8109544+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:06:33.8120668+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:06:33.8122025+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:06:33.8124205+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:33.8126664+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:06:33.8127697+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:33.8360623+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:06:33.8489279+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:06:33.8490494+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:06:33.8491004+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:33.8494428+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:33.8496125+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:06:33.8496780+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:06:33.8497605+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:06:33.8498823+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:06:33.8528319+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:06:33.8531399+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:33.8532269+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:06:33.8533628+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:33.8534505+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:06:33.8536337+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:06:33.8537331+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:06:33.8540643+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:33.8543672+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 41.5281 ms
2025-06-07T13:06:33.8546032+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:06:33.8547133+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:33.8547385+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTV"" received FIN.
2025-06-07T13:06:33.8547804+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:06:33.8548720+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTV"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:06:33.8550191+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTV"" disconnecting.
2025-06-07T13:06:33.8550386+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 44.0951ms
2025-06-07T13:06:33.8552046+07:00 [DBG] (///) Connection id ""0HND5H5ONDSTV"" stopped.
2025-06-07T13:06:58.1065971+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU0"" accepted.
2025-06-07T13:06:58.1073416+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU0"" started.
2025-06-07T13:06:58.1076504+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:06:58.1078564+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:06:58.1079514+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:06:58.1080085+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:06:58.1081491+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:06:58.1083271+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:06:58.1748695+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:06:58.1783312+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .Where(s => s.StudentCode == __studentCode_0)
    .Select(s => new StudentDetailResponse{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode, 
        Tuitions = s.Tuitions
            .Select(t => new TuitionResponse{ 
                AcademicYear = t.AcademicYear, 
                Semester = t.Semester.ToString(), 
                TuitionAmount = (decimal)t.TuitionFee, 
                TuitionPaid = (decimal)t.TuitionPayments
                    .Sum(p => p.AmountPaid) 
            }
            )
            .ToList() 
    }
    )
    .FirstOrDefault()"'
2025-06-07T13:06:58.3242336+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailResponse>(
    asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
                9 -> 9
                10 -> 10
            SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, COALESCE(CAST(t.semester AS text), ''), CAST(t.tuition_fee AS numeric), CAST((
                SELECT CAST(sum(t0.amount_paid) AS integer)
                FROM tuition_payment AS t0
                WHERE (((t.student_code != NULL) && (t.academic_year != NULL)) && (t.semester != NULL)) && (((t.student_code == t0.student_code) && (t.academic_year == t0.academic_year)) && (t.semester == t0.semester))) AS numeric), t.student_code, t.semester
            FROM 
            (
                SELECT TOP(1) s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
                FROM student_basic_info AS s
                WHERE s.student_code == @__studentCode_0
            ) AS s0
            LEFT JOIN tuition AS t ON s0.student_code == t.student_code
            ORDER BY s0.student_code ASC, t.student_code ASC, t.academic_year ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                string value1;
                string value2;
                string value3;
                string value4;
                string value5;
                List<TuitionResponse> namelessParameter{0};
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                namelessParameter{0} = ShaperProcessingExpressionVisitor.InitializeCollection<TuitionResponse, List<TuitionResponse>>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                    clrCollectionAccessor: default(IClrCollectionAccessor));
                return resultContext.Values = new object[]
                { 
                    value1, 
                    value2, 
                    value3, 
                    value4, 
                    value5, 
                    namelessParameter{0} 
                };
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateCollection<List<TuitionResponse>, TuitionResponse, TuitionResponse>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]{ try { dataReader.GetString(0) } catch (Exception) { ... }  }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(9) ? default(string) : dataReader.GetString(9) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(10) ? default(int?) : (int?)dataReader.GetInt32(10) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]{ (left, right) => left == null ? right == null : right != null && (string)left == (string)right }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    string value1;
                    string value2;
                    decimal? value3;
                    decimal? value4;
                    value1 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                    value2 = try { dataReader.IsDBNull(6) ? default(string) : dataReader.GetString(6) } catch (Exception) { ... } ;
                    value3 = try { dataReader.IsDBNull(7) ? default(decimal?) : (decimal?)dataReader.GetDecimal(7) } catch (Exception) { ... } ;
                    value4 = try { dataReader.IsDBNull(8) ? default(decimal?) : (decimal?)dataReader.GetDecimal(8) } catch (Exception) { ... } ;
                    return new TuitionResponse{ 
                        AcademicYear = value1, 
                        Semester = value2, 
                        TuitionAmount = (decimal)value3, 
                        TuitionPaid = (decimal)value4 
                    }
                    ;
                });
            return IsTrue(resultCoordinator.ResultReady)
             ? new StudentDetailResponse{ 
                StudentCode = (string)(resultContext.Values[0]), 
                LastName = (string)(resultContext.Values[1]), 
                FirstName = (string)(resultContext.Values[2]), 
                ClassCode = (string)(resultContext.Values[3]), 
                FacultyCode = (string)(resultContext.Values[4]), 
                Tuitions = (List<TuitionResponse>)(resultContext.Values[5]) 
            }
             : default(StudentDetailResponse);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T13:06:58.3372744+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:06:58.3373926+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:06:58.3374224+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:58.3374859+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:58.3376669+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:06:58.3377137+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:06:58.3377802+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:06:58.3378385+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:06:58.3418673+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:06:58.3501417+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:58.3503007+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 8ms reading results.
2025-06-07T13:06:58.3504881+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:58.3505532+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:06:58.3508175+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:06:58.3523071+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:06:58.3559699+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:06:58.3561504+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 247.9090 ms
2025-06-07T13:06:58.3562664+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:06:58.3563216+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:58.3563615+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:06:58.3564221+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 248.7624ms
2025-06-07T13:06:58.3564824+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU0"" disconnecting.
2025-06-07T13:06:58.3565126+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU0"" stopped.
2025-06-07T13:06:58.3565857+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU0"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:06:59.3299666+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU1"" accepted.
2025-06-07T13:06:59.3300371+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU1"" started.
2025-06-07T13:06:59.3303247+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:06:59.3307519+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:06:59.3308446+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:06:59.3309367+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:59.3311032+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:06:59.3311925+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:59.3325979+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:06:59.3334064+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:06:59.3334861+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:06:59.3335230+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:59.3335842+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:59.3338453+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:06:59.3338931+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:06:59.3339443+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:06:59.3340157+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:06:59.3367949+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:06:59.3372341+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:59.3372938+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:06:59.3373907+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:59.3374367+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:06:59.3375294+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:06:59.3375666+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:06:59.3377233+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:06:59.3378259+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 6.6740 ms
2025-06-07T13:06:59.3379812+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:06:59.3380133+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:06:59.3380312+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:06:59.3380842+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 7.7576ms
2025-06-07T13:06:59.3381291+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU1"" disconnecting.
2025-06-07T13:06:59.3381488+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU1"" stopped.
2025-06-07T13:06:59.3381928+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU1"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:07:02.2856532+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU2"" accepted.
2025-06-07T13:07:02.2857241+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU2"" started.
2025-06-07T13:07:02.2865379+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T13:07:02.2868016+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:07:02.2868563+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:07:02.2869049+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:07:02.2870254+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:07:02.2875240+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:07:02.2876229+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:07:02.2878455+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:07:02.2902710+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU2"", Request id ""0HND5H5ONDSU2:00000001"": started reading request body.
2025-06-07T13:07:02.2903335+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU2"", Request id ""0HND5H5ONDSU2:00000001"": done reading request body.
2025-06-07T13:07:02.2954179+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:07:02.3009987+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:07:02.3010824+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:07:02.3011047+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:07:02.3011514+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:07:02.3025553+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:07:02.3056590+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:07:02.3147308+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:07:02.3158249+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:07:02.3159848+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:07:02.3166207+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:07:02.3172226+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<Main>$>b__0_49(DeleteTuitionPaymentRequest r) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 409
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:07:02.3490493+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 61.9648 ms
2025-06-07T13:07:02.3491479+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:07:02.3491910+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:07:02.3492258+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:07:02.3493265+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 62.7351ms
2025-06-07T13:07:02.3493896+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU2"" disconnecting.
2025-06-07T13:07:02.3494069+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU2"" stopped.
2025-06-07T13:07:02.3494369+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU2"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:08:12.5265550+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU3"" accepted.
2025-06-07T13:08:12.5272144+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU3"" started.
2025-06-07T13:08:12.5274477+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:08:12.5275849+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:08:12.5276262+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:08:12.5276614+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:08:12.5277496+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:08:12.5277887+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:08:12.5297716+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:08:12.5303189+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:08:12.5305008+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:08:12.5305389+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:12.5306217+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:12.5307651+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:12.5308044+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:12.5308403+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:12.5308958+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:08:12.5331964+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:08:12.5337213+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:12.5338327+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:08:12.5340468+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:12.5341159+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:12.5343063+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:08:12.5343579+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:08:12.5345431+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:08:12.5346493+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 6.8410 ms
2025-06-07T13:08:12.5347461+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:08:12.5347906+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:12.5348207+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:12.5348799+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 7.4327ms
2025-06-07T13:08:12.5349462+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU3"" disconnecting.
2025-06-07T13:08:12.5349740+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU3"" stopped.
2025-06-07T13:08:12.5350087+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU3"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:08:13.9623952+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU4"" accepted.
2025-06-07T13:08:13.9624753+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU4"" started.
2025-06-07T13:08:13.9626994+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:08:13.9628111+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:08:13.9628474+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:08:13.9628776+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:13.9629450+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:08:13.9631081+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:13.9637070+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:08:13.9639737+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:08:13.9640049+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:08:13.9640327+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:13.9640745+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:13.9642169+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:13.9642622+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:13.9642989+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:13.9643477+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:08:13.9653498+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:08:13.9655782+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:13.9656938+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:08:13.9657778+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:13.9658169+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:13.9658924+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:08:13.9659241+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:08:13.9660545+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:13.9661327+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.1438 ms
2025-06-07T13:08:13.9661985+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:08:13.9662204+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:13.9662394+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:13.9662896+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.586ms
2025-06-07T13:08:13.9663389+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU4"" disconnecting.
2025-06-07T13:08:13.9663590+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU4"" stopped.
2025-06-07T13:08:13.9663827+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU4"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:08:43.6808216+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU5"" accepted.
2025-06-07T13:08:43.6814354+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU5"" started.
2025-06-07T13:08:43.6823112+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:08:43.6825411+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:08:43.6826087+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:08:43.6826560+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:08:43.6827582+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:08:43.6828025+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:08:43.6837215+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:08:43.6844099+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:08:43.6845046+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:08:43.6845489+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:43.6845984+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:43.6848312+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:43.6848910+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:43.6849318+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:43.6849934+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:08:43.6867785+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:08:43.6871985+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:43.6872823+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:08:43.6874604+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:43.6875151+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:43.6876073+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:08:43.6876400+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:08:43.6878118+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:08:43.6879134+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 5.1047 ms
2025-06-07T13:08:43.6879909+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:08:43.6880305+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:43.6880532+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:43.6882118+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 5.8185ms
2025-06-07T13:08:43.6882752+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU5"" disconnecting.
2025-06-07T13:08:43.6882986+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU5"" stopped.
2025-06-07T13:08:43.6883452+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU5"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:08:44.6984774+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU6"" accepted.
2025-06-07T13:08:44.6985347+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU6"" started.
2025-06-07T13:08:44.6987556+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:08:44.6990185+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:08:44.6990773+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:08:44.6991262+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:44.6992193+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:08:44.6992703+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:44.6999633+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:08:44.7002958+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:08:44.7003782+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:08:44.7004017+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:44.7004306+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:44.7005714+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:44.7006000+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:44.7006356+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:44.7006697+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:08:44.7016631+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:08:44.7018407+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:44.7018825+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:08:44.7019923+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:44.7020818+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:44.7021558+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:08:44.7021841+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:08:44.7023102+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:44.7023852+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.1301 ms
2025-06-07T13:08:44.7024468+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:08:44.7024678+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:44.7024844+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:44.7025248+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.7798ms
2025-06-07T13:08:44.7025637+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU6"" disconnecting.
2025-06-07T13:08:44.7025789+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU6"" stopped.
2025-06-07T13:08:44.7026055+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU6"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:08:48.3010666+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU7"" accepted.
2025-06-07T13:08:48.3011862+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU7"" started.
2025-06-07T13:08:48.3014312+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T13:08:48.3016001+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:08:48.3016637+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:08:48.3017119+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:48.3018006+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:08:48.3019688+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:08:48.3019884+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:08:48.3020370+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:48.3021630+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU7"", Request id ""0HND5H5ONDSU7:00000001"": started reading request body.
2025-06-07T13:08:48.3021953+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU7"", Request id ""0HND5H5ONDSU7:00000001"": done reading request body.
2025-06-07T13:08:48.3027406+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:08:48.3039533+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:08:48.3039799+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:08:48.3040058+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:48.3040403+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:48.3041194+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:08:48.3041488+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:08:48.3048803+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:08:48.3049167+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:48.3049571+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:48.3050754+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:08:48.3051128+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<Main>$>b__0_49(DeleteTuitionPaymentRequest r) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 409
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:08:48.3078460+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 6.0113 ms
2025-06-07T13:08:48.3079199+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:08:48.3079540+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:48.3079797+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:48.3080192+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 6.5977ms
2025-06-07T13:08:48.3080632+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU7"" disconnecting.
2025-06-07T13:08:48.3080770+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU7"" stopped.
2025-06-07T13:08:48.3081562+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU7"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:08:58.3197017+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU8"" accepted.
2025-06-07T13:08:58.3198329+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU8"" started.
2025-06-07T13:08:58.3200463+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:08:58.3201693+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:08:58.3202181+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:08:58.3202623+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:08:58.3203600+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:08:58.3204125+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:08:58.3258140+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:08:58.3300385+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Count()"'
2025-06-07T13:08:58.3342511+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(count(*) AS integer)
            FROM student_basic_info AS s, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T13:08:58.3388209+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:08:58.3389032+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:08:58.3389239+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3389675+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3390743+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:58.3391158+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3391316+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3391799+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:08:58.3403980+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:08:58.3424557+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3425395+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T13:08:58.3426154+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3426596+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:58.3436761+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<StudentBasicInfo>()
    .AsNoTracking()
    .Select(s => new StudentBasicInfo{ 
        StudentCode = s.StudentCode, 
        LastName = s.LastName, 
        FirstName = s.FirstName, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-07T13:08:58.3457394+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T13:08:58.3464690+07:00 [WRN] (///) The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-06-07T13:08:58.3486513+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => SingleQueryingEnumerable.Create<StudentBasicInfo>(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        Projection Mapping:
            StudentCode -> 0
            LastName -> 1
            FirstName -> 2
            ClassCode -> 3
            FacultyCode -> 4
        SELECT s.student_code AS StudentCode, s.last_name AS LastName, s.first_name AS FirstName, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
        FROM student_basic_info AS s
        OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    readerColumns: null, 
    shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
    {
        string value1;
        string value2;
        string value3;
        string value4;
        string value5;
        value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
        value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
        value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
        value4 = try { dataReader.GetString(3) } catch (Exception) { ... } ;
        value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
        return new StudentBasicInfo{ 
            StudentCode = value1, 
            LastName = value2, 
            FirstName = value3, 
            ClassCode = value4, 
            FacultyCode = value5 
        }
        ;
    }, 
    contextType: TuitionService.Domain.TuitionDbContext, 
    standAloneStateManager: False, 
    detailedErrorsEnabled: True, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T13:08:58.3499272+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3499988+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3501082+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:58.3501428+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3501820+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3502445+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:08:58.3515472+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:08:58.3526143+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3527096+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T13:08:58.3528695+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3529294+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:58.3538118+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:08:58.3588648+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:08:58.3637231+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:08:58.3639071+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 43.4510 ms
2025-06-07T13:08:58.3640053+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:08:58.3640530+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3640918+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:58.3641433+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 44.0955ms
2025-06-07T13:08:58.3641980+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU8"" disconnecting.
2025-06-07T13:08:58.3642188+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU8"" stopped.
2025-06-07T13:08:58.3642453+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU8"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:08:58.3691840+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU9"" accepted.
2025-06-07T13:08:58.3692653+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU9"" started.
2025-06-07T13:08:58.3694433+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:08:58.3696011+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:08:58.3696496+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:08:58.3696824+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:08:58.3697518+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:08:58.3697918+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:08:58.3703562+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:08:58.3706158+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:08:58.3706464+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:08:58.3706686+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3707066+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3708029+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:58.3708219+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3708357+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3708692+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:08:58.3716721+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:08:58.3720501+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3721149+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:08:58.3721985+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3722415+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:58.3725145+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3725461+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3726278+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:08:58.3726497+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3726784+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:08:58.3727267+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:08:58.3736179+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:08:58.3737626+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3738054+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:08:58.3738751+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3739088+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:58.3739958+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:08:58.3740338+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:08:58.3741927+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:08:58.3742704+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 4.4756 ms
2025-06-07T13:08:58.3743348+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:08:58.3743582+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:08:58.3743778+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:08:58.3744273+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 4.978ms
2025-06-07T13:08:58.3745634+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU9"" disconnecting.
2025-06-07T13:08:58.3745869+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU9"" stopped.
2025-06-07T13:08:58.3746145+07:00 [DBG] (///) Connection id ""0HND5H5ONDSU9"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:09:00.5301951+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUA"" accepted.
2025-06-07T13:09:00.5302574+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUA"" started.
2025-06-07T13:09:00.5304363+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:09:00.5305358+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:09:00.5305745+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:09:00.5306205+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:09:00.5306952+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:09:00.5307839+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:09:00.5313500+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:09:00.5317117+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:09:00.5317445+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:09:00.5317637+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5317993+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5319041+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:09:00.5319360+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:09:00.5319740+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:09:00.5320090+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:09:00.5330922+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:09:00.5333512+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5334056+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:09:00.5334746+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5335264+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:09:00.5335995+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:09:00.5336281+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:09:00.5337577+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:09:00.5338282+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.0987 ms
2025-06-07T13:09:00.5338956+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:09:00.5339259+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5339491+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:09:00.5339917+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.5533ms
2025-06-07T13:09:00.5340643+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUA"" disconnecting.
2025-06-07T13:09:00.5340962+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUA"" stopped.
2025-06-07T13:09:00.5341207+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUA"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:09:00.5387843+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUB"" accepted.
2025-06-07T13:09:00.5388432+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUB"" started.
2025-06-07T13:09:00.5390434+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:09:00.5391896+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:09:00.5392382+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:09:00.5392843+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:09:00.5393664+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:09:00.5394190+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:09:00.5401249+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:09:00.5404361+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:09:00.5404685+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:09:00.5405586+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5405916+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5406683+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:09:00.5406976+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:09:00.5407257+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:09:00.5407545+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:09:00.5419694+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:09:00.5421962+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5422410+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:09:00.5423211+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5423686+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:09:00.5424698+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:09:00.5424987+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:09:00.5426218+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:09:00.5427037+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.2924 ms
2025-06-07T13:09:00.5427799+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:09:00.5428070+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:00.5428267+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:09:00.5428740+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.83ms
2025-06-07T13:09:00.5429454+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUB"" disconnecting.
2025-06-07T13:09:00.5429693+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUB"" stopped.
2025-06-07T13:09:00.5430094+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUB"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:09:01.5134665+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUC"" accepted.
2025-06-07T13:09:01.5135637+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUC"" started.
2025-06-07T13:09:01.5137622+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:09:01.5139693+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:09:01.5140259+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:09:01.5140610+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:09:01.5141472+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:09:01.5141913+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:09:01.5148644+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:09:01.5153845+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:09:01.5154332+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:09:01.5154546+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:01.5155050+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:01.5156319+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:09:01.5156714+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:09:01.5157251+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:09:01.5158223+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:09:01.5166768+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:09:01.5167905+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:01.5168300+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:09:01.5168847+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:01.5169270+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:09:01.5169919+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:09:01.5170160+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:09:01.5171301+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:09:01.5172060+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.0278 ms
2025-06-07T13:09:01.5172689+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:09:01.5173786+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:09:01.5173961+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:09:01.5174470+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.6775ms
2025-06-07T13:09:01.5174830+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUC"" disconnecting.
2025-06-07T13:09:01.5175009+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUC"" stopped.
2025-06-07T13:09:01.5175237+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUC"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:10:29.1644161+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUD"" accepted.
2025-06-07T13:10:29.1645577+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUD"" started.
2025-06-07T13:10:29.1648284+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:10:29.1649665+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:10:29.1650179+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:10:29.1650551+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:10:29.1651943+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:10:29.1652313+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:10:29.1659083+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:10:29.1662940+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:10:29.1663382+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:10:29.1663596+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:29.1664038+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:29.1665367+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:10:29.1665780+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:10:29.1666282+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:10:29.1667795+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:10:29.1683034+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:10:29.1685689+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:29.1686414+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:10:29.1687486+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:29.1687961+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:10:29.1689295+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:10:29.1689630+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:10:29.1691279+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:10:29.1692367+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.9935 ms
2025-06-07T13:10:29.1693285+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:10:29.1693615+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:29.1693998+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:10:29.1694529+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.6216ms
2025-06-07T13:10:29.1695115+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUD"" disconnecting.
2025-06-07T13:10:29.1695343+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUD"" stopped.
2025-06-07T13:10:29.1695565+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUD"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:10:44.1894413+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUE"" accepted.
2025-06-07T13:10:44.1895334+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUE"" started.
2025-06-07T13:10:44.1897518+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:10:44.1898883+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:10:44.1899419+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:10:44.1899755+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:10:44.1900485+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:10:44.1900834+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:10:44.1906996+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:10:44.1912120+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:10:44.1912639+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:10:44.1912831+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:44.1913294+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:44.1915417+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:10:44.1916108+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:10:44.1916740+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:10:44.1917488+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:10:44.1935596+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:10:44.1937889+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:44.1938458+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:10:44.1939189+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:44.1939531+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:10:44.1940938+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:10:44.1941716+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:10:44.1943201+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:10:44.1944005+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 4.3114 ms
2025-06-07T13:10:44.1944669+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:10:44.1945033+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:10:44.1945215+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:10:44.1945779+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.8354ms
2025-06-07T13:10:44.1946298+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUE"" disconnecting.
2025-06-07T13:10:44.1946495+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUE"" stopped.
2025-06-07T13:10:44.1947182+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:10.2008222+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUF"" accepted.
2025-06-07T13:11:10.2008971+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUF"" started.
2025-06-07T13:11:10.2011298+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:11:10.2012431+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:11:10.2012832+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:11:10.2013178+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:10.2013819+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:10.2014090+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:10.2020925+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:10.2025216+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:10.2025733+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:10.2026034+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:10.2026387+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:10.2027680+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:10.2028339+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:10.2028632+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:10.2029021+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:11:10.2045727+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:11:10.2048678+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:10.2049341+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:10.2050196+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:10.2050631+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:10.2051436+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:11:10.2051809+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:11:10.2053211+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:10.2055170+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 4.0539 ms
2025-06-07T13:11:10.2056077+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:10.2056439+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:10.2056732+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:10.2057213+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.5885ms
2025-06-07T13:11:10.2057700+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUF"" disconnecting.
2025-06-07T13:11:10.2057900+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUF"" stopped.
2025-06-07T13:11:10.2058518+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUF"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:11.5305905+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUG"" accepted.
2025-06-07T13:11:11.5307421+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUG"" started.
2025-06-07T13:11:11.5310068+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:11:11.5312047+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:11:11.5313968+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:11:11.5314595+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:11.5315378+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:11.5315851+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:11.5325023+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:11.5329289+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:11.5329739+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:11.5330003+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:11.5330579+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:11.5332032+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:11.5332347+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:11.5333108+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:11.5333745+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:11:11.5349070+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:11:11.5351869+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:11.5352591+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:11.5353571+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:11.5354046+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:11.5355039+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:11:11.5355397+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:11:11.5357118+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:11.5358330+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 4.2225 ms
2025-06-07T13:11:11.5359419+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:11.5359783+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:11.5359978+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:11.5362649+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 5.1781ms
2025-06-07T13:11:11.5363452+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUG"" disconnecting.
2025-06-07T13:11:11.5363704+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUG"" stopped.
2025-06-07T13:11:11.5364378+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUG"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:14.0911150+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUH"" accepted.
2025-06-07T13:11:14.0911765+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUH"" started.
2025-06-07T13:11:14.0913714+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T13:11:14.0915055+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:11:14.0915553+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:11:14.0916052+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:14.0916809+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:14.0917231+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:11:14.0917420+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:11:14.0917961+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:14.0918455+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUH"", Request id ""0HND5H5ONDSUH:00000001"": started reading request body.
2025-06-07T13:11:14.0918623+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUH"", Request id ""0HND5H5ONDSUH:00000001"": done reading request body.
2025-06-07T13:11:14.0923819+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:14.0976021+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:14.0976767+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:14.0976952+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:14.0977328+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:14.0978091+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:11:14.0978399+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:11:14.0985975+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:11:14.0986436+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:14.0986868+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:14.0988337+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:14.0989108+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<Main>$>b__0_49(DeleteTuitionPaymentRequest r) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 409
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:11:14.1018907+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 10.1794 ms
2025-06-07T13:11:14.1019967+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:14.1020321+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:14.1021471+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:14.1021995+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 10.8317ms
2025-06-07T13:11:14.1022518+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUH"" disconnecting.
2025-06-07T13:11:14.1022678+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUH"" stopped.
2025-06-07T13:11:14.1022975+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUH"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:34.1812831+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUI"" accepted.
2025-06-07T13:11:34.1813629+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUI"" started.
2025-06-07T13:11:34.1815350+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:11:34.1816423+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:11:34.1816800+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:11:34.1817133+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:11:34.1817856+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:34.1818153+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:11:34.1823903+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:34.1826332+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:34.1826748+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:34.1826970+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1887273+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1888725+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:34.1889124+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.1889320+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.1889608+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:11:34.1904155+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:11:34.1906160+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1906732+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:34.1907430+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1908209+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:34.1910517+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1910860+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1911556+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:34.1911815+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.1912176+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.1912526+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:11:34.1919816+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:11:34.1920898+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1921225+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:34.1921891+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1922204+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:34.1922995+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:11:34.1923375+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:11:34.1924619+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:11:34.1925364+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 10.7154 ms
2025-06-07T13:11:34.1925993+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:34.1926264+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1926442+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:34.1926834+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 11.1484ms
2025-06-07T13:11:34.1927406+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUI"" disconnecting.
2025-06-07T13:11:34.1927639+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUI"" stopped.
2025-06-07T13:11:34.1928191+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUI"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:34.1978292+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUJ"" accepted.
2025-06-07T13:11:34.1978956+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUJ"" started.
2025-06-07T13:11:34.1980476+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:11:34.1981557+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:11:34.1981966+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:11:34.1982280+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:11:34.1982861+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:34.1983215+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:11:34.1988373+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:34.1990500+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:34.1990794+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:34.1990982+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1991354+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.1992440+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:34.1992717+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.1992941+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.1993170+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:11:34.2001168+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:11:34.2002630+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.2003171+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:34.2003875+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.2004313+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:34.2007188+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.2007581+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.2008471+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:34.2008695+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.2008946+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:34.2009253+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:11:34.2019160+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:11:34.2021267+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.2021785+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:34.2022433+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.2022781+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:34.2023487+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:11:34.2023817+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:11:34.2025535+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:11:34.2026464+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 4.3043 ms
2025-06-07T13:11:34.2027266+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:34.2027533+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:34.2027705+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:34.2028154+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 4.7637ms
2025-06-07T13:11:34.2028622+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUJ"" disconnecting.
2025-06-07T13:11:34.2028790+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUJ"" stopped.
2025-06-07T13:11:34.2029201+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUJ"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:35.1049588+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUK"" accepted.
2025-06-07T13:11:35.1050248+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUK"" started.
2025-06-07T13:11:35.1052062+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:11:35.1053121+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:11:35.1054096+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:11:35.1054415+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:35.1055024+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:35.1055282+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:35.1060336+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:35.1062988+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:35.1063363+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:35.1063555+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1063855+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1064833+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:35.1065046+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:35.1065294+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:35.1065549+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:11:35.1085386+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:11:35.1087919+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1088521+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:35.1089611+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1090129+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:35.1091218+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:11:35.1091801+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:11:35.1093291+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:35.1095370+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.8757 ms
2025-06-07T13:11:35.1096173+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:35.1096522+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1096834+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:35.1097414+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.5299ms
2025-06-07T13:11:35.1098168+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUK"" disconnecting.
2025-06-07T13:11:35.1098449+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUK"" stopped.
2025-06-07T13:11:35.1098699+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUK"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:35.1151378+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUL"" accepted.
2025-06-07T13:11:35.1152021+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUL"" started.
2025-06-07T13:11:35.1153643+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:11:35.1154670+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:11:35.1155127+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:11:35.1155435+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:35.1156797+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:35.1157122+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:35.1162323+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:35.1164959+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:35.1165236+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:35.1165444+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1165758+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1166625+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:35.1166910+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:35.1167168+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:35.1167442+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:11:35.1179766+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:11:35.1181940+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1182386+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:35.1183129+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1183509+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:35.1184372+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:11:35.1184683+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:11:35.1185836+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:11:35.1186648+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.9501 ms
2025-06-07T13:11:35.1187277+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:35.1187535+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:35.1188681+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:35.1189452+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.5493ms
2025-06-07T13:11:35.1189937+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUL"" disconnecting.
2025-06-07T13:11:35.1190115+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUL"" stopped.
2025-06-07T13:11:35.1190332+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUL"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:11:36.3392040+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUM"" accepted.
2025-06-07T13:11:36.3392862+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUM"" started.
2025-06-07T13:11:36.3394907+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:11:36.3396223+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:11:36.3396734+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:11:36.3397368+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:36.3398165+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:11:36.3398451+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:36.3403153+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:11:36.3405815+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:11:36.3406078+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:11:36.3406256+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:36.3406565+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:36.3407200+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:11:36.3407403+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:36.3407670+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:11:36.3408002+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:11:36.3417239+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:11:36.3418493+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:36.3418826+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:11:36.3419387+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:36.3419684+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:36.3420568+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:11:36.3420933+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:11:36.3421911+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:11:36.3422520+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.4045 ms
2025-06-07T13:11:36.3423057+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:11:36.3423270+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:11:36.3423443+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:11:36.3423834+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.8965ms
2025-06-07T13:11:36.3424250+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUM"" disconnecting.
2025-06-07T13:11:36.3424397+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUM"" stopped.
2025-06-07T13:11:36.3424671+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUM"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:12:40.0069895+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUN"" accepted.
2025-06-07T13:12:40.0070710+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUN"" started.
2025-06-07T13:12:40.0072117+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:12:40.0073163+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:12:40.0074159+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:12:40.0074493+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:12:40.0075123+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:12:40.0075367+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:12:40.0080558+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:12:40.0084023+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:12:40.0084399+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:12:40.0084682+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:12:40.0085018+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:12:40.0086335+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:12:40.0086700+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:12:40.0086996+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:12:40.0087271+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:12:40.0102541+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:12:40.0104856+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:12:40.0105341+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:12:40.0106077+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:12:40.0106501+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:12:40.0107274+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:12:40.0107600+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:12:40.0108746+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:12:40.0109620+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.4144 ms
2025-06-07T13:12:40.0110624+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:12:40.0110965+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:12:40.0111175+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:12:40.0111625+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.9464ms
2025-06-07T13:12:40.0112008+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUN"" disconnecting.
2025-06-07T13:12:40.0112214+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUN"" stopped.
2025-06-07T13:12:40.0112541+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUN"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:02.9092433+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUO"" accepted.
2025-06-07T13:13:02.9093251+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUO"" started.
2025-06-07T13:13:02.9095134+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T13:13:02.9096702+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:13:02.9097323+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:13:02.9097905+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:02.9098676+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:02.9099093+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:13:02.9099383+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:13:02.9099853+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:02.9101874+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUO"", Request id ""0HND5H5ONDSUO:00000001"": started reading request body.
2025-06-07T13:13:02.9102314+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUO"", Request id ""0HND5H5ONDSUO:00000001"": done reading request body.
2025-06-07T13:13:02.9110209+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:02.9110975+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:02.9111238+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:02.9111533+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:02.9112018+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:02.9113057+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:13:02.9113558+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:13:02.9121638+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:13:02.9122209+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:02.9122694+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:02.9124438+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:02.9124745+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<Main>$>b__0_49(DeleteTuitionPaymentRequest r) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 409
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:13:02.9153237+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 5.4243 ms
2025-06-07T13:13:02.9154293+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:02.9154648+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:02.9154888+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:02.9155355+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 6.0242ms
2025-06-07T13:13:02.9156753+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUO"" disconnecting.
2025-06-07T13:13:02.9157111+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUO"" stopped.
2025-06-07T13:13:02.9157270+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUO"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:05.8895163+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUP"" accepted.
2025-06-07T13:13:05.8896104+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUP"" started.
2025-06-07T13:13:05.8900309+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:13:05.8901436+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:13:05.8901881+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:13:05.8902393+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:05.8903019+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:05.8903312+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:05.8910623+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:05.8914719+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:05.8916410+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:05.8916756+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:05.8917120+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:05.8918063+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:05.8918404+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:05.8918690+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:05.8919025+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:13:05.8938146+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:13:05.8940994+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:05.8941851+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:05.8942896+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:05.8944227+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:05.8945484+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:13:05.8945803+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:13:05.8947215+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:05.8948071+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 4.4614 ms
2025-06-07T13:13:05.8948728+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:05.8949025+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:05.8949190+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:05.8949615+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.9314ms
2025-06-07T13:13:05.8950009+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUP"" disconnecting.
2025-06-07T13:13:05.8950190+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUP"" stopped.
2025-06-07T13:13:05.8950915+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUP"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:07.4692837+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUQ"" accepted.
2025-06-07T13:13:07.4693889+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUQ"" started.
2025-06-07T13:13:07.4695539+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:13:07.4696628+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:13:07.4697634+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:13:07.4698078+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:13:07.4698721+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:07.4699040+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:13:07.4705312+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:07.4707691+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:07.4708078+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:07.4708301+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4709346+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4710626+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:07.4710877+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4711393+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4711701+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:13:07.4719294+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:13:07.4720508+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4720860+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:07.4721521+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4721834+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:07.4724061+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4724319+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4725051+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:07.4725313+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4725585+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4726320+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:13:07.4733398+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:13:07.4734430+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4734771+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:07.4735370+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4735796+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:07.4736553+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:13:07.4736853+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:13:07.4738058+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:13:07.4738761+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 3.9693 ms
2025-06-07T13:13:07.4740212+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:07.4740479+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4740709+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:07.4741198+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 4.5623ms
2025-06-07T13:13:07.4741662+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUQ"" disconnecting.
2025-06-07T13:13:07.4741835+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUQ"" stopped.
2025-06-07T13:13:07.4742243+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUQ"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:07.4808093+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUR"" accepted.
2025-06-07T13:13:07.4808982+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUR"" started.
2025-06-07T13:13:07.4812118+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:13:07.4813631+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:13:07.4814237+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:13:07.4814685+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:13:07.4815386+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:07.4815799+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:13:07.4821100+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:07.4823508+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:07.4823804+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:07.4823974+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4824266+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4825100+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:07.4825405+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4825648+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4826016+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:13:07.4834142+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:13:07.4835438+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4835910+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:07.4836803+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4837117+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:07.4842544+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4842858+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4843593+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:07.4843792+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4844013+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:07.4844320+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:13:07.4850599+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:13:07.4851397+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4851693+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:07.4852239+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4852424+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:07.4853412+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:13:07.4853751+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:13:07.4854827+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:13:07.4855415+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 3.9778 ms
2025-06-07T13:13:07.4856031+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:07.4856228+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:07.4856390+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:07.4856795+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 4.4734ms
2025-06-07T13:13:07.4857162+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUR"" disconnecting.
2025-06-07T13:13:07.4857299+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUR"" stopped.
2025-06-07T13:13:07.4857554+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUR"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:08.7268117+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUS"" accepted.
2025-06-07T13:13:08.7268735+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUS"" started.
2025-06-07T13:13:08.7271094+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:13:08.7272404+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:13:08.7273616+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:13:08.7274102+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:08.7274874+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:08.7275221+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:08.7281879+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:08.7287903+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:08.7288345+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:08.7288589+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7288881+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7289737+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:08.7289995+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:08.7290413+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:08.7290806+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:13:08.7301905+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:13:08.7303768+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7304162+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:08.7304831+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7305107+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:08.7305865+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:13:08.7306166+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:13:08.7307854+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:08.7308729+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.3401 ms
2025-06-07T13:13:08.7309750+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:08.7310106+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7310358+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:08.7312006+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.084ms
2025-06-07T13:13:08.7312736+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUS"" disconnecting.
2025-06-07T13:13:08.7312991+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUS"" stopped.
2025-06-07T13:13:08.7313269+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUS"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:08.7359181+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUT"" accepted.
2025-06-07T13:13:08.7360056+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUT"" started.
2025-06-07T13:13:08.7361852+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:13:08.7363022+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:13:08.7363445+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:13:08.7363771+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:08.7364392+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:08.7364642+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:08.7370708+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:08.7373629+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:08.7374001+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:08.7374222+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7374503+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7375539+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:08.7375771+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:08.7376081+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:08.7376388+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:13:08.7387476+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:13:08.7389306+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7389968+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:08.7390595+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7390880+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:08.7391465+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:13:08.7391694+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:13:08.7392864+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:13:08.7393466+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.8758 ms
2025-06-07T13:13:08.7394057+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:08.7394347+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:08.7394501+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:08.7394932+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.3068ms
2025-06-07T13:13:08.7395283+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUT"" disconnecting.
2025-06-07T13:13:08.7395436+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUT"" stopped.
2025-06-07T13:13:08.7395911+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUT"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:12.2577748+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUU"" accepted.
2025-06-07T13:13:12.2578668+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUU"" started.
2025-06-07T13:13:12.2581356+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:13:12.2583482+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:13:12.2588880+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:13:12.2589355+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:12.2589990+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:12.2590275+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:12.2594937+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:12.2596919+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:12.2597157+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:12.2597612+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:12.2597852+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:12.2598297+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:13:12.2598543+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:12.2598832+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:13:12.2599106+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:13:12.2606255+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:13:12.2607084+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:12.2607353+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:13:12.2607844+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:12.2608019+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:12.2608814+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:13:12.2608977+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:13:12.2609767+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:12.2610306+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.0008 ms
2025-06-07T13:13:12.2610854+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:12.2611125+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:12.2611261+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:12.2611830+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.0551ms
2025-06-07T13:13:12.2612131+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUU"" disconnecting.
2025-06-07T13:13:12.2612255+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUU"" stopped.
2025-06-07T13:13:12.2612368+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUU"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:13:17.8943079+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUV"" accepted.
2025-06-07T13:13:17.8943717+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUV"" started.
2025-06-07T13:13:17.8947144+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 84
2025-06-07T13:13:17.8948260+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:13:17.8948697+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:13:17.8948987+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:17.8949466+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:13:17.8949821+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:13:17.8949914+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:13:17.8950193+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:17.8950736+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUV"", Request id ""0HND5H5ONDSUV:00000001"": started reading request body.
2025-06-07T13:13:17.8950909+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUV"", Request id ""0HND5H5ONDSUV:00000001"": done reading request body.
2025-06-07T13:13:17.8955611+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:13:17.8956149+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:13:17.8956383+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:13:17.8956549+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:17.8956814+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:17.8957638+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:13:17.8957942+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:13:17.8964066+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:13:17.8964832+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:17.8965247+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:17.8966472+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:13:17.8966785+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BadInputException: Ngy thanh ton khng hp l, vui lng s dng nh dng dd/MM/yyyy
   at Program.<>c.<<Main>$>b__0_49(DeleteTuitionPaymentRequest r) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
   at System.Linq.Enumerable.ListSelectIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.ListSelectIterator`2.ToList()
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 399
--- End of stack trace from previous location ---
   at Program.<>c.<<<Main>$>b__0_18>d.MoveNext() in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api/Program.cs:line 409
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass101_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-07T13:13:17.8995281+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 400 in 4.5536 ms
2025-06-07T13:13:17.8995880+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:13:17.8996127+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:13:17.8996322+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:13:17.8996580+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 400 null "application/problem+json" 4.943ms
2025-06-07T13:13:17.8996869+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUV"" disconnecting.
2025-06-07T13:13:17.8996979+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUV"" stopped.
2025-06-07T13:13:17.8997090+07:00 [DBG] (///) Connection id ""0HND5H5ONDSUV"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:14:36.2344911+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV0"" accepted.
2025-06-07T13:14:36.2345630+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV0"" started.
2025-06-07T13:14:36.2346583+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:14:36.2347906+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:14:36.2348253+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:14:36.2348546+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:14:36.2348957+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:14:36.2349194+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:14:36.2354809+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:14:36.2357830+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:14:36.2358230+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:14:36.2359070+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:36.2359320+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:36.2359943+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:14:36.2360189+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:14:36.2360396+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:14:36.2360746+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:14:36.2373034+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:14:36.2374955+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:36.2375343+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:14:36.2376021+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:36.2376510+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:14:36.2377630+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:14:36.2377986+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:14:36.2378809+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:14:36.2379494+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.0195 ms
2025-06-07T13:14:36.2380051+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:14:36.2380296+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:36.2380561+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:14:36.2380893+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.4249ms
2025-06-07T13:14:36.2381209+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV0"" disconnecting.
2025-06-07T13:14:36.2381396+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV0"" stopped.
2025-06-07T13:14:36.2381765+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV0"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:14:39.8367528+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV1"" accepted.
2025-06-07T13:14:39.8368263+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV1"" started.
2025-06-07T13:14:39.8369392+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:14:39.8370328+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:14:39.8370679+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:14:39.8370939+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:14:39.8371352+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:14:39.8371648+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:14:39.8375880+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:14:39.8378450+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:14:39.8378686+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:14:39.8378879+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:39.8379130+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:39.8379873+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:14:39.8380094+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:14:39.8380586+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:14:39.8380831+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:14:39.8391163+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:14:39.8393075+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:39.8393426+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:14:39.8394054+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:39.8394350+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:14:39.8394996+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:14:39.8395432+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:14:39.8396401+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:14:39.8397566+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.5349 ms
2025-06-07T13:14:39.8398032+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:14:39.8398275+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:14:39.8398437+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:14:39.8398941+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.9541ms
2025-06-07T13:14:39.8399242+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV1"" disconnecting.
2025-06-07T13:14:39.8399420+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV1"" stopped.
2025-06-07T13:14:39.8399733+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV1"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:15:36.9690789+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV2"" accepted.
2025-06-07T13:15:36.9694661+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV2"" started.
2025-06-07T13:15:36.9695789+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:15:36.9696759+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:15:36.9697132+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:15:36.9697379+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:15:36.9697776+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:15:36.9698035+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:15:36.9702825+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:15:36.9705930+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:15:36.9706267+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:15:36.9706450+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:36.9706736+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:36.9707994+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:15:36.9708207+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:15:36.9708462+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:15:36.9708764+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:15:36.9722348+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:15:36.9724493+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:36.9725057+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:15:36.9725776+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:36.9726110+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:15:36.9726911+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:15:36.9727254+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:15:36.9728200+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:15:36.9728849+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.0705 ms
2025-06-07T13:15:36.9729436+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:15:36.9729645+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:36.9729843+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:15:36.9730146+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.4324ms
2025-06-07T13:15:36.9730433+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV2"" disconnecting.
2025-06-07T13:15:36.9730568+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV2"" stopped.
2025-06-07T13:15:36.9730919+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV2"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:15:50.1075402+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV3"" accepted.
2025-06-07T13:15:50.1076173+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV3"" started.
2025-06-07T13:15:50.1077150+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:15:50.1078218+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:15:50.1078594+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:15:50.1078840+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:15:50.1079278+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:15:50.1079576+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:15:50.1086955+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:15:50.1090050+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:15:50.1090389+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:15:50.1090574+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:50.1090870+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:50.1091815+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:15:50.1092052+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:15:50.1092387+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:15:50.1092715+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:15:50.1105648+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:15:50.1109028+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:50.1110307+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:15:50.1110994+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:50.1111312+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:15:50.1112001+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:15:50.1112291+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:15:50.1113172+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:15:50.1113930+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 3.4213 ms
2025-06-07T13:15:50.1114492+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:15:50.1114728+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:15:50.1114924+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:15:50.1115250+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.8087ms
2025-06-07T13:15:50.1115564+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV3"" disconnecting.
2025-06-07T13:15:50.1115707+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV3"" stopped.
2025-06-07T13:15:50.1115973+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV3"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:17:52.0554997+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV4"" accepted.
2025-06-07T13:17:52.0556426+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV4"" started.
2025-06-07T13:17:52.0559414+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:17:52.0561564+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:17:52.0562090+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:17:52.0562447+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:17:52.0562892+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:17:52.0563211+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:17:52.0569652+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:17:52.0820080+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:17:52.0820932+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:17:52.0821201+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:52.0877771+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:52.0879920+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:17:52.0880203+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:52.0880489+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:52.0880823+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:17:52.0916939+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:17:52.0919761+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:52.0920335+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:17:52.0921112+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:52.0921413+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:52.0922134+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:17:52.0922396+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:17:52.0923281+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:17:52.0924126+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 36.0748 ms
2025-06-07T13:17:52.0924715+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:17:52.0924999+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:52.0925219+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:52.0925576+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 36.6137ms
2025-06-07T13:17:52.0926742+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV4"" disconnecting.
2025-06-07T13:17:52.0926946+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV4"" stopped.
2025-06-07T13:17:52.0927116+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV4"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:17:55.5441991+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV5"" accepted.
2025-06-07T13:17:55.5443044+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV5"" started.
2025-06-07T13:17:55.5445444+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:17:55.5447187+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:17:55.5447720+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:17:55.5448942+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:55.5449532+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:17:55.5449932+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:55.5457201+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:17:55.5460516+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:17:55.5460867+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:17:55.5461158+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:55.5461616+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:55.5462676+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:17:55.5462939+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:55.5463324+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:55.5463789+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:17:55.5475972+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:17:55.5477426+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:55.5477866+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:17:55.5478584+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:55.5478975+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:55.5479822+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:17:55.5480145+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:17:55.5481382+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:55.5482336+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 3.2273 ms
2025-06-07T13:17:55.5483057+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:17:55.5483317+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:55.5483561+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:55.5485145+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 3.9752ms
2025-06-07T13:17:55.5485665+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV5"" disconnecting.
2025-06-07T13:17:55.5485851+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV5"" stopped.
2025-06-07T13:17:55.5486155+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV5"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:17:58.9156294+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV6"" accepted.
2025-06-07T13:17:58.9157018+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV6"" started.
2025-06-07T13:17:58.9158129+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 70
2025-06-07T13:17:58.9160370+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:17:58.9160848+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:17:58.9161237+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:58.9161770+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:17:58.9162126+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:17:58.9162271+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:17:58.9162607+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:58.9163222+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV6"", Request id ""0HND5H5ONDSV6:00000001"": started reading request body.
2025-06-07T13:17:58.9163494+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV6"", Request id ""0HND5H5ONDSV6:00000001"": done reading request body.
2025-06-07T13:17:58.9169083+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:17:58.9169778+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:17:58.9170091+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:17:58.9170235+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:58.9170442+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:58.9171737+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:17:58.9172003+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:17:58.9176917+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __studentCode_0 && __academicYears_1.Contains(p.AcademicYear) && __semesters_2.Contains(p.Semester) && __paymentDates_3.Contains(p.PaymentDate))
    .ExecuteDelete()"'
2025-06-07T13:17:58.9436397+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition_payment AS t
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) && t.payment_date = ANY(@__paymentDates_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T13:17:58.9479509+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:17:58.9479941+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:17:58.9491244+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (1ms).
2025-06-07T13:17:58.9502414+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '06/07/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T13:17:59.0070426+07:00 [INF] (///) Executed DbCommand ("57"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object), @__paymentDates_3={ '06/07/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T13:17:59.0092496+07:00 [DBG] (///) Committing transaction.
2025-06-07T13:17:59.0119686+07:00 [DBG] (///) Committed transaction.
2025-06-07T13:17:59.0120180+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0121642+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:59.0124767+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:17:59.0126374+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:17:59.0127884+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T13:17:59.0144229+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:59.0144850+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 98.2778 ms
2025-06-07T13:17:59.0145289+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:17:59.0145485+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0145651+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:59.0146358+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 98.8307ms
2025-06-07T13:17:59.0146675+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV6"" disconnecting.
2025-06-07T13:17:59.0146791+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV6"" stopped.
2025-06-07T13:17:59.0146952+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV6"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:17:59.0197293+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV7"" accepted.
2025-06-07T13:17:59.0198207+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV7"" started.
2025-06-07T13:17:59.0199688+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:17:59.0200541+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:17:59.0200957+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:17:59.0201234+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:17:59.0201673+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:17:59.0201951+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:17:59.0206031+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:17:59.0208568+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:17:59.0208854+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:17:59.0209035+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0209358+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0210221+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:17:59.0210408+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:59.0210650+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:59.0210934+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:17:59.0222238+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:17:59.0223779+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0224414+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:17:59.0224889+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0225138+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:59.0225675+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:17:59.0225861+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:17:59.0226647+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:17:59.0227187+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.5241 ms
2025-06-07T13:17:59.0227608+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:17:59.0227797+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0227950+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:59.0228211+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.8539ms
2025-06-07T13:17:59.0228479+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV7"" disconnecting.
2025-06-07T13:17:59.0228602+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV7"" stopped.
2025-06-07T13:17:59.0228718+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV7"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:17:59.0282853+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV8"" accepted.
2025-06-07T13:17:59.0283582+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV8"" started.
2025-06-07T13:17:59.0284608+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:17:59.0285408+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:17:59.0285682+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:17:59.0285962+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:59.0286418+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:17:59.0286749+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:59.0292059+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:17:59.0295113+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:17:59.0295470+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:17:59.0295706+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0296041+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0297342+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:17:59.0297583+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:59.0297870+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:17:59.0298233+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:17:59.0306506+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:17:59.0307293+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0307557+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:17:59.0308090+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0308355+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:59.0308830+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:17:59.0309008+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:17:59.0309581+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:17:59.0310573+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.3382 ms
2025-06-07T13:17:59.0311015+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:17:59.0311181+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:17:59.0311333+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:17:59.0311629+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.7027ms
2025-06-07T13:17:59.0311885+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV8"" disconnecting.
2025-06-07T13:17:59.0311994+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV8"" stopped.
2025-06-07T13:17:59.0312161+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV8"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:04.2466112+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV9"" accepted.
2025-06-07T13:18:04.2466895+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV9"" started.
2025-06-07T13:18:04.2468343+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T13:18:04.2469636+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:04.2470093+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:04.2470577+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:04.2471235+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:04.2471660+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:04.2471829+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:04.2472197+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:04.2474240+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV9"", Request id ""0HND5H5ONDSV9:00000001"": started reading request body.
2025-06-07T13:18:04.2474648+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV9"", Request id ""0HND5H5ONDSV9:00000001"": done reading request body.
2025-06-07T13:18:04.2501035+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:04.2501589+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:04.2501752+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:04.2502213+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.2502463+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.2502993+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:04.2503324+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:04.2518462+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Tuition>()
    .Include(t => t.TuitionPayments)
    .Where(t => t.StudentCode == __8__locals1_studentCode_0 && t.AcademicYear == __academicYearRequest_1 && t.Semester == __semesterRequest_2)
    .FirstOrDefault()"'
2025-06-07T13:18:04.2544990+07:00 [DBG] (///) Including navigation: '"Tuition.TuitionPayments"'.
2025-06-07T13:18:04.2965153+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Tuition>(
    asyncEnumerable: SingleQueryingEnumerable.Create<Tuition>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Tuition.StudentCode (string) Required PK FK AfterSave:Throw MaxLength(10), 0], [Property: Tuition.AcademicYear (string) Required PK Index AfterSave:Throw MaxLength(9), 1], [Property: Tuition.Semester (int) Required PK Index AfterSave:Throw, 2], [Property: Tuition.TuitionFee (int) Required, 3] }
                1 -> 0
                2 -> 1
                3 -> 2
                4 -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 4], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 5], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 6], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 7], [Property: TuitionPayment.AmountPaid (int) Required, 8] }
                5 -> 4
                6 -> 5
                7 -> 6
                8 -> 7
            SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
            FROM 
            (
                SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.tuition_fee
                FROM tuition AS t
                WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__academicYearRequest_1)) && (t.semester == @__semesterRequest_2)
            ) AS t1
            LEFT JOIN tuition_payment AS t0 ON ((t1.student_code == t0.student_code) && (t1.academic_year == t0.academic_year)) && (t1.semester == t0.semester)
            ORDER BY t1.student_code ASC, t1.academic_year ASC, t1.semester ASC, t0.student_code ASC, t0.academic_year ASC, t0.semester ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            resultContext.Values == null ? 
            {
                Tuition entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Tuition instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Tuition);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Tuition.StudentCode, Tuition.AcademicYear, Tuition.Semester PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindPrimaryKey()], 
                        keyValues: new object[]
                        { 
                            try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetInt32(2) } catch (Exception) { ... }  
                        }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Tuition)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]: 
                                {
                                    return 
                                    {
                                        Tuition instance;
                                        instance = new Tuition();
                                        instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                        instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                        instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                        instance.<TuitionFee>k__BackingField = try { dataReader.GetInt32(3) } catch (Exception) { ... } ;
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Tuition | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Tuition)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                resultContext.Values = new object[]{ entity };
                ShaperProcessingExpressionVisitor.InitializeIncludeCollection<Tuition, Tuition>(
                    collectionId: 0, 
                    queryContext: queryContext, 
                    dbDataReader: dataReader, 
                    resultCoordinator: resultCoordinator, 
                    entity: (Tuition)(resultContext.Values[0]), 
                    parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                    { 
                        try { dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { dataReader.GetString(1) } catch (Exception) { ... } , 
                        (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                    }], 
                    navigation: [LIFTABLE Constant: Navigation: Tuition.TuitionPayments (ICollection<TuitionPayment>) Collection ToDependent TuitionPayment Inverse: Tuition | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\")], 
                    clrCollectionAccessor: [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{4} => namelessParameter{4}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()], 
                    trackingQuery: True, 
                    setLoaded: True);
            } : default(void);
            ShaperProcessingExpressionVisitor.PopulateIncludeCollection<Tuition, TuitionPayment>(
                collectionId: 0, 
                queryContext: queryContext, 
                dbDataReader: dataReader, 
                resultCoordinator: resultCoordinator, 
                parentIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                outerIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.GetString(0) } catch (Exception) { ... } , 
                    try { dataReader.GetString(1) } catch (Exception) { ... } , 
                    (object)try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... }  
                }], 
                selfIdentifier: [LIFTABLE Constant: Func<QueryContext, DbDataReader, object[]> | Resolver: _ => (queryContext, dataReader) => new object[]
                { 
                    try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } , 
                    try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(6) ? default(int?) : (int?)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                    (object)try { dataReader.IsDBNull(7) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                }], 
                parentIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                outerIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right 
                }], 
                selfIdentifierValueComparers: [LIFTABLE Constant: Func<object, object, bool>[] { Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool>, Func<object, object, bool> } | Resolver: _ => new Func<object, object, bool>[]
                { 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (string)left == (string)right, 
                    (left, right) => left == null ? right == null : right != null && (int)left == (int)right, 
                    (left, right) => left == null ? right == null : right != null && ((DateOnly)left).Equals((DateOnly)right) 
                }], 
                innerShaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
                {
                    TuitionPayment entity;
                    entity = 
                    {
                        MaterializationContext materializationContext2;
                        IEntityType entityType2;
                        TuitionPayment instance2;
                        InternalEntityEntry entry2;
                        bool hasNullKey2;
                        materializationContext2 = new MaterializationContext(
                            [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                            queryContext.Context
                        );
                        instance2 = default(TuitionPayment);
                        entry2 = queryContext.TryGetEntry(
                            key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                            keyValues: new object[]
                            { 
                                try { dataReader.IsDBNull(4) ? default(object) : (object)dataReader.GetString(4) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(5) ? default(object) : (object)dataReader.GetString(5) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(6) ? default(object) : (object)dataReader.GetInt32(6) } catch (Exception) { ... } , 
                                try { dataReader.IsDBNull(7) ? default(object) : (object)dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... }  
                            }, 
                            throwOnNullKey: False, 
                            hasNullKey: hasNullKey2);
                        !(hasNullKey2) ? entry2 != default(InternalEntityEntry) ? 
                        {
                            entityType2 = entry2.EntityType;
                            return instance2 = (TuitionPayment)entry2.Entity;
                        } : 
                        {
                            ISnapshot shadowSnapshot2;
                            shadowSnapshot2 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                            entityType2 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{5} => namelessParameter{5}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                            instance2 = switch (entityType2)
                            {
                                case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{6} => namelessParameter{6}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                                    {
                                        return 
                                        {
                                            TuitionPayment instance;
                                            instance = new TuitionPayment();
                                            instance.<StudentCode>k__BackingField = try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } ;
                                            instance.<AcademicYear>k__BackingField = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
                                            instance.<Semester>k__BackingField = try { dataReader.IsDBNull(6) ? default(int) : dataReader.GetInt32(6) } catch (Exception) { ... } ;
                                            instance.<PaymentDate>k__BackingField = try { dataReader.IsDBNull(7) ? default(DateOnly) : dataReader.GetFieldValue<DateOnly>(7) } catch (Exception) { ... } ;
                                            instance.<AmountPaid>k__BackingField = try { dataReader.IsDBNull(8) ? default(int) : dataReader.GetInt32(8) } catch (Exception) { ... } ;
                                            (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                                context: materializationContext2.Context, 
                                                entity: instance, 
                                                queryTrackingBehavior: TrackAll, 
                                                structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{7} => namelessParameter{7}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                            return instance;
                                        }}
                                default: 
                                    default(TuitionPayment)
                            }
                            ;
                            entry2 = entityType2 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                                entityType: entityType2, 
                                entity: instance2, 
                                snapshot: shadowSnapshot2);
                            return instance2;
                        } : default(void);
                        return instance2;
                    };
                    return entity;
                }, 
                inverseNavigation: [LIFTABLE Constant: Navigation: TuitionPayment.Tuition (Tuition) ToPrincipal Tuition Inverse: TuitionPayments | Resolver: namelessParameter{8} => namelessParameter{8}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindNavigation(\"Tuition\")], 
                fixup: (namelessParameter{9}, namelessParameter{10}) => 
                {
                    [LIFTABLE Constant: ClrICollectionAccessor<Tuition, ICollection<TuitionPayment>, TuitionPayment> | Resolver: namelessParameter{11} => namelessParameter{11}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.Tuition\").FindNavigation(\"TuitionPayments\").GetCollectionAccessor()].Add(
                        entity: namelessParameter{9}, 
                        value: namelessParameter{10}, 
                        forMaterialization: True);
                    return namelessParameter{10}.<Tuition>k__BackingField = namelessParameter{9};
                }, 
                trackingQuery: True);
            return IsTrue(resultCoordinator.ResultReady)
             ? (Tuition)(resultContext.Values[0]) : default(Tuition);
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T13:18:04.2984430+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:04.2984801+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.2985174+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.2985553+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T13:18:04.2995742+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T13:18:04.3195744+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T13:18:04.3355374+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.3356103+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 35ms reading results.
2025-06-07T13:18:04.3359264+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2 && p.PaymentDate == __paymentDate_3)
    .FirstOrDefault()"'
2025-06-07T13:18:04.3391997+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TuitionPayment>(
    asyncEnumerable: SingleQueryingEnumerable.Create<TuitionPayment>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: TuitionPayment.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: TuitionPayment.AcademicYear (string) Required PK FK Index AfterSave:Throw MaxLength(9), 1], [Property: TuitionPayment.Semester (int) Required PK FK Index AfterSave:Throw, 2], [Property: TuitionPayment.PaymentDate (DateOnly) Required PK Index AfterSave:Throw ValueGenerated.OnAdd, 3], [Property: TuitionPayment.AmountPaid (int) Required, 4] }
            SELECT TOP(1) t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
            FROM tuition_payment AS t
            WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            TuitionPayment entity;
            entity = 
            {
                MaterializationContext materializationContext1;
                IEntityType entityType1;
                TuitionPayment instance1;
                InternalEntityEntry entry1;
                bool hasNullKey1;
                materializationContext1 = new MaterializationContext(
                    [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                    queryContext.Context
                );
                instance1 = default(TuitionPayment);
                entry1 = queryContext.TryGetEntry(
                    key: [LIFTABLE Constant: Key: TuitionPayment.StudentCode, TuitionPayment.AcademicYear, TuitionPayment.Semester, TuitionPayment.PaymentDate PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\").FindPrimaryKey()], 
                    keyValues: new object[]
                    { 
                        try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetString(1) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetInt32(2) } catch (Exception) { ... } , 
                        try { (object)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... }  
                    }, 
                    throwOnNullKey: True, 
                    hasNullKey: hasNullKey1);
                !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                {
                    entityType1 = entry1.EntityType;
                    return instance1 = (TuitionPayment)entry1.Entity;
                } : 
                {
                    ISnapshot shadowSnapshot1;
                    shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                    entityType1 = [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")];
                    instance1 = switch (entityType1)
                    {
                        case [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]: 
                            {
                                return 
                                {
                                    TuitionPayment instance;
                                    instance = new TuitionPayment();
                                    instance.<StudentCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                    instance.<AcademicYear>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                    instance.<Semester>k__BackingField = try { dataReader.GetInt32(2) } catch (Exception) { ... } ;
                                    instance.<PaymentDate>k__BackingField = try { dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                    instance.<AmountPaid>k__BackingField = try { dataReader.GetInt32(4) } catch (Exception) { ... } ;
                                    (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                        context: materializationContext1.Context, 
                                        entity: instance, 
                                        queryTrackingBehavior: TrackAll, 
                                        structuralType: [LIFTABLE Constant: EntityType: TuitionPayment | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"TuitionService.Domain.Entity.TuitionPayment\")]) : default(void);
                                    return instance;
                                }}
                        default: 
                            default(TuitionPayment)
                    }
                    ;
                    entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                        entityType: entityType1, 
                        entity: instance1, 
                        snapshot: shadowSnapshot1);
                    return instance1;
                } : default(void);
                return instance1;
            };
            return entity;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T13:18:04.3404083+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:04.3404340+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.3406149+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.3406709+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T13:18:04.3422507+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T13:18:04.3426038+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.3426590+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:04.3433247+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2)
    .Sum(p => p.AmountPaid)"'
2025-06-07T13:18:04.3448844+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: SingleQueryingEnumerable.Create<int>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT CAST(sum(t.amount_paid) AS integer)
            FROM tuition_payment AS t
            WHERE ((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            return (int)value1;
        }, 
        contextType: TuitionService.Domain.TuitionDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True), 
    cancellationToken: queryContext.CancellationToken)"'
2025-06-07T13:18:04.3454005+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:04.3454257+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.3454422+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.3454724+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T13:18:04.3463007+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T13:18:04.3463706+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.3463957+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:04.3785529+07:00 [DBG] (///) The navigation '"TuitionPayment"."Tuition"' for entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' was detected as changed.
2025-06-07T13:18:04.3814399+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T13:18:04.3832642+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:04.3845544+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:04.3900384+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T13:18:04.4309205+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-07T13:18:04.4330322+07:00 [DBG] (///) Created transaction savepoint.
2025-06-07T13:18:04.4343428+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:04.4343673+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.4343912+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.4344546+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T13:18:04.4359007+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/07/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='8508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T13:18:04.4376750+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4377133+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T13:18:04.4394644+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-07T13:18:04.4412011+07:00 [DBG] (///) Released transaction savepoint.
2025-06-07T13:18:04.4472681+07:00 [DBG] (///) The '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T13:18:04.4485353+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T13:18:04.4488185+07:00 [DBG] (///) Committing transaction.
2025-06-07T13:18:04.4586524+07:00 [DBG] (///) Committed transaction.
2025-06-07T13:18:04.4587378+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4587936+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:04.4590680+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:18:04.4592865+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:04.4593263+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:04.4594094+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 212.2326 ms
2025-06-07T13:18:04.4595633+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:04.4595976+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4596228+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:04.4596634+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 212.8289ms
2025-06-07T13:18:04.4597145+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV9"" disconnecting.
2025-06-07T13:18:04.4597335+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV9"" stopped.
2025-06-07T13:18:04.4598516+07:00 [DBG] (///) Connection id ""0HND5H5ONDSV9"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:04.4662250+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVA"" accepted.
2025-06-07T13:18:04.4663031+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVA"" started.
2025-06-07T13:18:04.4664284+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:04.4665259+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:04.4665628+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:04.4666000+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:04.4666460+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:04.4666777+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:04.4672435+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:04.4674583+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:04.4674817+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:04.4675401+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4675640+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4676121+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:04.4676264+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.4676406+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.4676644+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:04.4687770+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:04.4689556+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4689906+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:04.4690480+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4690741+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:04.4691727+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:04.4691915+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:04.4692611+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:04.4693125+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.6402 ms
2025-06-07T13:18:04.4693571+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:04.4693786+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4693951+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:04.4694214+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.993ms
2025-06-07T13:18:04.4694472+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVA"" disconnecting.
2025-06-07T13:18:04.4694629+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVA"" stopped.
2025-06-07T13:18:04.4694903+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVA"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:04.4753389+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVB"" accepted.
2025-06-07T13:18:04.4754064+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVB"" started.
2025-06-07T13:18:04.4755599+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:18:04.4756447+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:04.4756708+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:04.4756962+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:04.4757288+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:04.4757504+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:04.4761301+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:04.4763188+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:04.4763424+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:04.4763579+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4763773+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4764357+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:04.4764498+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.4764649+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:04.4764917+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:04.4772391+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:04.4773176+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4773440+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:04.4773839+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4774026+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:04.4774421+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:04.4774546+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:18:04.4775063+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:04.4775514+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 1.7991 ms
2025-06-07T13:18:04.4775887+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:04.4776037+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:04.4776834+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:04.4777100+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.1527ms
2025-06-07T13:18:04.4777346+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVB"" disconnecting.
2025-06-07T13:18:04.4777468+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVB"" stopped.
2025-06-07T13:18:04.4777678+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVB"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:08.5781038+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVC"" accepted.
2025-06-07T13:18:08.5781660+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVC"" started.
2025-06-07T13:18:08.5784796+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T13:18:08.5785720+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:08.5785980+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:08.5786236+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:08.5786600+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:08.5787123+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:08.5787201+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:08.5787424+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:08.5787838+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVC"", Request id ""0HND5H5ONDSVC:00000001"": started reading request body.
2025-06-07T13:18:08.5788608+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVC"", Request id ""0HND5H5ONDSVC:00000001"": done reading request body.
2025-06-07T13:18:08.5792594+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:08.5793225+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:08.5793528+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:08.5793704+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.5793952+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.5794565+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:08.5794823+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:08.5797416+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:08.5797664+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.5797874+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.5798169+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T13:18:08.5808520+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T13:18:08.5811550+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T13:18:08.5825039+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T13:18:08.5827667+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.5828106+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 1ms reading results.
2025-06-07T13:18:08.5830355+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:08.5830552+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.5831267+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.5831672+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T13:18:08.5840294+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T13:18:08.5841979+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.5842463+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:08.5849219+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<TuitionPayment>()
    .Where(p => p.StudentCode == __8__locals1_studentCode_0 && p.AcademicYear == __8__locals1_academicYear_1 && p.Semester == __semesterRequest_2 && p.PaymentDate == __paymentDate_3)
    .ExecuteUpdate(setters => setters.SetProperty<int>(
        propertyExpression: p => p.AmountPaid, 
        valueExpression: __money_Value_4))"'
2025-06-07T13:18:08.5956955+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        UPDATE tuition_payment AS t
        SET 
        t.amount_paid = @__money_Value_4
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        UPDATE tuition_payment AS t
        SET 
        t.amount_paid = @__money_Value_4
        SELECT 1
        FROM tuition_payment AS t
        WHERE (((t.student_code == @__8__locals1_studentCode_0) && (t.academic_year == @__8__locals1_academicYear_1)) && (t.semester == @__semesterRequest_2)) && (t.payment_date == @__paymentDate_3), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: BulkUpdate, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T13:18:08.5975879+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:18:08.5976475+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:08.5976785+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:08.5977950+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__money_Value_4='1000000', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T13:18:08.5986201+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__money_Value_4='1000000', @__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/07/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""UPDATE tuition_payment AS t
SET amount_paid = @__money_Value_4
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3"
2025-06-07T13:18:08.5987107+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:08.5987641+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:08.5988781+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T13:18:08.5989065+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 0 entities written to the database.
2025-06-07T13:18:08.5989332+07:00 [DBG] (///) Committing transaction.
2025-06-07T13:18:08.5996727+07:00 [DBG] (///) Committed transaction.
2025-06-07T13:18:08.5997183+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.5997525+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:08.5998203+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:18:08.5998981+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:08.5999199+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:08.5999793+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 21.2849 ms
2025-06-07T13:18:08.6000704+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:08.6000935+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6001134+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:08.6001458+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 21.6617ms
2025-06-07T13:18:08.6001922+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVC"" disconnecting.
2025-06-07T13:18:08.6002058+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVC"" stopped.
2025-06-07T13:18:08.6002348+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVC"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:08.6065706+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVD"" accepted.
2025-06-07T13:18:08.6066411+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVD"" started.
2025-06-07T13:18:08.6067466+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:08.6068287+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:08.6068578+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:08.6068848+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:08.6069227+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:08.6069484+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:08.6073819+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:08.6075842+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:08.6076090+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:08.6076277+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6076936+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6077418+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:08.6077575+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.6077714+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.6077946+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:08.6088963+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:08.6090660+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6090995+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:08.6091549+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6091890+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:08.6092545+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:08.6092992+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:08.6093736+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:08.6094264+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.4719 ms
2025-06-07T13:18:08.6094759+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:08.6094942+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6095103+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:08.6095397+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.7915ms
2025-06-07T13:18:08.6095647+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVD"" disconnecting.
2025-06-07T13:18:08.6095776+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVD"" stopped.
2025-06-07T13:18:08.6095985+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVD"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:08.6156938+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVE"" accepted.
2025-06-07T13:18:08.6157676+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVE"" started.
2025-06-07T13:18:08.6159250+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:18:08.6160145+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:08.6160462+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:08.6160741+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:08.6161133+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:08.6161411+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:08.6165681+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:08.6167563+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:08.6167814+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:08.6167991+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6168225+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6168838+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:08.6168978+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.6169159+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:08.6169441+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:08.6178750+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:08.6179642+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6179916+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:08.6180413+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6180628+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:08.6181095+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:08.6181273+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:18:08.6181889+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:08.6182385+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.0968 ms
2025-06-07T13:18:08.6182801+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:08.6183024+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:08.6183178+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:08.6183430+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.4678ms
2025-06-07T13:18:08.6183658+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVE"" disconnecting.
2025-06-07T13:18:08.6183794+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVE"" stopped.
2025-06-07T13:18:08.6183926+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:14.8501551+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVF"" accepted.
2025-06-07T13:18:14.8502338+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVF"" started.
2025-06-07T13:18:14.8503325+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 44
2025-06-07T13:18:14.8504213+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:14.8504502+07:00 [DBG] (///) Endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:14.8504719+07:00 [DBG] (///) Request matched endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:14.8505789+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:14.8506091+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:14.8506181+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:14.8506419+07:00 [INF] (///) Executing endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:14.8506851+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVF"", Request id ""0HND5H5ONDSVF:00000001"": started reading request body.
2025-06-07T13:18:14.8507004+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVF"", Request id ""0HND5H5ONDSVF:00000001"": done reading request body.
2025-06-07T13:18:14.8510941+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:14.8511365+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:14.8511609+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:14.8511743+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8511988+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8512552+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:14.8512764+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:14.8514573+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:14.8514788+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8514953+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8515260+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T13:18:14.8524093+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__academicYearRequest_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t1.student_code, t1.academic_year, t1.semester, t1.tuition_fee, t0.student_code, t0.academic_year, t0.semester, t0.payment_date, t0.amount_paid
FROM (
    SELECT t.student_code, t.academic_year, t.semester, t.tuition_fee
    FROM tuition AS t
    WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__academicYearRequest_1 AND t.semester = @__semesterRequest_2
    LIMIT 1
) AS t1
LEFT JOIN tuition_payment AS t0 ON t1.student_code = t0.student_code AND t1.academic_year = t0.academic_year AND t1.semester = t0.semester
ORDER BY t1.student_code, t1.academic_year, t1.semester, t0.student_code, t0.academic_year, t0.semester"
2025-06-07T13:18:14.8525715+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T13:18:14.8527578+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/07/2025}"'.
2025-06-07T13:18:14.8528028+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8528291+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:14.8530048+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:14.8530219+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8530395+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8530674+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/04/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T13:18:14.8535928+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2', @__paymentDate_3='06/04/2025' (DbType = Date)"], CommandType='Text', CommandTimeout='30']"
""SELECT t.student_code, t.academic_year, t.semester, t.payment_date, t.amount_paid
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2 AND t.payment_date = @__paymentDate_3
LIMIT 1"
2025-06-07T13:18:14.8536459+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8536625+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:14.8538098+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:14.8538271+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8538386+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8538541+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T13:18:14.8543114+07:00 [INF] (///) Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_studentCode_0='N22DCCN888', @__8__locals1_academicYear_1='2024-2025', @__semesterRequest_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT COALESCE(sum(t.amount_paid), 0)::int
FROM tuition_payment AS t
WHERE t.student_code = @__8__locals1_studentCode_0 AND t.academic_year = @__8__locals1_academicYear_1 AND t.semester = @__semesterRequest_2"
2025-06-07T13:18:14.8543726+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8543928+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:14.8552840+07:00 [DBG] (///) The navigation '"TuitionPayment"."Tuition"' for entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/04/2025}"' was detected as changed.
2025-06-07T13:18:14.8553852+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/04/2025}"'.
2025-06-07T13:18:14.8554171+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:14.8554329+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:14.8554990+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T13:18:14.8558514+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-07T13:18:14.8566479+07:00 [DBG] (///) Created transaction savepoint.
2025-06-07T13:18:14.8567089+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:14.8567356+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8567692+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8568187+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/04/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='7508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T13:18:14.8578704+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='06/04/2025' (DbType = Date), @p2='2', @p3='N22DCCN888' (Nullable = false), @p4='7508544'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition_payment (academic_year, payment_date, semester, student_code, amount_paid)
VALUES (@p0, @p1, @p2, @p3, @p4);"
2025-06-07T13:18:14.8580847+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8581343+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:14.8582426+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-07T13:18:14.8586820+07:00 [DBG] (///) Released transaction savepoint.
2025-06-07T13:18:14.8588731+07:00 [DBG] (///) The '"TuitionPayment"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2, PaymentDate: 06/04/2025}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T13:18:14.8589189+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T13:18:14.8589418+07:00 [DBG] (///) Committing transaction.
2025-06-07T13:18:14.8683987+07:00 [DBG] (///) Committed transaction.
2025-06-07T13:18:14.8685486+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8686027+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:14.8686867+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:18:14.8687412+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:14.8687756+07:00 [INF] (///) Executed endpoint '"HTTP: PUT /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:14.8688544+07:00 [INF] (///) HTTP "PUT" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 18.2969 ms
2025-06-07T13:18:14.8689614+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:14.8689978+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8690217+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:14.8690622+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 0 null 18.7258ms
2025-06-07T13:18:14.8691024+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVF"" disconnecting.
2025-06-07T13:18:14.8691150+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVF"" stopped.
2025-06-07T13:18:14.8691254+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVF"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:14.8740149+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVG"" accepted.
2025-06-07T13:18:14.8740868+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVG"" started.
2025-06-07T13:18:14.8742002+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:14.8742868+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:14.8743169+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:14.8743445+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:14.8743807+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:14.8744040+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:14.8748010+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:14.8749983+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:14.8750196+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:14.8750331+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8750579+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8751240+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:14.8751687+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8751818+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8752042+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:14.8761846+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:14.8763091+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8763428+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:14.8763907+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8764134+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:14.8764679+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:14.8764873+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:14.8765823+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:14.8766357+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.2239 ms
2025-06-07T13:18:14.8766797+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:14.8766983+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8767149+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:14.8767402+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.5472ms
2025-06-07T13:18:14.8767661+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVG"" disconnecting.
2025-06-07T13:18:14.8767787+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVG"" stopped.
2025-06-07T13:18:14.8767897+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVG"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:14.8826953+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVH"" accepted.
2025-06-07T13:18:14.8827579+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVH"" started.
2025-06-07T13:18:14.8828537+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:18:14.8829378+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:14.8829717+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:14.8829986+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:14.8830361+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:14.8830630+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:14.8834925+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:14.8836855+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:14.8837085+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:14.8837253+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8837518+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8838201+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:14.8838388+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8838551+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:14.8838835+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:14.8847224+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:14.8848532+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8848864+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:14.8849379+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8849613+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:14.8850160+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:14.8850343+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:18:14.8851056+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:14.8851661+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.0921 ms
2025-06-07T13:18:14.8852101+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:14.8852317+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:14.8852471+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:14.8853497+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.4967ms
2025-06-07T13:18:14.8853827+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVH"" disconnecting.
2025-06-07T13:18:14.8854023+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVH"" stopped.
2025-06-07T13:18:14.8854194+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVH"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:19.9530035+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVI"" accepted.
2025-06-07T13:18:19.9530694+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVI"" started.
2025-06-07T13:18:19.9531786+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" 139
2025-06-07T13:18:19.9532740+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:19.9533092+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:19.9533351+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:19.9534164+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:19.9534456+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:19.9534532+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:19.9534786+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:19.9535206+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVI"", Request id ""0HND5H5ONDSVI:00000001"": started reading request body.
2025-06-07T13:18:19.9535375+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVI"", Request id ""0HND5H5ONDSVI:00000001"": done reading request body.
2025-06-07T13:18:19.9539413+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:19.9539836+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:19.9540025+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:19.9540176+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9540447+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9541023+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:19.9541249+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-07T13:18:19.9543188+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:18:19.9543394+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:19.9543652+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:19.9544862+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/07/2025', '06/04/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T13:18:19.9554459+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '2', '2' } (DbType = Object), @__paymentDates_3={ '06/07/2025', '06/04/2025' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2) AND t.payment_date = ANY (@__paymentDates_3)"
2025-06-07T13:18:19.9555316+07:00 [DBG] (///) Committing transaction.
2025-06-07T13:18:19.9636960+07:00 [DBG] (///) Committed transaction.
2025-06-07T13:18:19.9637895+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9638428+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:19.9639425+07:00 [DBG] (///) Disposing transaction.
2025-06-07T13:18:19.9640575+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:19.9640931+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T13:18:19.9642436+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:19.9643339+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 10.8675 ms
2025-06-07T13:18:19.9644008+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:19.9644338+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9644626+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:19.9645021+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 11.3213ms
2025-06-07T13:18:19.9645436+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVI"" disconnecting.
2025-06-07T13:18:19.9645563+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVI"" stopped.
2025-06-07T13:18:19.9645876+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVI"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:19.9716186+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVJ"" accepted.
2025-06-07T13:18:19.9716820+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVJ"" started.
2025-06-07T13:18:19.9717922+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:19.9718750+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:19.9719474+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:19.9719759+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:19.9720174+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:19.9720439+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:19.9724825+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:19.9726987+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:19.9727254+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:19.9727411+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9727613+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9728388+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:19.9728560+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:19.9728708+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:19.9729018+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:19.9742213+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:19.9744560+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9744890+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:19.9745486+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9745778+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:19.9746321+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:19.9746558+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:19.9747347+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:19.9747960+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.7474 ms
2025-06-07T13:18:19.9748441+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:19.9748675+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9748830+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:19.9749820+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.1158ms
2025-06-07T13:18:19.9750148+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVJ"" disconnecting.
2025-06-07T13:18:19.9750303+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVJ"" stopped.
2025-06-07T13:18:19.9750489+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVJ"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:19.9823792+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVK"" accepted.
2025-06-07T13:18:19.9824396+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVK"" started.
2025-06-07T13:18:19.9825424+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:18:19.9826265+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:19.9826565+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:19.9826862+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:19.9827238+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:19.9827467+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:19.9831724+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:19.9834137+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:19.9834392+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:19.9834585+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9834827+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9835434+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:19.9835623+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:19.9835755+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:19.9836026+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:19.9844186+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:19.9845084+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9845361+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:19.9845845+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9846231+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:19.9846945+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:19.9847114+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:18:19.9847676+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:19.9848213+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 2.0686 ms
2025-06-07T13:18:19.9848644+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:19.9848844+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:19.9848983+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:19.9849240+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.3822ms
2025-06-07T13:18:19.9849497+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVK"" disconnecting.
2025-06-07T13:18:19.9849615+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVK"" stopped.
2025-06-07T13:18:19.9849743+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVK"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:24.1912509+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVL"" accepted.
2025-06-07T13:18:24.1913319+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVL"" started.
2025-06-07T13:18:24.1914458+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:18:24.1915463+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:18:24.1915832+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:18:24.1916193+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:18:24.1916638+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:24.1916945+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:18:24.1925549+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:24.1928433+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:24.1928746+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:24.1928933+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1929093+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1929925+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:24.1930110+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.1930200+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.1930425+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:18:24.1941680+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:18:24.1943410+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1943797+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:24.1944488+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1944704+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:24.1947624+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1947956+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1948712+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:24.1948889+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.1949045+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.1949313+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:18:24.1958247+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:18:24.1959710+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1960010+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:24.1960667+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1960871+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:24.1961720+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:24.1962023+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:18:24.1962992+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:18:24.1963664+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 4.6710 ms
2025-06-07T13:18:24.1964184+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:24.1964429+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.1965574+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:24.1965963+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 5.149ms
2025-06-07T13:18:24.1966326+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVL"" disconnecting.
2025-06-07T13:18:24.1966491+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVL"" stopped.
2025-06-07T13:18:24.1966735+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVL"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:24.2046744+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVM"" accepted.
2025-06-07T13:18:24.2047515+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVM"" started.
2025-06-07T13:18:24.2048633+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:18:24.2049483+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:18:24.2049802+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:18:24.2050083+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:18:24.2050502+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:24.2050791+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:18:24.2057279+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:24.2059874+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:24.2060183+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:24.2060341+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2060528+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2061266+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:24.2061452+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.2061565+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.2061862+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:18:24.2070089+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:18:24.2071604+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2072015+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:24.2072635+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2072833+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:24.2075205+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2075483+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2076153+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:24.2076314+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.2076466+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:24.2076685+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:18:24.2085747+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:18:24.2087145+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2087471+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:24.2088079+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2088259+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:24.2088944+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:24.2089191+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:18:24.2090218+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:18:24.2090921+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 4.0091 ms
2025-06-07T13:18:24.2091488+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:24.2091779+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:24.2092022+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:24.2092329+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 4.3677ms
2025-06-07T13:18:24.2092627+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVM"" disconnecting.
2025-06-07T13:18:24.2092785+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVM"" stopped.
2025-06-07T13:18:24.2093102+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVM"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:25.5385456+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVN"" accepted.
2025-06-07T13:18:25.5386030+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVN"" started.
2025-06-07T13:18:25.5387173+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:25.5388606+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:25.5388857+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:25.5389137+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:25.5389549+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:25.5389786+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:25.5393744+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:25.5395865+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:25.5396147+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:25.5396306+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5396445+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5397093+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:25.5397268+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:25.5397405+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:25.5397585+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:25.5410299+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:25.5412676+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5413058+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:25.5413652+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5413902+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:25.5414492+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:25.5414719+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:25.5415486+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:25.5416125+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.6218 ms
2025-06-07T13:18:25.5417232+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:25.5417483+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5417654+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:25.5417922+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.0738ms
2025-06-07T13:18:25.5418211+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVN"" disconnecting.
2025-06-07T13:18:25.5418352+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVN"" stopped.
2025-06-07T13:18:25.5418599+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVN"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:25.5468588+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVO"" accepted.
2025-06-07T13:18:25.5469555+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVO"" started.
2025-06-07T13:18:25.5470834+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:25.5471646+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:25.5471914+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:25.5472179+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:25.5473006+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:25.5473238+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:25.5477215+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:25.5479214+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:25.5479445+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:25.5479639+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5479772+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5480396+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:25.5480572+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:25.5480680+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:25.5480863+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:25.5492098+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:25.5493882+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5494163+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:25.5494723+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5494938+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:25.5495515+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:25.5495744+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:25.5496584+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:25.5497222+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.3880 ms
2025-06-07T13:18:25.5498010+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:25.5498262+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:25.5498466+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:25.5498736+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.7909ms
2025-06-07T13:18:25.5499845+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVO"" disconnecting.
2025-06-07T13:18:25.5500088+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVO"" stopped.
2025-06-07T13:18:25.5500308+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVO"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:26.7536949+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVP"" accepted.
2025-06-07T13:18:26.7537701+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVP"" started.
2025-06-07T13:18:26.7539031+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:18:26.7540229+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:26.7540647+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:18:26.7541042+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:26.7541561+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:26.7541942+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:26.7545552+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:26.7547728+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:26.7547968+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:26.7548078+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:26.7548187+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:26.7548712+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:26.7548860+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:26.7548978+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:26.7549197+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:26.7556618+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:26.7557376+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:26.7557616+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:26.7558079+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:26.7558245+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:26.7558672+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:26.7558823+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:18:26.7559382+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:26.7559888+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 1.8064 ms
2025-06-07T13:18:26.7560302+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:26.7560485+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:26.7560634+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:26.7560902+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 2.191ms
2025-06-07T13:18:26.7561145+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVP"" disconnecting.
2025-06-07T13:18:26.7561275+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVP"" stopped.
2025-06-07T13:18:26.7561454+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVP"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:30.8734052+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVQ"" accepted.
2025-06-07T13:18:30.8734789+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVQ"" started.
2025-06-07T13:18:30.8735907+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:30.8736744+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:30.8737026+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:30.8737292+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:30.8737680+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:30.8737948+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:30.8744500+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:30.8747224+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:30.8747566+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:30.8747742+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8747917+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8748900+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:30.8749092+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:30.8749237+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:30.8749449+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:30.8762034+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:30.8764045+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8764359+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:30.8765252+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8765450+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:30.8766005+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:30.8766213+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:30.8767045+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:30.8767664+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.9645 ms
2025-06-07T13:18:30.8768163+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:30.8768393+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8768555+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:30.8768851+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.2967ms
2025-06-07T13:18:30.8769124+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVQ"" disconnecting.
2025-06-07T13:18:30.8769281+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVQ"" stopped.
2025-06-07T13:18:30.8769679+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVQ"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:30.8821046+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVR"" accepted.
2025-06-07T13:18:30.8821782+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVR"" started.
2025-06-07T13:18:30.8823497+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:30.8826660+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:30.8827158+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:30.8827629+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:30.8828290+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:30.8828632+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:30.8835648+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:30.8838164+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:30.8838512+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:30.8839317+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8839488+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8840084+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:30.8840284+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:30.8840499+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:30.8840738+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:30.8852306+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:30.8854155+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8854436+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:30.8854958+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8855168+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:30.8856065+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:30.8856304+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:30.8857306+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:30.8858100+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.9426 ms
2025-06-07T13:18:30.8858916+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:30.8859277+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:30.8859488+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:30.8859896+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.6357ms
2025-06-07T13:18:30.8860269+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVR"" disconnecting.
2025-06-07T13:18:30.8860437+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVR"" stopped.
2025-06-07T13:18:30.8860809+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVR"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:43.1514455+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVS"" accepted.
2025-06-07T13:18:43.1515204+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVS"" started.
2025-06-07T13:18:43.1517965+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 43
2025-06-07T13:18:43.1518816+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:43.1519734+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:43.1520139+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:43.1520798+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:43.1521181+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:43.1521281+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:43.1521608+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:43.1522892+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVS"", Request id ""0HND5H5ONDSVS:00000001"": started reading request body.
2025-06-07T13:18:43.1523099+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVS"", Request id ""0HND5H5ONDSVS:00000001"": done reading request body.
2025-06-07T13:18:43.1545707+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:43.1547807+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Tuition>()
    .Where(t => t.StudentCode == __studentCode_0 && __academicYears_1.Contains(t.AcademicYear) && __semesters_2.Contains(t.Semester))
    .ExecuteDelete()"'
2025-06-07T13:18:43.1560077+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM tuition AS t
        SELECT 1
        FROM tuition AS t
        WHERE ((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM tuition AS t
        SELECT 1
        FROM tuition AS t
        WHERE ((t.student_code == @__studentCode_0) && t.academic_year = ANY(@__academicYears_1)) && t.semester = ANY(@__semesters_2), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: TuitionService.Domain.TuitionDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-07T13:18:43.1562737+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:18:43.1562997+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:43.1563131+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:43.1563255+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:43.1563766+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:43.1563926+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1564058+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1564850+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:18:43.1618733+07:00 [INF] (///) Executed DbCommand ("5"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:18:43.1619982+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1620248+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.1622058+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:43.1622297+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T13:18:43.1622986+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:43.1623581+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 10.2436 ms
2025-06-07T13:18:43.1624820+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:43.1625054+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1625210+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.1625429+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 null "application/json; charset=utf-8" 10.7477ms
2025-06-07T13:18:43.1625799+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVS"" disconnecting.
2025-06-07T13:18:43.1625933+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVS"" stopped.
2025-06-07T13:18:43.1626120+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVS"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:43.1684509+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVT"" accepted.
2025-06-07T13:18:43.1685289+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVT"" started.
2025-06-07T13:18:43.1686191+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 89
2025-06-07T13:18:43.1686930+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:43.1687100+07:00 [DBG] (///) Endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:43.1687352+07:00 [DBG] (///) Request matched endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:43.1687812+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:43.1688072+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:43.1688155+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:43.1688388+07:00 [INF] (///) Executing endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:43.1689484+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVT"", Request id ""0HND5H5ONDSVT:00000001"": started reading request body.
2025-06-07T13:18:43.1689659+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVT"", Request id ""0HND5H5ONDSVT:00000001"": done reading request body.
2025-06-07T13:18:43.1723877+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:43.1726493+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T13:18:43.1726870+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:43.1727084+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:43.1727687+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T13:18:43.1782714+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:43.1783579+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:43.1783752+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1783892+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1784465+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:43.1784623+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:43.1784779+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:43.1785044+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='1000000'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:18:43.1800832+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='1000000'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:18:43.1802103+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1802310+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:43.1802707+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1802838+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.1806764+07:00 [DBG] (///) The '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T13:18:43.1807108+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T13:18:43.1808411+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:43.1808655+07:00 [INF] (///) Executed endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:43.1809103+07:00 [INF] (///) HTTP "POST" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 12.1025 ms
2025-06-07T13:18:43.1809662+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:43.1809809+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.1809929+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.1810131+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 0 null 12.3957ms
2025-06-07T13:18:43.1810466+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVT"" disconnecting.
2025-06-07T13:18:43.1810594+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVT"" stopped.
2025-06-07T13:18:43.1810768+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVT"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:43.2605519+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVU"" accepted.
2025-06-07T13:18:43.2606132+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVU"" started.
2025-06-07T13:18:43.2607576+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:43.2608197+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:43.2608419+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:43.2608669+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:43.2608997+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:43.2609214+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:43.2612848+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:43.2614747+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:43.2614938+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:43.2615090+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2615238+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2615856+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:43.2616024+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:43.2616350+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:43.2616528+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:43.2626767+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:43.2627939+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2628137+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:43.2628502+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2628656+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.2629093+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:43.2629246+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:43.2629786+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:43.2630681+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.0978 ms
2025-06-07T13:18:43.2631020+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:43.2631163+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2631288+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.2631487+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.393ms
2025-06-07T13:18:43.2631755+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVU"" disconnecting.
2025-06-07T13:18:43.2631874+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVU"" stopped.
2025-06-07T13:18:43.2632027+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVU"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:43.2681413+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVV"" accepted.
2025-06-07T13:18:43.2682158+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVV"" started.
2025-06-07T13:18:43.2683013+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:43.2684079+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:43.2684313+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:43.2684509+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:43.2684835+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:43.2685040+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:43.2688337+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:43.2690212+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:43.2690398+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:43.2690527+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2690671+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2691237+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:43.2691367+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:43.2691477+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:43.2691686+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:43.2702392+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:43.2703588+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2703784+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:43.2704182+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2704362+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.2704789+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:43.2704951+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:43.2705676+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:43.2706088+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.1015 ms
2025-06-07T13:18:43.2706410+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:43.2706543+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:43.2706662+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:43.2707469+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.3876ms
2025-06-07T13:18:43.2707751+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVV"" disconnecting.
2025-06-07T13:18:43.2707889+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVV"" stopped.
2025-06-07T13:18:43.2708093+07:00 [DBG] (///) Connection id ""0HND5H5ONDSVV"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:46.5854582+07:00 [DBG] (///) Connection id ""0HND5H5ONDT00"" accepted.
2025-06-07T13:18:46.5855673+07:00 [DBG] (///) Connection id ""0HND5H5ONDT00"" started.
2025-06-07T13:18:46.5857339+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments""" - "application/json" null
2025-06-07T13:18:46.5858687+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments"'
2025-06-07T13:18:46.5859110+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments"'
2025-06-07T13:18:46.5859530+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:46.5860220+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:46.5860648+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:46.5867516+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:46.5872212+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:46.5872607+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:46.5872873+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:46.5873161+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:46.5873967+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:46.5874148+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:46.5874293+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:46.5874721+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='1'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:46.5881858+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='1'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:46.5882555+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:46.5882750+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:46.5883114+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:46.5883235+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:46.5883892+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:46.5884027+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:18:46.5884461+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:46.5884877+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments" responded 200 in 2.4481 ms
2025-06-07T13:18:46.5885182+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:46.5885299+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:46.5885381+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:46.5885580+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments""" - 200 null "application/json; charset=utf-8" 2.8404ms
2025-06-07T13:18:46.5885792+07:00 [DBG] (///) Connection id ""0HND5H5ONDT00"" disconnecting.
2025-06-07T13:18:46.5885905+07:00 [DBG] (///) Connection id ""0HND5H5ONDT00"" stopped.
2025-06-07T13:18:46.5886098+07:00 [DBG] (///) Connection id ""0HND5H5ONDT00"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:49.1285397+07:00 [DBG] (///) Connection id ""0HND5H5ONDT01"" accepted.
2025-06-07T13:18:49.1286021+07:00 [DBG] (///) Connection id ""0HND5H5ONDT01"" started.
2025-06-07T13:18:49.1286864+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:49.1287476+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:49.1287695+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:49.1287915+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:49.1288265+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:49.1288476+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:49.1291641+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:49.1293609+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:49.1293793+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:49.1293911+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1294049+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1294957+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:49.1295083+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:49.1295447+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:49.1295639+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:49.1306944+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:49.1308526+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1308736+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:49.1309161+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1309314+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:49.1309959+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:49.1310138+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:49.1310724+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:49.1311206+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.2696 ms
2025-06-07T13:18:49.1311550+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:49.1311824+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1311956+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:49.1312190+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.5303ms
2025-06-07T13:18:49.1312435+07:00 [DBG] (///) Connection id ""0HND5H5ONDT01"" disconnecting.
2025-06-07T13:18:49.1312562+07:00 [DBG] (///) Connection id ""0HND5H5ONDT01"" stopped.
2025-06-07T13:18:49.1312748+07:00 [DBG] (///) Connection id ""0HND5H5ONDT01"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:49.1359512+07:00 [DBG] (///) Connection id ""0HND5H5ONDT02"" accepted.
2025-06-07T13:18:49.1360179+07:00 [DBG] (///) Connection id ""0HND5H5ONDT02"" started.
2025-06-07T13:18:49.1362046+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:49.1362794+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:49.1363299+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:49.1363541+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:49.1363921+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:49.1364156+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:49.1367648+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:49.1369739+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:49.1369954+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:49.1370114+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1370269+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1370984+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:49.1371151+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:49.1371476+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:49.1371727+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:49.1382574+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:49.1384003+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1384301+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:49.1384732+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1384906+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:49.1385478+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:49.1385667+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:49.1386298+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:49.1386807+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.2617 ms
2025-06-07T13:18:49.1387718+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:49.1387875+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:49.1388019+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:49.1388242+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.6932ms
2025-06-07T13:18:49.1388499+07:00 [DBG] (///) Connection id ""0HND5H5ONDT02"" disconnecting.
2025-06-07T13:18:49.1388627+07:00 [DBG] (///) Connection id ""0HND5H5ONDT02"" stopped.
2025-06-07T13:18:49.1388800+07:00 [DBG] (///) Connection id ""0HND5H5ONDT02"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:52.4613887+07:00 [DBG] (///) Connection id ""0HND5H5ONDT03"" accepted.
2025-06-07T13:18:52.4614655+07:00 [DBG] (///) Connection id ""0HND5H5ONDT03"" started.
2025-06-07T13:18:52.4616735+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 43
2025-06-07T13:18:52.4617889+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:52.4618276+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:52.4618660+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:52.4619149+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:52.4619560+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:52.4619705+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:52.4620252+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:52.4620792+07:00 [DBG] (///) Connection id ""0HND5H5ONDT03"", Request id ""0HND5H5ONDT03:00000001"": started reading request body.
2025-06-07T13:18:52.4621050+07:00 [DBG] (///) Connection id ""0HND5H5ONDT03"", Request id ""0HND5H5ONDT03:00000001"": done reading request body.
2025-06-07T13:18:52.4627656+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:52.4629408+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:18:52.4629670+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:52.4629829+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:52.4629972+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:52.4630190+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:18:52.4630348+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4630494+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4631719+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '1' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:18:52.4730096+07:00 [INF] (///) Executed DbCommand ("10"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '1' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:18:52.4732024+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4732475+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.4733322+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:52.4733618+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T13:18:52.4734370+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:52.4735097+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 11.5562 ms
2025-06-07T13:18:52.4736092+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:52.4736265+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4736396+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.4736614+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 null "application/json; charset=utf-8" 11.9927ms
2025-06-07T13:18:52.4736913+07:00 [DBG] (///) Connection id ""0HND5H5ONDT03"" disconnecting.
2025-06-07T13:18:52.4737055+07:00 [DBG] (///) Connection id ""0HND5H5ONDT03"" stopped.
2025-06-07T13:18:52.4737265+07:00 [DBG] (///) Connection id ""0HND5H5ONDT03"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:52.4796782+07:00 [DBG] (///) Connection id ""0HND5H5ONDT04"" accepted.
2025-06-07T13:18:52.4797472+07:00 [DBG] (///) Connection id ""0HND5H5ONDT04"" started.
2025-06-07T13:18:52.4798627+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 90
2025-06-07T13:18:52.4799555+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:52.4799868+07:00 [DBG] (///) Endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:18:52.4800846+07:00 [DBG] (///) Request matched endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:52.4801271+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:52.4801623+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:18:52.4801762+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:18:52.4802193+07:00 [INF] (///) Executing endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:52.4802692+07:00 [DBG] (///) Connection id ""0HND5H5ONDT04"", Request id ""0HND5H5ONDT04:00000001"": started reading request body.
2025-06-07T13:18:52.4802890+07:00 [DBG] (///) Connection id ""0HND5H5ONDT04"", Request id ""0HND5H5ONDT04:00000001"": done reading request body.
2025-06-07T13:18:52.4807612+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:52.4809182+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 1}"'.
2025-06-07T13:18:52.4809470+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:52.4809656+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T13:18:52.4810603+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T13:18:52.4812840+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:52.4813050+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:52.4813161+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4813286+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4814233+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:52.4814356+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:52.4814466+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:52.4814672+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='1', @p2='N22DCCN888' (Nullable = false), @p3='85085442'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:18:52.4827827+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='1', @p2='N22DCCN888' (Nullable = false), @p3='85085442'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:18:52.4829767+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4830042+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:52.4830549+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4830746+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.4831916+07:00 [DBG] (///) The '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 1}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T13:18:52.4832187+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T13:18:52.4832604+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:52.4832875+07:00 [INF] (///) Executed endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:18:52.4833355+07:00 [INF] (///) HTTP "POST" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 3.1780 ms
2025-06-07T13:18:52.4833947+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:52.4834109+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.4834238+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.4834477+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 0 null 3.587ms
2025-06-07T13:18:52.4834790+07:00 [DBG] (///) Connection id ""0HND5H5ONDT04"" disconnecting.
2025-06-07T13:18:52.4834928+07:00 [DBG] (///) Connection id ""0HND5H5ONDT04"" stopped.
2025-06-07T13:18:52.4835117+07:00 [DBG] (///) Connection id ""0HND5H5ONDT04"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:52.5630731+07:00 [DBG] (///) Connection id ""0HND5H5ONDT05"" accepted.
2025-06-07T13:18:52.5631518+07:00 [DBG] (///) Connection id ""0HND5H5ONDT05"" started.
2025-06-07T13:18:52.5632637+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:52.5633863+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:52.5634096+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:52.5634294+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:52.5634650+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:52.5634897+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:52.5638505+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:52.5640600+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:52.5640860+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:52.5641067+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5641236+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5642142+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:52.5642344+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:52.5642467+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:52.5642980+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:52.5654240+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:52.5655585+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5655837+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:52.5656270+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5656450+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.5656991+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:52.5657176+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:52.5657777+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:52.5658242+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.3333 ms
2025-06-07T13:18:52.5659232+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:52.5659386+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5659514+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.5659737+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.7133ms
2025-06-07T13:18:52.5659971+07:00 [DBG] (///) Connection id ""0HND5H5ONDT05"" disconnecting.
2025-06-07T13:18:52.5660104+07:00 [DBG] (///) Connection id ""0HND5H5ONDT05"" stopped.
2025-06-07T13:18:52.5660273+07:00 [DBG] (///) Connection id ""0HND5H5ONDT05"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:52.5703930+07:00 [DBG] (///) Connection id ""0HND5H5ONDT06"" accepted.
2025-06-07T13:18:52.5704566+07:00 [DBG] (///) Connection id ""0HND5H5ONDT06"" started.
2025-06-07T13:18:52.5705511+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:52.5706257+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:52.5706484+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:52.5706702+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:52.5707065+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:52.5707308+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:52.5711165+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:52.5713473+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:52.5713693+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:52.5713821+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5713986+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5714648+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:52.5714809+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:52.5714920+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:52.5715118+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:52.5725522+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:52.5727069+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5727361+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:52.5727757+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5727931+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.5728397+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:52.5728578+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:52.5729125+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:52.5729807+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.2385 ms
2025-06-07T13:18:52.5730276+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:52.5730464+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:52.5730596+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:52.5731752+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.6258ms
2025-06-07T13:18:52.5732044+07:00 [DBG] (///) Connection id ""0HND5H5ONDT06"" disconnecting.
2025-06-07T13:18:52.5732178+07:00 [DBG] (///) Connection id ""0HND5H5ONDT06"" stopped.
2025-06-07T13:18:52.5732447+07:00 [DBG] (///) Connection id ""0HND5H5ONDT06"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:58.1049785+07:00 [DBG] (///) Connection id ""0HND5H5ONDT07"" accepted.
2025-06-07T13:18:58.1050420+07:00 [DBG] (///) Connection id ""0HND5H5ONDT07"" started.
2025-06-07T13:18:58.1051253+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments""" - "application/json" null
2025-06-07T13:18:58.1051923+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments"'
2025-06-07T13:18:58.1052144+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments"'
2025-06-07T13:18:58.1052372+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:58.1052701+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:58.1052926+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:58.1056387+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:58.1057992+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:58.1058170+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:58.1058303+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:58.1058410+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:58.1058961+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:58.1059111+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:58.1059244+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:58.1059634+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='1'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:58.1067149+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='1'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:18:58.1067797+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:58.1067995+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:58.1068397+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:58.1068519+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:58.1068906+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:58.1069064+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:18:58.1069434+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:18:58.1069836+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments" responded 200 in 1.6910 ms
2025-06-07T13:18:58.1070246+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:58.1070923+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:58.1071070+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:58.1071274+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/1/payments""" - 200 null "application/json; charset=utf-8" 2.0057ms
2025-06-07T13:18:58.1071514+07:00 [DBG] (///) Connection id ""0HND5H5ONDT07"" disconnecting.
2025-06-07T13:18:58.1071665+07:00 [DBG] (///) Connection id ""0HND5H5ONDT07"" stopped.
2025-06-07T13:18:58.1071845+07:00 [DBG] (///) Connection id ""0HND5H5ONDT07"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:59.8492081+07:00 [DBG] (///) Connection id ""0HND5H5ONDT08"" accepted.
2025-06-07T13:18:59.8492799+07:00 [DBG] (///) Connection id ""0HND5H5ONDT08"" started.
2025-06-07T13:18:59.8493810+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:59.8494522+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:59.8494816+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:59.8495120+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:59.8495589+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:59.8495897+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:59.8501442+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:59.8505130+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:59.8505464+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:59.8505651+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8505819+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8506710+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:59.8506949+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:59.8507083+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:59.8507342+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:59.8531051+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:59.8534339+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8534765+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:59.8535939+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8536330+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:59.8537087+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:59.8537388+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:59.8538403+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:59.8539106+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 4.3093 ms
2025-06-07T13:18:59.8539673+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:59.8539864+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8540051+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:59.8540336+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 4.6536ms
2025-06-07T13:18:59.8540720+07:00 [DBG] (///) Connection id ""0HND5H5ONDT08"" disconnecting.
2025-06-07T13:18:59.8540897+07:00 [DBG] (///) Connection id ""0HND5H5ONDT08"" stopped.
2025-06-07T13:18:59.8541989+07:00 [DBG] (///) Connection id ""0HND5H5ONDT08"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:18:59.8609717+07:00 [DBG] (///) Connection id ""0HND5H5ONDT09"" accepted.
2025-06-07T13:18:59.8610442+07:00 [DBG] (///) Connection id ""0HND5H5ONDT09"" started.
2025-06-07T13:18:59.8611882+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:18:59.8613489+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:59.8613791+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:18:59.8614052+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:59.8614442+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:18:59.8614696+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:59.8619189+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:18:59.8621735+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:18:59.8622121+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:18:59.8622811+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8622989+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8623569+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:18:59.8623727+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:59.8623881+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:18:59.8624112+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:59.8635177+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:18:59.8636416+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8636717+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:18:59.8637151+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8637613+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:59.8638129+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:18:59.8638338+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:18:59.8638942+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:18:59.8639467+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.4746 ms
2025-06-07T13:18:59.8639832+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:18:59.8640016+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:18:59.8640144+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:18:59.8640355+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.8571ms
2025-06-07T13:18:59.8640626+07:00 [DBG] (///) Connection id ""0HND5H5ONDT09"" disconnecting.
2025-06-07T13:18:59.8640762+07:00 [DBG] (///) Connection id ""0HND5H5ONDT09"" stopped.
2025-06-07T13:18:59.8640892+07:00 [DBG] (///) Connection id ""0HND5H5ONDT09"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:02.9100739+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0A"" accepted.
2025-06-07T13:19:02.9101684+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0A"" started.
2025-06-07T13:19:02.9103096+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 43
2025-06-07T13:19:02.9103920+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:02.9104133+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:02.9104342+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:02.9104710+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:02.9104982+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:19:02.9105064+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:19:02.9105317+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:02.9105811+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0A"", Request id ""0HND5H5ONDT0A:00000001"": started reading request body.
2025-06-07T13:19:02.9105961+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0A"", Request id ""0HND5H5ONDT0A:00000001"": done reading request body.
2025-06-07T13:19:02.9109848+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:02.9111286+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:19:02.9111482+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:02.9111651+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:02.9112176+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:19:02.9112381+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:19:02.9112493+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9112620+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9113383+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '1' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:19:02.9206093+07:00 [INF] (///) Executed DbCommand ("9"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '1' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:19:02.9207605+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9207965+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:02.9208758+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:02.9209004+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T13:19:02.9209687+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:02.9210988+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 10.5275 ms
2025-06-07T13:19:02.9211321+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:02.9211458+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9211612+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:02.9211822+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 null "application/json; charset=utf-8" 10.876ms
2025-06-07T13:19:02.9212106+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0A"" disconnecting.
2025-06-07T13:19:02.9212230+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0A"" stopped.
2025-06-07T13:19:02.9212385+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0A"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:02.9272645+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0B"" accepted.
2025-06-07T13:19:02.9273250+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0B"" started.
2025-06-07T13:19:02.9274468+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 87
2025-06-07T13:19:02.9275475+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:02.9276577+07:00 [DBG] (///) Endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:02.9276952+07:00 [DBG] (///) Request matched endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:02.9277457+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:02.9277817+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:19:02.9277966+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:19:02.9278299+07:00 [INF] (///) Executing endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:02.9278869+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0B"", Request id ""0HND5H5ONDT0B:00000001"": started reading request body.
2025-06-07T13:19:02.9279088+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0B"", Request id ""0HND5H5ONDT0B:00000001"": done reading request body.
2025-06-07T13:19:02.9283838+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:02.9285969+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 1}"'.
2025-06-07T13:19:02.9286298+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T13:19:02.9286566+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T13:19:02.9287065+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T13:19:02.9289247+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:02.9289497+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:02.9289646+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9289796+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9291340+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:02.9291514+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:02.9291712+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:02.9291974+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='1', @p2='N22DCCN888' (Nullable = false), @p3='85085'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:19:02.9305530+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='1', @p2='N22DCCN888' (Nullable = false), @p3='85085'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:19:02.9306520+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9306731+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:02.9307167+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9307346+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:02.9308368+07:00 [DBG] (///) The '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 1}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T13:19:02.9308663+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T13:19:02.9309465+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:02.9309696+07:00 [INF] (///) Executed endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:02.9310196+07:00 [INF] (///) HTTP "POST" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 3.2437 ms
2025-06-07T13:19:02.9310768+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:02.9310940+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:02.9311075+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:02.9311299+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 0 null 3.6888ms
2025-06-07T13:19:02.9311774+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0B"" disconnecting.
2025-06-07T13:19:02.9311909+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0B"" stopped.
2025-06-07T13:19:02.9312091+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0B"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:03.0264447+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0C"" accepted.
2025-06-07T13:19:03.0265076+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0C"" started.
2025-06-07T13:19:03.0266447+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:19:03.0267054+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:03.0267249+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:03.0267461+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:03.0267822+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:03.0268054+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:03.0271354+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:03.0273207+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:03.0273391+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:03.0273538+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0273704+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0274315+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:03.0274488+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:03.0274604+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:03.0274794+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:03.0285611+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:03.0286952+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0287208+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:03.0287645+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0287830+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:03.0288340+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:03.0288539+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:19:03.0289170+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:03.0290192+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.1600 ms
2025-06-07T13:19:03.0290596+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:03.0290771+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0290915+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:03.0291135+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.5169ms
2025-06-07T13:19:03.0291384+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0C"" disconnecting.
2025-06-07T13:19:03.0291534+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0C"" stopped.
2025-06-07T13:19:03.0291734+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0C"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:03.0343415+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0D"" accepted.
2025-06-07T13:19:03.0344025+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0D"" started.
2025-06-07T13:19:03.0344846+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:19:03.0345455+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:03.0345666+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:03.0345855+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:03.0346218+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:03.0347095+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:03.0350388+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:03.0352313+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:03.0352514+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:03.0352667+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0352826+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0353403+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:03.0353546+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:03.0353660+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:03.0353874+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:03.0365336+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:03.0366872+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0367138+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:03.0367551+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0367760+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:03.0368214+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:03.0368368+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:19:03.0369014+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:03.0369493+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.2994 ms
2025-06-07T13:19:03.0369867+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:03.0369987+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:03.0370092+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:03.0370295+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.5478ms
2025-06-07T13:19:03.0370559+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0D"" disconnecting.
2025-06-07T13:19:03.0370691+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0D"" stopped.
2025-06-07T13:19:03.0371174+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0D"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:07.7042221+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0E"" accepted.
2025-06-07T13:19:07.7043002+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0E"" started.
2025-06-07T13:19:07.7043854+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - "application/json" null
2025-06-07T13:19:07.7044554+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:19:07.7044773+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments"'
2025-06-07T13:19:07.7044964+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:19:07.7045846+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:07.7046075+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:19:07.7049808+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:07.7051683+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:07.7051903+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:07.7052044+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:07.7052161+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:07.7052687+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:07.7052821+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:07.7052947+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:07.7053143+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:19:07.7060278+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYear_1='2024-2025', @__semester_2='2'"], CommandType='Text', CommandTimeout='30']"
""SELECT t.payment_date, t.amount_paid::numeric
FROM tuition_payment AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = @__academicYear_1 AND t.semester = @__semester_2"
2025-06-07T13:19:07.7060964+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:07.7061140+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:07.7061515+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:07.7061679+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:07.7062080+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:07.7062219+07:00 [INF] (///) Writing value of type '"List`1"' as Json.
2025-06-07T13:19:07.7062624+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}/tuitions/{academicYear}/{semester}/payments"'
2025-06-07T13:19:07.7063024+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments" responded 200 in 1.6957 ms
2025-06-07T13:19:07.7063337+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:07.7063450+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:07.7063575+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:07.7063777+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions/2024-2025/2/payments""" - 200 null "application/json; charset=utf-8" 1.9947ms
2025-06-07T13:19:07.7063986+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0E"" disconnecting.
2025-06-07T13:19:07.7064096+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0E"" stopped.
2025-06-07T13:19:07.7064200+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0E"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:09.8993285+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0F"" accepted.
2025-06-07T13:19:09.8994120+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0F"" started.
2025-06-07T13:19:09.8995115+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:19:09.8995898+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:09.8996168+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:09.8996413+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:09.8996854+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:09.8997109+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:09.9001459+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:09.9004031+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:09.9004306+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:09.9004493+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9004692+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9005613+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:09.9005783+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:09.9005890+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:09.9006127+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:09.9020194+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:09.9022586+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9022892+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:09.9023387+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9023568+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:09.9024093+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:09.9024252+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:19:09.9024915+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:09.9025456+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.8313 ms
2025-06-07T13:19:09.9025826+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:09.9025973+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9026115+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:09.9026336+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.1269ms
2025-06-07T13:19:09.9026609+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0F"" disconnecting.
2025-06-07T13:19:09.9026740+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0F"" stopped.
2025-06-07T13:19:09.9027530+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0F"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:09.9074773+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0G"" accepted.
2025-06-07T13:19:09.9075571+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0G"" started.
2025-06-07T13:19:09.9077096+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:19:09.9078073+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:09.9078367+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:09.9078638+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:09.9079046+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:09.9079532+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:09.9083683+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:09.9085863+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:09.9086068+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:09.9086219+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9086363+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9086869+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:09.9087012+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:09.9087119+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:09.9087320+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:09.9097499+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:09.9098604+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9098841+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:09.9099257+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9099671+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:09.9100090+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:09.9100248+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:19:09.9100802+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:09.9101284+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.1973 ms
2025-06-07T13:19:09.9101637+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:09.9101781+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:09.9101925+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:09.9102119+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.5048ms
2025-06-07T13:19:09.9102358+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0G"" disconnecting.
2025-06-07T13:19:09.9102494+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0G"" stopped.
2025-06-07T13:19:09.9102650+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0G"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:12.3016353+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0H"" accepted.
2025-06-07T13:19:12.3017050+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0H"" started.
2025-06-07T13:19:12.3017974+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 43
2025-06-07T13:19:12.3019266+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:12.3019489+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:12.3019681+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:12.3020025+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:12.3020273+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:19:12.3020332+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:19:12.3020568+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:12.3021851+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0H"", Request id ""0HND5H5ONDT0H:00000001"": started reading request body.
2025-06-07T13:19:12.3022047+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0H"", Request id ""0HND5H5ONDT0H:00000001"": done reading request body.
2025-06-07T13:19:12.3026765+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:12.3028357+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:19:12.3028553+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:12.3028677+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:12.3028807+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:19:12.3029037+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:19:12.3029716+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3029859+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3030669+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:19:12.3129596+07:00 [INF] (///) Executed DbCommand ("10"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025' } (DbType = Object), @__semesters_2={ '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:19:12.3131142+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3131503+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.3132352+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:12.3132610+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T13:19:12.3133342+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:12.3133975+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 11.3581 ms
2025-06-07T13:19:12.3135102+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:12.3135303+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3135491+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.3135804+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 null "application/json; charset=utf-8" 11.7832ms
2025-06-07T13:19:12.3136286+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0H"" disconnecting.
2025-06-07T13:19:12.3136461+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0H"" stopped.
2025-06-07T13:19:12.3136777+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0H"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:12.3197525+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0I"" accepted.
2025-06-07T13:19:12.3198132+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0I"" started.
2025-06-07T13:19:12.3199013+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 87
2025-06-07T13:19:12.3199727+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:12.3199950+07:00 [DBG] (///) Endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:12.3200780+07:00 [DBG] (///) Request matched endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:12.3201123+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:12.3201373+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:19:12.3201461+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:19:12.3201755+07:00 [INF] (///) Executing endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:12.3202074+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0I"", Request id ""0HND5H5ONDT0I:00000001"": started reading request body.
2025-06-07T13:19:12.3202204+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0I"", Request id ""0HND5H5ONDT0I:00000001"": done reading request body.
2025-06-07T13:19:12.3205916+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:12.3207564+07:00 [DBG] (///) Context '"TuitionDbContext"' started tracking '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"'.
2025-06-07T13:19:12.3207915+07:00 [DBG] (///) SaveChanges starting for '"TuitionDbContext"'.
2025-06-07T13:19:12.3208138+07:00 [DBG] (///) DetectChanges starting for '"TuitionDbContext"'.
2025-06-07T13:19:12.3208590+07:00 [DBG] (///) DetectChanges completed for '"TuitionDbContext"'.
2025-06-07T13:19:12.3210546+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:12.3210754+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:12.3210883+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3211029+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3211859+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:12.3212305+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:12.3212433+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:12.3212678+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='10000'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:19:12.3226666+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@p0='2024-2025' (Nullable = false), @p1='2', @p2='N22DCCN888' (Nullable = false), @p3='10000'"], CommandType='Text', CommandTimeout='30']"
""INSERT INTO tuition (academic_year, semester, student_code, tuition_fee)
VALUES (@p0, @p1, @p2, @p3);"
2025-06-07T13:19:12.3227823+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3228062+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:12.3228561+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3228735+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.3229797+07:00 [DBG] (///) The '"Tuition"' entity with key '"{StudentCode: N22DCCN888, AcademicYear: 2024-2025, Semester: 2}"' tracked by '"TuitionDbContext"' changed state from 'Added' to 'Unchanged'.
2025-06-07T13:19:12.3230090+07:00 [DBG] (///) SaveChanges completed for '"TuitionDbContext"' with 1 entities written to the database.
2025-06-07T13:19:12.3230992+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:12.3231330+07:00 [INF] (///) Executed endpoint '"HTTP: POST /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:12.3231902+07:00 [INF] (///) HTTP "POST" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 3.0397 ms
2025-06-07T13:19:12.3232503+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:12.3232682+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.3232810+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.3233049+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 0 null 3.4032ms
2025-06-07T13:19:12.3233365+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0I"" disconnecting.
2025-06-07T13:19:12.3233488+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0I"" stopped.
2025-06-07T13:19:12.3233670+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0I"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:12.4027254+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0J"" accepted.
2025-06-07T13:19:12.4028000+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0J"" started.
2025-06-07T13:19:12.4028927+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:19:12.4029592+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:12.4029831+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:12.4030646+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:12.4031066+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:12.4031394+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:12.4035091+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:12.4037217+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:12.4037422+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:12.4037567+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4037730+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4038435+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:12.4038650+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:12.4038769+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:12.4038977+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:12.4051112+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:12.4052655+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4052955+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:12.4053433+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4053621+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.4054103+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:12.4054273+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:19:12.4054890+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:12.4055444+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.4114 ms
2025-06-07T13:19:12.4055804+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:12.4056604+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4056730+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.4056968+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.8063ms
2025-06-07T13:19:12.4057230+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0J"" disconnecting.
2025-06-07T13:19:12.4057375+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0J"" stopped.
2025-06-07T13:19:12.4057581+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0J"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:12.4105608+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0K"" accepted.
2025-06-07T13:19:12.4106227+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0K"" started.
2025-06-07T13:19:12.4107089+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:19:12.4107718+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:12.4107913+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:12.4108147+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:12.4108487+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:12.4108715+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:12.4113519+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:12.4116384+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:12.4116701+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:12.4116904+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4117189+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4118027+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:12.4118260+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:12.4118446+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:12.4118719+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:12.4132041+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:12.4133741+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4134001+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:12.4134658+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4134831+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.4135323+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:12.4135475+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:19:12.4136162+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:12.4136654+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.7903 ms
2025-06-07T13:19:12.4137617+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:12.4137755+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:12.4137885+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:12.4138093+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 3.1018ms
2025-06-07T13:19:12.4138325+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0K"" disconnecting.
2025-06-07T13:19:12.4138460+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0K"" stopped.
2025-06-07T13:19:12.4138663+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0K"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:28.6854183+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0L"" accepted.
2025-06-07T13:19:28.6854858+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0L"" started.
2025-06-07T13:19:28.6855718+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - "application/json" 85
2025-06-07T13:19:28.6856392+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:28.6856583+07:00 [DBG] (///) Endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}/tuitions"' is valid for the request path '"/api/v1/students/N22DCCN888/tuitions"'
2025-06-07T13:19:28.6856782+07:00 [DBG] (///) Request matched endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:28.6857084+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:28.6857344+07:00 [DBG] (///) The request has an origin header: '"http://localhost:31100"'.
2025-06-07T13:19:28.6857434+07:00 [INF] (///) CORS policy execution successful.
2025-06-07T13:19:28.6857672+07:00 [INF] (///) Executing endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:28.6857984+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0L"", Request id ""0HND5H5ONDT0L:00000001"": started reading request body.
2025-06-07T13:19:28.6858109+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0L"", Request id ""0HND5H5ONDT0L:00000001"": done reading request body.
2025-06-07T13:19:28.6862380+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:28.6864231+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-07T13:19:28.6864446+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:28.6864575+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:28.6864719+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:19:28.6864918+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-07T13:19:28.6865049+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.6865176+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.6866038+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '1', '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:19:28.6954183+07:00 [INF] (///) Executed DbCommand ("9"ms) [Parameters=["@__studentCode_0='N22DCCN888', @__academicYears_1={ '2024-2025', '2024-2025' } (DbType = Object), @__semesters_2={ '1', '2' } (DbType = Object)"], CommandType='Text', CommandTimeout='30']"
""DELETE FROM tuition AS t
WHERE t.student_code = @__studentCode_0 AND t.academic_year = ANY (@__academicYears_1) AND t.semester = ANY (@__semesters_2)"
2025-06-07T13:19:28.6956049+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.6956337+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:28.6957013+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:28.6957228+07:00 [INF] (///) Writing value of type '"Int32"' as Json.
2025-06-07T13:19:28.6958277+07:00 [INF] (///) Executed endpoint '"HTTP: DELETE /api/v{version:apiVersion}/students/{studentCode}/tuitions"'
2025-06-07T13:19:28.6959054+07:00 [INF] (///) HTTP "DELETE" "/api/v1/students/N22DCCN888/tuitions" responded 200 in 10.1494 ms
2025-06-07T13:19:28.6959484+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:28.6959623+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.6959779+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:28.6960012+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:14100""""/api/v1/students/N22DCCN888/tuitions""" - 200 null "application/json; charset=utf-8" 10.4312ms
2025-06-07T13:19:28.6960354+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0L"" disconnecting.
2025-06-07T13:19:28.6960491+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0L"" stopped.
2025-06-07T13:19:28.6960729+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0L"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:28.7037232+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0M"" accepted.
2025-06-07T13:19:28.7037810+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0M"" started.
2025-06-07T13:19:28.7039366+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - "application/json" null
2025-06-07T13:19:28.7039961+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:28.7040136+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"' with route pattern '"/api/v{version:apiVersion}/students/{studentCode}"' is valid for the request path '"/api/v1/students/N22DCCN888"'
2025-06-07T13:19:28.7040337+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:28.7040665+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:28.7040878+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:28.7044158+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:28.7046236+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:28.7046452+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:28.7046604+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.7046740+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.7047380+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:28.7047539+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:28.7047654+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:28.7048302+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:28.7059654+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__studentCode_0='N22DCCN888'"], CommandType='Text', CommandTimeout='30']"
""SELECT s0.student_code, s0.last_name, s0.first_name, s0.class_code, s0.faculty_code, t.academic_year, t.semester::text, t.tuition_fee::numeric, (
    SELECT COALESCE(sum(t0.amount_paid), 0)::int
    FROM tuition_payment AS t0
    WHERE t.student_code = t0.student_code AND t.academic_year = t0.academic_year AND t.semester = t0.semester)::numeric, t.student_code, t.semester
FROM (
    SELECT s.student_code, s.last_name, s.first_name, s.class_code, s.faculty_code
    FROM student_basic_info AS s
    WHERE s.student_code = @__studentCode_0
    LIMIT 1
) AS s0
LEFT JOIN tuition AS t ON s0.student_code = t.student_code
ORDER BY s0.student_code, t.student_code, t.academic_year"
2025-06-07T13:19:28.7060808+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.7061028+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:28.7061416+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.7061568+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:28.7061999+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:28.7062137+07:00 [INF] (///) Writing value of type '"StudentDetailResponse"' as Json.
2025-06-07T13:19:28.7063376+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students/{studentCode}"'
2025-06-07T13:19:28.7063839+07:00 [INF] (///) HTTP "GET" "/api/v1/students/N22DCCN888" responded 200 in 2.2912 ms
2025-06-07T13:19:28.7064542+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:28.7064670+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:28.7064780+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:28.7064978+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students/N22DCCN888""" - 200 null "application/json; charset=utf-8" 2.6083ms
2025-06-07T13:19:28.7065229+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0M"" disconnecting.
2025-06-07T13:19:28.7065354+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0M"" stopped.
2025-06-07T13:19:28.7065517+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0M"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:34.8478048+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0N"" accepted.
2025-06-07T13:19:34.8478801+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0N"" started.
2025-06-07T13:19:34.8479805+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:19:34.8480529+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:19:34.8480773+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:19:34.8480998+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:19:34.8481380+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:34.8481653+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:19:34.8486021+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:34.8487808+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:34.8488025+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:34.8488180+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8488340+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8489108+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:34.8489264+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8489369+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8489555+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:19:34.8498163+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:19:34.8499269+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8499523+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:34.8500019+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8500190+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:34.8502210+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8502463+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8503083+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:34.8503248+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8503760+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8504002+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:19:34.8512684+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:19:34.8513910+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8514170+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:34.8514755+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8514970+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:34.8515580+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:34.8515811+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:19:34.8516697+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:19:34.8517226+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 3.5545 ms
2025-06-07T13:19:34.8517627+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:34.8518551+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8518739+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:34.8518974+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 3.9168ms
2025-06-07T13:19:34.8519262+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0N"" disconnecting.
2025-06-07T13:19:34.8519418+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0N"" stopped.
2025-06-07T13:19:34.8519750+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0N"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T13:19:34.8604914+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0O"" accepted.
2025-06-07T13:19:34.8605609+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0O"" started.
2025-06-07T13:19:34.8606605+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - "application/json" null
2025-06-07T13:19:34.8607191+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/students"'
2025-06-07T13:19:34.8607408+07:00 [DBG] (///) Endpoint '"HTTP: GET /api/v{version:apiVersion}/students"' with route pattern '"/api/v{version:apiVersion}/students"' is valid for the request path '"/api/v1/students"'
2025-06-07T13:19:34.8607605+07:00 [DBG] (///) Request matched endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:19:34.8607944+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-07T13:19:34.8608984+07:00 [INF] (///) Executing endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:19:34.8613030+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"TuitionDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "SensitiveDataLoggingEnabled DetailedErrorsEnabled "
2025-06-07T13:19:34.8615260+07:00 [DBG] (///) Creating DbConnection.
2025-06-07T13:19:34.8615508+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-07T13:19:34.8615663+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8615827+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8616496+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:34.8616652+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8616740+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8616905+07:00 [DBG] (///) Executing DbCommand [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:19:34.8625614+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT count(*)::int
FROM student_basic_info AS s"
2025-06-07T13:19:34.8626847+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8627079+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:34.8627501+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8627679+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:34.8629395+07:00 [DBG] (///) Opening connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8630040+07:00 [DBG] (///) Opened connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8630536+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-07T13:19:34.8630692+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8630846+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-07T13:19:34.8631043+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:19:34.8638135+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__p_1='5', @__p_0='0'"], CommandType='Text', CommandTimeout='30']"
""SELECT s.student_code AS \"StudentCode\", s.last_name AS \"LastName\", s.first_name AS \"FirstName\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student_basic_info AS s
LIMIT @__p_1 OFFSET @__p_0"
2025-06-07T13:19:34.8639165+07:00 [DBG] (///) Closing data reader to '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8639379+07:00 [DBG] (///) A data reader for '"acc_db"' on server '"tcp://localhost:25020"' is being disposed after spending 0ms reading results.
2025-06-07T13:19:34.8639813+07:00 [DBG] (///) Closing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8639975+07:00 [DBG] (///) Closed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:34.8640569+07:00 [INF] (///) Setting HTTP status code 200.
2025-06-07T13:19:34.8640803+07:00 [INF] (///) Writing value of type '"PagedList`1"' as Json.
2025-06-07T13:19:34.8642488+07:00 [INF] (///) Executed endpoint '"HTTP: GET /api/v{version:apiVersion}/students"'
2025-06-07T13:19:34.8643449+07:00 [INF] (///) HTTP "GET" "/api/v1/students" responded 200 in 3.5236 ms
2025-06-07T13:19:34.8643807+07:00 [DBG] (///) '"TuitionDbContext"' disposed.
2025-06-07T13:19:34.8643969+07:00 [DBG] (///) Disposing connection to database '"acc_db"' on server '"tcp://localhost:25020"'.
2025-06-07T13:19:34.8644097+07:00 [DBG] (///) Disposed connection to database '"acc_db"' on server '"tcp://localhost:25020"' (0ms).
2025-06-07T13:19:34.8644336+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:14100""""/api/v1/students""?page=0&pageSize=5" - 200 null "application/json; charset=utf-8" 3.7726ms
2025-06-07T13:19:34.8644599+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0O"" disconnecting.
2025-06-07T13:19:34.8644749+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0O"" stopped.
2025-06-07T13:19:34.8644897+07:00 [DBG] (///) Connection id ""0HND5H5ONDT0O"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-07T17:25:29.2680981+07:00 [INF] (///) Application is shutting down...
2025-06-07T17:25:29.2688248+07:00 [DBG] (///) Hosting stopping
2025-06-07T17:25:29.2733129+07:00 [DBG] (///) Hosting stopped
2025-06-07T19:40:40.7578762+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-07T19:40:40.8204950+07:00 [INF] (///) No action descriptors found. This may indicate an incorrectly configured application or missing application parts. To learn more, visit https://aka.ms/aspnet/mvc/app-parts
2025-06-07T19:40:40.8238034+07:00 [DBG] (///) Hosting starting
2025-06-07T19:40:40.9506610+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-07T19:40:40.9510141+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-07T19:40:41.0072047+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-07T19:40:41.0084276+07:00 [WRN] (///) Overriding address(es) '"https://localhost:31001"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-07T19:40:41.0141743+07:00 [INF] (///) Now listening on: "http://localhost:14100"
2025-06-07T19:40:41.0145529+07:00 [INF] (///) Now listening on: "https://localhost:14101"
2025-06-07T19:40:41.0146603+07:00 [DBG] (///) Loaded hosting startup assembly "TuitionService.Api"
2025-06-07T19:40:41.0148168+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-07T19:40:41.0148554+07:00 [INF] (///) Hosting environment: "Development"
2025-06-07T19:40:41.0148761+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/TuitionService/TuitionService.Api"
2025-06-07T19:40:41.0149159+07:00 [DBG] (///) Hosting started
2025-06-07T19:40:41.6806835+07:00 [INF] (///) Application is shutting down...
2025-06-07T19:40:41.6812551+07:00 [DBG] (///) Hosting stopping
2025-06-07T19:40:41.6884653+07:00 [DBG] (///) Hosting stopped
