2025-06-11T07:44:44.7334174+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-11T07:44:44.8347668+07:00 [DBG] (///) Hosting starting
2025-06-11T07:44:44.8851543+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-11T07:44:44.8870078+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-11T07:44:44.9971320+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-11T07:44:44.9991671+07:00 [WRN] (///) Overriding address(es) '"http://localhost:5291"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-11T07:44:45.0063465+07:00 [INF] (///) Now listening on: "http://localhost:30000"
2025-06-11T07:44:45.0068367+07:00 [INF] (///) Now listening on: "https://localhost:30001"
2025-06-11T07:44:45.0069081+07:00 [INF] (///) Now listening on: "https://localhost:30002"
2025-06-11T07:44:45.0070296+07:00 [DBG] (///) Loaded hosting startup assembly "FacultyService.Api"
2025-06-11T07:44:45.0073023+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-11T07:44:45.0074050+07:00 [INF] (///) Hosting environment: "Development"
2025-06-11T07:44:45.0074564+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api"
2025-06-11T07:44:45.0075647+07:00 [DBG] (///) Hosting started
2025-06-11T07:45:21.7359400+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" accepted.
2025-06-11T07:45:21.7369986+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" started.
2025-06-11T07:45:21.7586974+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T07:45:21.8182533+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:45:21.8212218+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:45:21.8243886+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:45:21.8289499+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:45:21.8487825+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:45:21.8530384+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:45:21.8554564+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:45:21.8558246+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:45:21.8566648+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:45:21.8731460+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:45:21.8758250+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:45:21.8760274+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:45:21.8767071+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:21.8768191+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:45:21.8770174+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:21.8783161+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:21.8787774+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:21.8811116+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:21.8826535+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:45:21.8852339+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:45:21.8859793+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:21.8863357+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:21.8877305+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:45:21.8882265+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:45:21.8886686+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:45:21.8887421+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:21.8888083+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:21.8889602+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:45:21.8890453+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:21.8891345+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:21.8893955+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:21.8894882+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:21.8895613+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:21.8934146+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:21.8935465+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:21.8938460+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:21.8939127+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:21.8940096+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:21.8991617+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:45:21.9102137+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T07:45:22.0630494+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-11T07:45:22.5036172+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Class"' as the properties are already covered by the index "{'FacultyCode', 'ClassCode'}".
2025-06-11T07:45:22.5039115+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"CreditClass"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId'}".
2025-06-11T07:45:22.5040292+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId', 'StudentCode'}".
2025-06-11T07:45:22.5040881+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'StudentCode'}".
2025-06-11T07:45:22.5041315+07:00 [DBG] (///) The index "{'FacultyCode', 'CreditClassId'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId', 'StudentCode'}".
2025-06-11T07:45:22.5041880+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Student"' as the properties are already covered by the index "{'FacultyCode', 'StudentCode'}".
2025-06-11T07:45:22.5042416+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Student"' as the properties are already covered by the index "{'FacultyCode', 'ClassCode'}".
2025-06-11T07:45:22.6950738+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:45:22.7376605+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .OrderBy(__Class => __Class.ClassCode)
    .Select(c => new ClassBasicResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .Count()"'
2025-06-11T07:45:22.9277777+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:45:22.9640931+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:45:22.9968694+07:00 [DBG] (///) Created DbConnection. (31ms).
2025-06-11T07:45:22.9998802+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.1273619+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.1320213+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:23.1376034+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (2ms).
2025-06-11T07:45:23.1438491+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (12ms).
2025-06-11T07:45:23.1505430+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:45:23.2303323+07:00 [INF] (///) Executed DbCommand ("77"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:45:23.2455479+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.2527660+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 16ms reading results.
2025-06-11T07:45:23.2575185+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.2615511+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (3ms).
2025-06-11T07:45:23.2649243+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .OrderBy(__Class => __Class.ClassCode)
    .Select(c => new ClassBasicResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-11T07:45:23.3181210+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<ClassBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                ClassCode -> 0
                ClassName -> 1
                FacultyCode -> 2
                StudentCount -> 3
                FacultyName -> 4
                AcademicYearCode -> 5
            SELECT c0.class_code AS ClassCode, c0.class_name AS ClassName, c0.faculty_code AS FacultyCode, (
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.class_code != NULL)) && ((c0.faculty_code == s.faculty_code) && (c0.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c0.academic_year_code AS AcademicYearCode
            FROM 
            (
                SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
                ORDER BY c.class_code ASC
                OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
            ) AS c0
            INNER JOIN 
            (
                SELECT f.faculty_code, f.faculty_name
                FROM faculty AS f
                WHERE f.faculty_code == @__ef_filter__Id_0
            ) AS f0 ON c0.faculty_code == f0.faculty_code
            ORDER BY c0.class_code ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                ClassCode -> 0
                ClassName -> 1
                FacultyCode -> 2
                StudentCount -> 3
                FacultyName -> 4
                AcademicYearCode -> 5
            SELECT c0.class_code AS ClassCode, c0.class_name AS ClassName, c0.faculty_code AS FacultyCode, (
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.class_code != NULL)) && ((c0.faculty_code == s.faculty_code) && (c0.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c0.academic_year_code AS AcademicYearCode
            FROM 
            (
                SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
                ORDER BY c.class_code ASC
                OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
            ) AS c0
            INNER JOIN 
            (
                SELECT f.faculty_code, f.faculty_name
                FROM faculty AS f
                WHERE f.faculty_code == @__ef_filter__Id_0
            ) AS f0 ON c0.faculty_code == f0.faculty_code
            ORDER BY c0.class_code ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            string value1;
            string value2;
            string value3;
            int? value4;
            string value5;
            string value6;
            value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
            return new ClassBasicResponse{ 
                ClassCode = value1, 
                ClassName = value2, 
                FacultyCode = value3, 
                StudentCount = (int)value4, 
                FacultyName = value5, 
                AcademicYearCode = value6 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T07:45:23.3271513+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.3277445+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.3279912+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:23.3280852+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:23.3282018+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:23.3284123+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T07:45:23.3472814+07:00 [INF] (///) Executed DbCommand ("19"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T07:45:23.3505791+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.3508760+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 3ms reading results.
2025-06-11T07:45:23.3513338+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.3515510+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:23.3528937+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 1440ms
2025-06-11T07:45:23.3580398+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 1455.56ms.
2025-06-11T07:45:23.3671778+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:45:23.3699731+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:45:23.3701668+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:45:23.3702148+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:45:23.3709725+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:45:23.3716278+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:45:23.4032122+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 1522.8483ms
2025-06-11T07:45:23.4041133+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:45:23.4146423+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 1580.5615 ms
2025-06-11T07:45:23.4199438+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:45:23.4276191+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:45:23.4323208+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:23.4353903+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (2ms).
2025-06-11T07:45:23.4405750+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 1681.9105ms
2025-06-11T07:45:51.4627121+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/classes""" - null null
2025-06-11T07:45:51.4647605+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:45:51.4649278+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:45:51.4653381+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:45:51.4657498+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:45:51.4658851+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:45:51.4661551+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:45:51.4662132+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:45:51.4666248+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:45:51.4677494+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/classes" responded 204 in 2.1576 ms
2025-06-11T07:45:51.4681448+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:45:51.4685939+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/classes""" - 204 null null 5.8242ms
2025-06-11T07:45:51.4704937+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:30000""""/api/v1/it-faculty/classes""" - "application/json" 100
2025-06-11T07:45:51.4709102+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:45:51.4712052+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.CreateClass (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:45:51.4714778+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.CreateClass (FacultyService.Api)"'
2025-06-11T07:45:51.4717951+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:45:51.4721161+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:45:51.4721817+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:45:51.4723374+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:45:51.4724292+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:45:51.4725682+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.CreateClass (FacultyService.Api)"'
2025-06-11T07:45:51.4772112+07:00 [INF] (///) Route matched with "{action = \"CreateClass\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateClass(FacultyService.Api.Classes.Request.ClassBasicRequest, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:45:51.4774241+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:45:51.4775288+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:45:51.4776565+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:51.4778723+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:45:51.4780267+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:51.4781937+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:51.4784349+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:51.4790263+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Classes.Request.ClassBasicRequest"' ...
2025-06-11T07:45:51.4800790+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Classes.Request.ClassBasicRequest"' using the name '""' in request data ...
2025-06-11T07:45:51.4811874+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:45:51.4857597+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"", Request id ""0HND8G4VFLPUD:00000003"": started reading request body.
2025-06-11T07:45:51.4860425+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"", Request id ""0HND8G4VFLPUD:00000003"": done reading request body.
2025-06-11T07:45:51.4884856+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"FacultyService.Api.Classes.Request.ClassBasicRequest"'
2025-06-11T07:45:51.4886611+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Classes.Request.ClassBasicRequest"'.
2025-06-11T07:45:51.4887465+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Classes.Request.ClassBasicRequest"'.
2025-06-11T07:45:51.4888151+07:00 [DBG] (///) Attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Classes.Request.ClassBasicRequest"' ...
2025-06-11T07:45:51.4904389+07:00 [DBG] (///) Done attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Classes.Request.ClassBasicRequest"'.
2025-06-11T07:45:51.4905565+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:51.4906919+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:51.4907768+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:51.4908858+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:51.4913673+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.CreateClass (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:45:51.5057782+07:00 [INF] (///) Processing request "CreateClassCommand" with data [("ClassName": "***REDACTED***"), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("AcademicYearCode": AcademicYearCode { StartYearValue: "2022", EndYearValue: "2027", Value: "2022-2027", ShortValue: "22-27", StartYear: "The property accessor threw an exception: FormatException", EndYear: "The property accessor threw an exception: FormatException" })]
2025-06-11T07:45:51.5365412+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:45:51.5442042+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:45:51.5444515+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:45:51.5445441+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.5446730+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.5465229+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:45:51.5511227+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:45:51.6137911+07:00 [DBG] (///) Context '"FacultyDbContext"' started tracking '"GlobalClassCode"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:45:51.6318308+07:00 [DBG] (///) The navigation '"Class"."GlobalClassCode"' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:45:51.6369511+07:00 [DBG] (///) Context '"FacultyDbContext"' started tracking '"Class"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:45:51.6392666+07:00 [DBG] (///) SaveChanges starting for '"FacultyDbContext"'.
2025-06-11T07:45:51.6421899+07:00 [DBG] (///) DetectChanges starting for '"FacultyDbContext"'.
2025-06-11T07:45:51.6470462+07:00 [DBG] (///) DetectChanges completed for '"FacultyDbContext"'.
2025-06-11T07:45:51.7028467+07:00 [DBG] (///) Executing 2 update commands as a batch.
2025-06-11T07:45:51.7056408+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-11T07:45:51.7100451+07:00 [DBG] (///) Created transaction savepoint.
2025-06-11T07:45:51.7113585+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:51.7114495+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:51.7117143+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:51.7119309+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?'"], CommandType='Text', CommandTimeout='300']"
""INSERT INTO global_class_code (class_code, class_name)
VALUES (@p0, @p1);
INSERT INTO class (class_code, faculty_code, academic_year_code, class_name)
VALUES (@p2, @p3, @p4, @p5);"
2025-06-11T07:45:51.7389275+07:00 [INF] (///) Executed DbCommand ("27"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?', @p5='?'"], CommandType='Text', CommandTimeout='300']"
""INSERT INTO global_class_code (class_code, class_name)
VALUES (@p0, @p1);
INSERT INTO class (class_code, faculty_code, academic_year_code, class_name)
VALUES (@p2, @p3, @p4, @p5);"
2025-06-11T07:45:51.7413770+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.7414789+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 2ms reading results.
2025-06-11T07:45:51.7432673+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-11T07:45:51.7452144+07:00 [DBG] (///) Released transaction savepoint.
2025-06-11T07:45:51.7514613+07:00 [DBG] (///) An entity of type '"GlobalClassCode"' tracked by '"FacultyDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:45:51.7517684+07:00 [DBG] (///) An entity of type '"Class"' tracked by '"FacultyDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:45:51.7532135+07:00 [DBG] (///) SaveChanges completed for '"FacultyDbContext"' with 2 entities written to the database.
2025-06-11T07:45:51.7550928+07:00 [DBG] (///) Committing transaction.
2025-06-11T07:45:51.7623343+07:00 [DBG] (///) Committed transaction.
2025-06-11T07:45:51.7636284+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.7639467+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:51.7651131+07:00 [DBG] (///) Disposing transaction.
2025-06-11T07:45:51.7652561+07:00 [INF] (///) Request "CreateClassCommand" processed successfully in 259ms
2025-06-11T07:45:51.7657836+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.CreateClass (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.CreatedAtActionResult" in 274.2851ms.
2025-06-11T07:45:51.7660765+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:45:51.7661947+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:45:51.7662815+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:45:51.7663124+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:45:51.7664676+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:45:51.7665233+07:00 [INF] (///) Executing "CreatedAtActionResult", writing value of type '"Shared.Domain.ValueObject.ClassCode"'.
2025-06-11T07:45:51.7826701+07:00 [DBG] (///) Found the endpoints ["FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"] for address "(id=[D22CQPT01],version=[1],action=[GetClassById],controller=[Classes])"
2025-06-11T07:45:51.7838368+07:00 [DBG] (///) Failed to process the template "api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}" for "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)". A required route value is missing, or has a different value from the required default values. Supplied ambient values "{ \"action\": \"CreateClass\", \"controller\": \"Classes\", \"facultyCode\": \"it-faculty\", \"version\": \"1\" }" and "{ \"action\": \"GetClassById\", \"controller\": \"Classes\", \"id\": \"D22CQPT01\", \"version\": \"1\" }" with default values "{ \"action\": \"GetClassById\", \"controller\": \"Classes\" }"
2025-06-11T07:45:51.7842443+07:00 [DBG] (///) Link generation failed for endpoints ["FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"]
2025-06-11T07:45:51.7851922+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.CreateClass (FacultyService.Api)" in 307.0325ms
2025-06-11T07:45:51.7853350+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.CreateClass (FacultyService.Api)"'
2025-06-11T07:45:51.7860622+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No route matches the supplied values.
   at Microsoft.AspNetCore.Mvc.CreatedAtActionResult.OnFormatting(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor.ExecuteAsyncCore(ActionContext context, ObjectResult result, Type objectType, Object value)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|22_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|30_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeResultFilters()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Finbuckle.MultiTenant.AspNetCore.Internal.MultiTenantMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-11T07:45:51.8207495+07:00 [ERR] (///) HTTP "POST" "/api/v1/it-faculty/classes" responded 500 in 348.8746 ms
2025-06-11T07:45:51.8209153+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:45:51.8210280+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:45:51.8211497+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8212175+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:51.8213297+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:30000""""/api/v1/it-faculty/classes""" - 500 null "application/problem+json" 350.8287ms
2025-06-11T07:45:51.8245362+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T07:45:51.8250114+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:45:51.8252283+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:45:51.8254394+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:45:51.8256885+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:45:51.8258760+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:45:51.8259458+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:45:51.8260756+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:45:51.8261260+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:45:51.8262009+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:45:51.8264212+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:45:51.8265103+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:45:51.8265965+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:45:51.8267617+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:51.8268508+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:45:51.8269896+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:51.8271089+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:51.8272588+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:51.8274893+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:51.8276941+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:45:51.8278369+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:45:51.8279483+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:51.8280429+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:51.8281309+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:45:51.8282481+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:45:51.8283538+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:45:51.8284982+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:51.8285575+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:51.8286342+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:45:51.8286976+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:51.8287716+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:51.8288682+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:51.8289330+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:51.8289745+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:51.8291710+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:51.8292329+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:51.8293614+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:51.8294442+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:51.8295150+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:51.8298225+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:45:51.8307503+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T07:45:51.8707568+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:45:51.8746720+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:45:51.8748083+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:45:51.8748517+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8749560+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8751887+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:51.8752588+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:51.8753554+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:51.8754673+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:45:51.8774950+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:45:51.8780987+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8782131+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:45:51.8784709+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8786073+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:51.8792672+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8793758+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8796221+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:51.8797181+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:51.8798115+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:51.8799285+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T07:45:51.8834299+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T07:45:51.8860738+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8862521+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 2ms reading results.
2025-06-11T07:45:51.8865036+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8866111+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:51.8868547+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 56ms
2025-06-11T07:45:51.8869607+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 57.0379ms.
2025-06-11T07:45:51.8873492+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:45:51.8875434+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:45:51.8875922+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:45:51.8876413+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:45:51.8877110+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:45:51.8877802+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:45:51.8900475+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 62.9559ms
2025-06-11T07:45:51.8901573+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:45:51.8903094+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 64.5226 ms
2025-06-11T07:45:51.8904681+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:45:51.8905708+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:45:51.8906636+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:51.8907340+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:51.8908502+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 66.3148ms
2025-06-11T07:45:54.6492476+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:45:54.6492843+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" accepted.
2025-06-11T07:45:54.6493771+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" started.
2025-06-11T07:45:54.6496912+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:45:54.6497682+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:45:54.6498475+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:45:54.6498416+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:45:54.6500118+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:45:54.6502814+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:45:54.6503501+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:45:54.6503645+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:45:54.6504251+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:45:54.6504231+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:45:54.6504605+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:45:54.6504941+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:45:54.6505260+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:45:54.6506087+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:45:54.6507303+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:45:54.6507771+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:45:54.6508317+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:45:54.6508556+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:45:54.6508953+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:45:54.6535381+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:45:54.6535372+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:45:54.6536261+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:45:54.6536513+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:45:54.6536261+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:45:54.6536822+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:54.6537134+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:45:54.6537110+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:45:54.6537403+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:54.6537525+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:54.6537852+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:45:54.6537835+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:54.6538051+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:45:54.6538527+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:45:54.6538698+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:45:54.6540109+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:45:54.6541740+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:45:54.6542181+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:45:54.6542863+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:45:54.6543021+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:45:54.6543444+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:45:54.6543767+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:45:54.6543764+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:45:54.6544245+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:45:54.6544563+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:45:54.6544790+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:45:54.6546654+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:45:54.6547088+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:54.6546659+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:45:54.6547588+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:54.6547681+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:45:54.6548933+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:45:54.6551406+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:45:54.6551502+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:45:54.6551839+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:54.6552004+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:54.6552080+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:54.6552346+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:45:54.6552383+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:45:54.6552911+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:45:54.6553131+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:45:54.6553358+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:45:54.6552620+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:45:54.6553591+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:54.6553810+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:54.6553988+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:45:54.6554051+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:45:54.6554198+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:54.6554425+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:54.6554502+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:45:54.6554667+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:54.6554895+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:54.6554946+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:54.6555065+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:54.6555252+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:45:54.6555476+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:45:54.6556444+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:54.6556442+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:54.6556677+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:45:54.6556863+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:54.6556965+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:54.6557308+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:54.6557477+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:54.6557521+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:54.6557641+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:45:54.6557969+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:54.6559646+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:45:54.6573559+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:45:54.6574275+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:54.6574947+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:54.6575154+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:45:54.6575669+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:45:54.6577448+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:45:54.6600121+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:45:54.6604111+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:45:54.6626360+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:45:54.6630783+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:45:54.6642788+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .OrderBy(__Student => __Student.StudentCode)
    .Select(s => new StudentBasicResponse{ 
        StudentCode = s.StudentCode, 
        FirstName = s.FirstName, 
        LastName = s.LastName, 
        Gender = GenderExtensions.FromBoolean(s.Gender ?? False), 
        BirthDate = s.BirthDate, 
        Address = s.Address, 
        IsSuspended = s.IsSuspended, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Count()"'
2025-06-11T07:45:54.6642749+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .Where(c => c.ClassCode == __request_ClassCode_Value_0)
    .Select(c => new ClassDetailResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .FirstOrDefault()"'
2025-06-11T07:45:54.6678375+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE s.faculty_code == @__ef_filter__Id_0) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE s.faculty_code == @__ef_filter__Id_0, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:45:54.6689808+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:45:54.6690614+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:45:54.6691077+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6691683+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6693643+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:54.6694026+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:54.6694499+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:54.6695036+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:45:54.6715012+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:45:54.6717777+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6718575+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:45:54.6719829+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6720382+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:54.6726108+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ClassDetailResponse>(
        asyncEnumerable: SingleQueryingEnumerable.Create<ClassDetailResponse>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    ClassCode -> 0
                    ClassName -> 1
                    FacultyCode -> 2
                    StudentCount -> 3
                    FacultyName -> 4
                    AcademicYearCode -> 5
                SELECT TOP(1) c.class_code AS ClassCode, c.class_name AS ClassName, c.faculty_code AS FacultyCode, (
                    SELECT CAST(count(*) AS integer)
                    FROM student AS s
                    WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.class_code != NULL)) && ((c.faculty_code == s.faculty_code) && (c.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c.academic_year_code AS AcademicYearCode
                FROM class AS c
                INNER JOIN 
                (
                    SELECT f.faculty_code, f.faculty_name
                    FROM faculty AS f
                    WHERE f.faculty_code == @__ef_filter__Id_0
                ) AS f0 ON c.faculty_code == f0.faculty_code
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    ClassCode -> 0
                    ClassName -> 1
                    FacultyCode -> 2
                    StudentCount -> 3
                    FacultyName -> 4
                    AcademicYearCode -> 5
                SELECT TOP(1) c.class_code AS ClassCode, c.class_name AS ClassName, c.faculty_code AS FacultyCode, (
                    SELECT CAST(count(*) AS integer)
                    FROM student AS s
                    WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.class_code != NULL)) && ((c.faculty_code == s.faculty_code) && (c.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c.academic_year_code AS AcademicYearCode
                FROM class AS c
                INNER JOIN 
                (
                    SELECT f.faculty_code, f.faculty_name
                    FROM faculty AS f
                    WHERE f.faculty_code == @__ef_filter__Id_0
                ) AS f0 ON c.faculty_code == f0.faculty_code
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                string value1;
                string value2;
                string value3;
                int? value4;
                string value5;
                string value6;
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
                return new ClassDetailResponse{ 
                    ClassCode = value1, 
                    ClassName = value2, 
                    FacultyCode = value3, 
                    StudentCount = (int)value4, 
                    FacultyName = value5, 
                    AcademicYearCode = value6 
                }
                ;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:45:54.6727437+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .OrderBy(__Student => __Student.StudentCode)
    .Select(s => new StudentBasicResponse{ 
        StudentCode = s.StudentCode, 
        FirstName = s.FirstName, 
        LastName = s.LastName, 
        Gender = GenderExtensions.FromBoolean(s.Gender ?? False), 
        BirthDate = s.BirthDate, 
        Address = s.Address, 
        IsSuspended = s.IsSuspended, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-11T07:45:54.6757884+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:45:54.6758967+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:45:54.6759417+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6759956+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6762188+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:54.6762710+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:54.6763416+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:54.6764082+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:45:54.6793001+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:45:54.6810488+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6811745+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 1ms reading results.
2025-06-11T07:45:54.6813481+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6814347+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:54.6816646+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 21ms
2025-06-11T07:45:54.6817668+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 25.6873ms.
2025-06-11T07:45:54.6820387+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:45:54.6821112+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:45:54.6822364+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:45:54.6822592+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:45:54.6823045+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:45:54.6823287+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:45:54.6910071+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<StudentBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
            SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
            FROM student AS s
            WHERE s.faculty_code == @__ef_filter__Id_0
            ORDER BY s.student_code ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
            SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
            FROM student AS s
            WHERE s.faculty_code == @__ef_filter__Id_0
            ORDER BY s.student_code ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            string value1;
            string value2;
            string value3;
            bool? value4;
            DateOnly? value5;
            string value6;
            bool? value7;
            string value8;
            string value9;
            value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(bool?) : (bool?)dataReader.GetBoolean(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.IsDBNull(4) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
            value7 = try { (bool?)dataReader.GetBoolean(6) } catch (Exception) { ... } ;
            value8 = try { dataReader.GetString(7) } catch (Exception) { ... } ;
            value9 = try { dataReader.GetString(8) } catch (Exception) { ... } ;
            return new StudentBasicResponse{ 
                StudentCode = value1, 
                FirstName = value2, 
                LastName = value3, 
                Gender = GenderExtensions.FromBoolean((bool)value4), 
                BirthDate = value5, 
                Address = value6, 
                IsSuspended = (bool)value7, 
                ClassCode = value8, 
                FacultyCode = value9 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T07:45:54.6944639+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6945646+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6946756+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:45:54.6947033+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:54.6947491+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:45:54.6948035+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:45:54.6965003+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:45:54.6968133+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6968752+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:45:54.6969916+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.6970508+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:54.6973293+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 36ms
2025-06-11T07:45:54.6974612+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 39.6521ms.
2025-06-11T07:45:54.6977243+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:45:54.6977894+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:45:54.6978071+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:45:54.6978234+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:45:54.6978556+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:45:54.6979013+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:45:54.6999982+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 46.1478ms
2025-06-11T07:45:54.7001170+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:45:54.7002428+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 46.478ms
2025-06-11T07:45:54.7002921+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:45:54.7003965+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 50.3289 ms
2025-06-11T07:45:54.7003965+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 49.6824 ms
2025-06-11T07:45:54.7004836+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:45:54.7004835+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:45:54.7005366+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:45:54.7005386+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:45:54.7005992+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.7005992+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:45:54.7006547+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:54.7006548+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:45:54.7007276+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 50.8705ms
2025-06-11T07:45:54.7008702+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 51.6267ms
2025-06-11T07:46:04.4142781+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - null null
2025-06-11T07:46:04.4151175+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:04.4151620+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:46:04.4152657+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:04.4154535+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:04.4155099+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:04.4155685+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:04.4155924+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:04.4156915+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:46:04.4157952+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 204 in 0.5018 ms
2025-06-11T07:46:04.4159310+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:04.4160181+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - 204 null null 1.7357ms
2025-06-11T07:46:04.4172892+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - "application/json" 108
2025-06-11T07:46:04.4175416+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:04.4176005+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:04.4176708+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"'
2025-06-11T07:46:04.4177850+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:04.4179321+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:04.4179774+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:04.4181188+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:04.4181424+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:04.4181944+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"'
2025-06-11T07:46:04.4212322+07:00 [INF] (///) Route matched with "{action = \"CreateStudent\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateStudent(System.String, FacultyService.Api.Students.Request.StudentBasicRequest, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:46:04.4213556+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:04.4213852+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:04.4214252+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:04.4214488+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:04.4214720+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:04.4215221+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:04.4215770+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:04.4216700+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:04.4217559+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:46:04.4218474+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:04.4218671+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:04.4218986+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:04.4221996+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:04.4222439+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"' ...
2025-06-11T07:46:04.4223125+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"' using the name '""' in request data ...
2025-06-11T07:46:04.4225111+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:46:04.4244166+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"", Request id ""0HND8G4VFLPUD:00000007"": started reading request body.
2025-06-11T07:46:04.4245631+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"", Request id ""0HND8G4VFLPUD:00000007"": done reading request body.
2025-06-11T07:46:04.4272592+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"FacultyService.Api.Students.Request.StudentBasicRequest"'
2025-06-11T07:46:04.4273597+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"'.
2025-06-11T07:46:04.4274105+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"'.
2025-06-11T07:46:04.4274307+07:00 [DBG] (///) Attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"' ...
2025-06-11T07:46:04.4291193+07:00 [DBG] (///) Done attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"'.
2025-06-11T07:46:04.4291682+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:04.4292245+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:04.4292479+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:04.4293047+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:04.4295900+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:04.4336678+07:00 [INF] (///) Processing request "CreateStudentCommand" with data [("LastName": LastName { Value: "NGUYỄN" }), ("FirstName": FirstName { Value: "NGỌC PHÚ" }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("Gender": Female), ("BirthDate": 06/26/2004), ("Address": "null"), ("IsSuspended": False)]
2025-06-11T07:46:04.4371007+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:04.4388435+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:04.4388943+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:04.4389254+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.4389928+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.4391578+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:46:04.4392497+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:46:04.4434104+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .AsNoTracking()
    .Any(c => c.ClassCode == __request_ClassCode_Value_0)"'
2025-06-11T07:46:04.4489574+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<bool>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM class AS c
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0))) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT EXISTS (
                SELECT 1
                FROM class AS c
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0)), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            bool? value1;
            value1 = try { dataReader.IsDBNull(0) ? default(bool?) : (bool?)dataReader.GetBoolean(0) } catch (Exception) { ... } ;
            return (bool)value1;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True)
        .Single();
}"'
2025-06-11T07:46:04.4526223+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:04.4526828+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.4527597+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.4531263+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT EXISTS (
    SELECT 1
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0)"
2025-06-11T07:46:04.4561587+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT EXISTS (
    SELECT 1
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0)"
2025-06-11T07:46:04.4585500+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.4588085+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 2ms reading results.
2025-06-11T07:46:04.4609225+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .Where(s => s.ClassCode == __classCode_Value_0)
    .OrderByDescending(s => s.StudentCode)
    .Select(s => new StudentCode(s.StudentCode).Increment())
    .FirstOrDefault()"'
2025-06-11T07:46:04.4642336+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentCode>(
        asyncEnumerable: SingleQueryingEnumerable.Create<StudentCode>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Client Projections:
                    0 -> 0
                SELECT TOP(1) s.student_code
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.class_code == @__classCode_Value_0)
                ORDER BY s.student_code DESC) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Client Projections:
                    0 -> 0
                SELECT TOP(1) s.student_code
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.class_code == @__classCode_Value_0)
                ORDER BY s.student_code DESC, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                string value1;
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                return new StudentCode(value1).Increment();
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:46:04.4653055+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:04.4653603+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.4654054+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.4654925+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__classCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.class_code = @__classCode_Value_0
ORDER BY s.student_code DESC
LIMIT 1"
2025-06-11T07:46:04.4679467+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__classCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.class_code = @__classCode_Value_0
ORDER BY s.student_code DESC
LIMIT 1"
2025-06-11T07:46:04.4682858+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.4684068+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:04.4771648+07:00 [DBG] (///) Context '"FacultyDbContext"' started tracking '"GlobalStudentCode"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:04.4939742+07:00 [DBG] (///) The navigation '"Student"."StudentCodeNavigation"' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:04.4966899+07:00 [DBG] (///) Context '"FacultyDbContext"' started tracking '"Student"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:04.4968309+07:00 [DBG] (///) SaveChanges starting for '"FacultyDbContext"'.
2025-06-11T07:46:04.4970510+07:00 [DBG] (///) DetectChanges starting for '"FacultyDbContext"'.
2025-06-11T07:46:04.5050108+07:00 [DBG] (///) DetectChanges completed for '"FacultyDbContext"'.
2025-06-11T07:46:04.5083531+07:00 [DBG] (///) Executing 2 update commands as a batch.
2025-06-11T07:46:04.5084746+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-11T07:46:04.5095661+07:00 [DBG] (///) Created transaction savepoint.
2025-06-11T07:46:04.5096243+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:04.5097045+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.5100013+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.5100622+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?' (DbType = Date), @p5='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='300']"
""INSERT INTO global_student_code (student_code)
VALUES (@p0);
INSERT INTO student (faculty_code, student_code, address, birth_date, class_code, first_name, last_name)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING gender, is_suspended;"
2025-06-11T07:46:04.5160688+07:00 [INF] (///) Executed DbCommand ("6"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?' (DbType = Date), @p5='?', @p6='?', @p7='?'"], CommandType='Text', CommandTimeout='300']"
""INSERT INTO global_student_code (student_code)
VALUES (@p0);
INSERT INTO student (faculty_code, student_code, address, birth_date, class_code, first_name, last_name)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING gender, is_suspended;"
2025-06-11T07:46:04.5251475+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.5252647+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 8ms reading results.
2025-06-11T07:46:04.5254232+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-11T07:46:04.5266685+07:00 [DBG] (///) Released transaction savepoint.
2025-06-11T07:46:04.5271172+07:00 [DBG] (///) An entity of type '"GlobalStudentCode"' tracked by '"FacultyDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:04.5299432+07:00 [DBG] (///) An entity of type '"Student"' tracked by '"FacultyDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:04.5300219+07:00 [DBG] (///) SaveChanges completed for '"FacultyDbContext"' with 2 entities written to the database.
2025-06-11T07:46:04.5300913+07:00 [DBG] (///) Committing transaction.
2025-06-11T07:46:04.5331095+07:00 [DBG] (///) Committed transaction.
2025-06-11T07:46:04.5331888+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.5332738+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:04.5462208+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .FirstOrDefault(s => s.StudentCode == __notification_StudentCode_Value_0)"'
2025-06-11T07:46:04.5856718+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Student>(
        asyncEnumerable: SingleQueryingEnumerable.Create<Student>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Student.FacultyCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: Student.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 1], [Property: Student.Address (string) MaxLength(100), 2], [Property: Student.BirthDate (DateOnly?), 3], [Property: Student.ClassCode (string) Required FK Index MaxLength(10), 4], [Property: Student.FirstName (string) Required Index MaxLength(10), 5], [Property: Student.Gender (bool?) ValueGenerated.OnAdd, 6], [Property: Student.IsSuspended (bool) Required Index ValueGenerated.OnAdd, 7], [Property: Student.LastName (string) Required Index MaxLength(50), 8] }
                SELECT TOP(1) s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__notification_StudentCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Student.FacultyCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: Student.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 1], [Property: Student.Address (string) MaxLength(100), 2], [Property: Student.BirthDate (DateOnly?), 3], [Property: Student.ClassCode (string) Required FK Index MaxLength(10), 4], [Property: Student.FirstName (string) Required Index MaxLength(10), 5], [Property: Student.Gender (bool?) ValueGenerated.OnAdd, 6], [Property: Student.IsSuspended (bool) Required Index ValueGenerated.OnAdd, 7], [Property: Student.LastName (string) Required Index MaxLength(50), 8] }
                SELECT TOP(1) s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__notification_StudentCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Student entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Student instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Student);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Student.FacultyCode, Student.StudentCode PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\").FindPrimaryKey()], 
                        keyValues: new object[]
                        { 
                            try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetString(1) } catch (Exception) { ... }  
                        }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Student)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")]: 
                                {
                                    return 
                                    {
                                        Student instance;
                                        instance = new Student();
                                        instance.<FacultyCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                        instance.<StudentCode>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                        instance.<Address>k__BackingField = try { dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2) } catch (Exception) { ... } ;
                                        instance.<BirthDate>k__BackingField = try { dataReader.IsDBNull(3) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                        instance.<ClassCode>k__BackingField = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                                        instance.<FirstName>k__BackingField = try { dataReader.GetString(5) } catch (Exception) { ... } ;
                                        instance.<Gender>k__BackingField = try { dataReader.IsDBNull(6) ? default(bool?) : (bool?)dataReader.GetBoolean(6) } catch (Exception) { ... } ;
                                        instance.<IsSuspended>k__BackingField = try { dataReader.GetBoolean(7) } catch (Exception) { ... } ;
                                        instance.<LastName>k__BackingField = try { dataReader.GetString(8) } catch (Exception) { ... } ;
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Student)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:46:04.5878905+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.5879699+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.5881271+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:04.5881619+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.5882104+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:04.5882718+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__notification_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__notification_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:04.5902422+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__notification_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__notification_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:04.5914463+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.5915207+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 1ms reading results.
2025-06-11T07:46:04.5916486+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:04.5917104+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:05.6632008+07:00 [DBG] (///) Disposing transaction.
2025-06-11T07:46:05.6633444+07:00 [INF] (///) Request "CreateStudentCommand" processed successfully in 1229ms
2025-06-11T07:46:05.6635521+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 1233.8884ms.
2025-06-11T07:46:05.6638792+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:05.6639339+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:05.6639515+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:05.6639685+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:05.6640024+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:05.6640296+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Shared.Domain.ValueObject.StudentCode"'.
2025-06-11T07:46:05.6661244+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)" in 1244.6061ms
2025-06-11T07:46:05.6662110+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"'
2025-06-11T07:46:05.6663649+07:00 [INF] (///) HTTP "POST" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 1248.4849 ms
2025-06-11T07:46:05.6664523+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:05.6667585+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:05.6668312+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6668799+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:05.6670134+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - 200 null "application/json; charset=utf-8" 1249.6518ms
2025-06-11T07:46:05.6704326+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:46:05.6704512+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:46:05.6711198+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:05.6711191+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:05.6711843+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:05.6712488+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:05.6711856+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:05.6713423+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:05.6713500+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:05.6714181+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:05.6715063+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:05.6715110+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:05.6715460+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:05.6715463+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:05.6715959+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:05.6715959+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:05.6716139+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:05.6716265+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:05.6716562+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:05.6716604+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:05.6717725+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:46:05.6717981+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:46:05.6718190+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:05.6718431+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:05.6718411+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:05.6718734+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:05.6718867+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:05.6719006+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:05.6719097+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:05.6719262+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:05.6719290+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:05.6719670+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:05.6720099+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:05.6719504+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:05.6720587+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:05.6721034+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:05.6721171+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:05.6721536+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:05.6721716+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:46:05.6722049+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:46:05.6722368+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:05.6722405+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:05.6722552+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:05.6722648+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:05.6722782+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:05.6723393+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:05.6722734+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:05.6723598+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:05.6723905+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:05.6723945+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:05.6724122+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:05.6724461+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:05.6724799+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:05.6724888+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:05.6725055+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:05.6725472+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:05.6725514+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:05.6725874+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:05.6726157+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:05.6726456+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:05.6726742+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:05.6726038+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:05.6726989+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:05.6727130+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:05.6727233+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:05.6727359+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:05.6727490+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:05.6727547+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:05.6727717+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:05.6727809+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:05.6727959+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:05.6728052+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:05.6728197+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:05.6728429+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:05.6728657+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:05.6728298+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:05.6728874+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:05.6728984+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:05.6729036+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:05.6729186+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:05.6729354+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:05.6729666+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:05.6729754+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:05.6730010+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:05.6730018+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:05.6730316+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:05.6730475+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:05.6730689+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:05.6730390+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:05.6731307+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:05.6731519+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:05.6732163+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:05.6732746+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:05.6734789+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:46:05.6738268+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:46:05.6746090+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:05.6746090+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:05.6754103+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:05.6754624+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:05.6754968+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6754804+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:05.6755357+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:05.6755499+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6755646+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6757464+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:05.6758034+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:05.6758626+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:05.6759393+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:05.6791508+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:05.6796921+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6798053+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:05.6799519+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6800310+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:05.6801619+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 6ms
2025-06-11T07:46:05.6802352+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 6.9032ms.
2025-06-11T07:46:05.6804564+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:05.6805219+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:05.6805398+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:05.6805590+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:05.6805916+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:05.6806174+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:46:05.6808166+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 8.7594ms
2025-06-11T07:46:05.6808592+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:05.6809580+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 9.4810 ms
2025-06-11T07:46:05.6812175+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:05.6812714+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:05.6813275+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6813752+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:05.6814454+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 11.0744ms
2025-06-11T07:46:05.6911702+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.6913668+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:05.6914131+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:05.6914552+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:05.6915083+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:05.7021498+07:00 [INF] (///) Executed DbCommand ("11"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:05.7024561+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.7025140+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:05.7026188+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.7026782+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:05.7030793+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.7031202+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.7032836+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:05.7033199+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:05.7033669+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:05.7034419+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:05.7049615+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:05.7071438+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.7072641+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 2ms reading results.
2025-06-11T07:46:05.7074476+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.7075254+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:05.7076360+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 34ms
2025-06-11T07:46:05.7076957+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 34.415ms.
2025-06-11T07:46:05.7078776+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:05.7079237+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:05.7079399+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:05.7079547+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:05.7079851+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:05.7080081+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:05.7145541+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 42.5896ms
2025-06-11T07:46:05.7146247+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:05.7147023+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 43.3191 ms
2025-06-11T07:46:05.7147518+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:05.7147907+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:05.7148454+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:05.7148840+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:05.7149399+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 44.5714ms
2025-06-11T07:46:17.4857849+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - null null
2025-06-11T07:46:17.4860900+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:17.4861223+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:46:17.4862072+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:17.4863292+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:17.4863642+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:17.4864123+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:17.4864334+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:17.4864661+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:46:17.4866734+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 204 in 0.4248 ms
2025-06-11T07:46:17.4867425+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:17.4868223+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - 204 null null 1.0253ms
2025-06-11T07:46:17.4880326+07:00 [INF] (///) Request starting "HTTP/1.1" "POST" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - "application/json" 107
2025-06-11T07:46:17.4882368+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:17.4883808+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:17.4884404+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"'
2025-06-11T07:46:17.4885198+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:17.4886220+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:17.4886554+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:17.4887023+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:17.4887214+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:17.4887548+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"'
2025-06-11T07:46:17.4889060+07:00 [INF] (///) Route matched with "{action = \"CreateStudent\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateStudent(System.String, FacultyService.Api.Students.Request.StudentBasicRequest, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:46:17.4889451+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:17.4889654+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:17.4890001+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:17.4890269+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:17.4890605+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:17.4890994+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:17.4891461+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:17.4892728+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:17.4893476+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:46:17.4893816+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:17.4894028+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:17.4895361+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:17.4896015+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:17.4896212+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"' ...
2025-06-11T07:46:17.4896540+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"' using the name '""' in request data ...
2025-06-11T07:46:17.4897018+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:46:17.4897534+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"", Request id ""0HND8G4VFLPUD:0000000A"": started reading request body.
2025-06-11T07:46:17.4897811+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"", Request id ""0HND8G4VFLPUD:0000000A"": done reading request body.
2025-06-11T07:46:17.4898550+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"FacultyService.Api.Students.Request.StudentBasicRequest"'
2025-06-11T07:46:17.4898776+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"'.
2025-06-11T07:46:17.4899004+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"'.
2025-06-11T07:46:17.4899159+07:00 [DBG] (///) Attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"' ...
2025-06-11T07:46:17.4900185+07:00 [DBG] (///) Done attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Students.Request.StudentBasicRequest"'.
2025-06-11T07:46:17.4900458+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:17.4900784+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:17.4901676+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:17.4901902+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:17.4903268+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:17.4912604+07:00 [INF] (///) Processing request "CreateStudentCommand" with data [("LastName": LastName { Value: "NGUYỄN" }), ("FirstName": FirstName { Value: "NGỌC PHÚ" }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("Gender": Female), ("BirthDate": 01/15/2002), ("Address": "null"), ("IsSuspended": True)]
2025-06-11T07:46:17.4920047+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:17.4975024+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:17.4975874+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:17.4976159+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.4976590+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.4978681+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:46:17.4979332+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:46:17.4983139+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:17.4983501+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.4984155+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.4985142+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT EXISTS (
    SELECT 1
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0)"
2025-06-11T07:46:17.5010036+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT EXISTS (
    SELECT 1
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0)"
2025-06-11T07:46:17.5013370+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5014047+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:17.5018792+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:17.5019086+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.5020533+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.5020969+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__classCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.class_code = @__classCode_Value_0
ORDER BY s.student_code DESC
LIMIT 1"
2025-06-11T07:46:17.5034875+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__ef_filter__Id_0='?', @__classCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.class_code = @__classCode_Value_0
ORDER BY s.student_code DESC
LIMIT 1"
2025-06-11T07:46:17.5039945+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5040375+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:17.5042672+07:00 [DBG] (///) Context '"FacultyDbContext"' started tracking '"GlobalStudentCode"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:17.5044572+07:00 [DBG] (///) The navigation '"Student"."StudentCodeNavigation"' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:17.5045392+07:00 [DBG] (///) Context '"FacultyDbContext"' started tracking '"Student"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:17.5045754+07:00 [DBG] (///) SaveChanges starting for '"FacultyDbContext"'.
2025-06-11T07:46:17.5046039+07:00 [DBG] (///) DetectChanges starting for '"FacultyDbContext"'.
2025-06-11T07:46:17.5046888+07:00 [DBG] (///) DetectChanges completed for '"FacultyDbContext"'.
2025-06-11T07:46:17.5051811+07:00 [DBG] (///) Executing 2 update commands as a batch.
2025-06-11T07:46:17.5052753+07:00 [DBG] (///) Creating transaction savepoint.
2025-06-11T07:46:17.5064698+07:00 [DBG] (///) Created transaction savepoint.
2025-06-11T07:46:17.5065268+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:17.5065638+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.5066311+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.5066924+07:00 [DBG] (///) Executing DbCommand [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?' (DbType = Date), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?'"], CommandType='Text', CommandTimeout='300']"
""INSERT INTO global_student_code (student_code)
VALUES (@p0);
INSERT INTO student (faculty_code, student_code, address, birth_date, class_code, first_name, is_suspended, last_name)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING gender;"
2025-06-11T07:46:17.5183490+07:00 [INF] (///) Executed DbCommand ("12"ms) [Parameters=["@p0='?', @p1='?', @p2='?', @p3='?', @p4='?' (DbType = Date), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?'"], CommandType='Text', CommandTimeout='300']"
""INSERT INTO global_student_code (student_code)
VALUES (@p0);
INSERT INTO student (faculty_code, student_code, address, birth_date, class_code, first_name, is_suspended, last_name)
VALUES (@p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING gender;"
2025-06-11T07:46:17.5186839+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5187636+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:17.5188692+07:00 [DBG] (///) Releasing transaction savepoint.
2025-06-11T07:46:17.5195735+07:00 [DBG] (///) Released transaction savepoint.
2025-06-11T07:46:17.5197083+07:00 [DBG] (///) An entity of type '"GlobalStudentCode"' tracked by '"FacultyDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:17.5198963+07:00 [DBG] (///) An entity of type '"Student"' tracked by '"FacultyDbContext"' changed state from 'Added' to 'Unchanged'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:17.5199474+07:00 [DBG] (///) SaveChanges completed for '"FacultyDbContext"' with 2 entities written to the database.
2025-06-11T07:46:17.5199764+07:00 [DBG] (///) Committing transaction.
2025-06-11T07:46:17.5236394+07:00 [DBG] (///) Committed transaction.
2025-06-11T07:46:17.5236961+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5237412+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.5245224+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5246008+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5246999+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:17.5247268+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.5247716+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.5248131+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__notification_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__notification_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:17.5260027+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__ef_filter__Id_0='?', @__notification_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__notification_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:17.5262536+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5263087+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:17.5264321+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.5264873+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.6492770+07:00 [DBG] (///) Disposing transaction.
2025-06-11T07:46:17.6493713+07:00 [INF] (///) Request "CreateStudentCommand" processed successfully in 158ms
2025-06-11T07:46:17.6494867+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 159.092ms.
2025-06-11T07:46:17.6499210+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:17.6499746+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:17.6499974+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:17.6500483+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:17.6501298+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:17.6502076+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Shared.Domain.ValueObject.StudentCode"'.
2025-06-11T07:46:17.6505114+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)" in 161.4153ms
2025-06-11T07:46:17.6505628+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.CreateStudent (FacultyService.Api)"'
2025-06-11T07:46:17.6507344+07:00 [INF] (///) HTTP "POST" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 162.0817 ms
2025-06-11T07:46:17.6508318+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:17.6509395+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:17.6509954+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6510427+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.6513318+07:00 [INF] (///) Request finished "HTTP/1.1" "POST" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""" - 200 null "application/json; charset=utf-8" 163.2946ms
2025-06-11T07:46:17.6532198+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:46:17.6532198+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:46:17.6534700+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:17.6534700+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:17.6535238+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:17.6535239+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:17.6535728+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:17.6535723+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:17.6536680+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:17.6536679+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:17.6537887+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:17.6538285+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:17.6538293+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:17.6538615+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:17.6538843+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:17.6538997+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:17.6539042+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:17.6539175+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:17.6539618+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:17.6539618+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:17.6540524+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:46:17.6540965+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:17.6541255+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:17.6541365+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:46:17.6541583+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:17.6541826+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:17.6541833+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:17.6542046+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:17.6542077+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:17.6542437+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:17.6542475+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:17.6542783+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:17.6543086+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:17.6543448+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:17.6543694+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:17.6543864+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:17.6544397+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:17.6544451+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:17.6544938+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:46:17.6544949+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:46:17.6545316+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:17.6545425+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:17.6545536+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:17.6545649+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:17.6545932+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:17.6546385+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:17.6545831+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:17.6546604+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:17.6546864+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:17.6546893+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:17.6547112+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:17.6547395+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:17.6547456+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:17.6547701+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:17.6547849+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:17.6547976+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:17.6548172+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:17.6548247+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:17.6548395+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:17.6549049+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:17.6549324+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:17.6548688+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:17.6549547+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:17.6549798+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:17.6549798+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:17.6550070+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:17.6550325+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:17.6550365+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:17.6550558+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:17.6550693+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:17.6550808+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:17.6550923+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:17.6551028+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:17.6551260+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:17.6551443+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:17.6551192+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:17.6551877+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:17.6552085+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:17.6552139+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:17.6552340+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:17.6552457+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:17.6552568+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:17.6552635+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:17.6552760+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:17.6552852+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:17.6552929+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:17.6553417+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:17.6554246+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:17.6554227+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:17.6554597+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:17.6554788+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:17.6555011+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:17.6555569+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:46:17.6556329+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:17.6563594+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:46:17.6564080+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:17.6568038+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:17.6568605+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:17.6568892+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6569343+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6571023+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:17.6571540+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.6572024+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.6572517+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:17.6572553+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:17.6576393+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:17.6576812+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:17.6577086+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6577495+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6578788+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:17.6579090+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.6579450+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.6579808+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:17.6594106+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:17.6596106+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6596836+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:17.6598822+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6599494+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.6602961+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6603496+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6604916+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:17.6605401+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.6605930+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:17.6606363+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:17.6611020+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:17.6613358+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6614050+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:17.6615232+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6615838+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.6616964+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 6ms
2025-06-11T07:46:17.6617573+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 6.2853ms.
2025-06-11T07:46:17.6619527+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:17.6620213+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:17.6620413+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:17.6620602+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:17.6620873+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:17.6621144+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:46:17.6623111+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 8.0676ms
2025-06-11T07:46:17.6623625+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:17.6624548+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 8.7395 ms
2025-06-11T07:46:17.6625259+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:17.6625845+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:17.6626301+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6626694+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.6627412+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 9.5126ms
2025-06-11T07:46:17.6628969+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:17.6634590+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6635402+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:17.6636579+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6637101+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.6638357+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 7ms
2025-06-11T07:46:17.6640149+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 8.215ms.
2025-06-11T07:46:17.6642045+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:17.6642499+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:17.6642694+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:17.6642868+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:17.6643271+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:17.6643530+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:17.6645681+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 10.227ms
2025-06-11T07:46:17.6646659+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:17.6647555+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 11.0425 ms
2025-06-11T07:46:17.6648174+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:17.6648688+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:17.6649069+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:17.6649421+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:17.6650035+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 11.7788ms
2025-06-11T07:46:24.1037748+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - null null
2025-06-11T07:46:24.1040484+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:24.1041029+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/{studentCode}"' is valid for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:24.1041617+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:24.1041383+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002/registrations""?pageSize=50" - null null
2025-06-11T07:46:24.1042836+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:24.1044431+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:24.1044895+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:24.1045476+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:24.1045673+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:24.1046156+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:24.1050938+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002/registrations"'
2025-06-11T07:46:24.1051430+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/{studentCode}/registrations"' is valid for the request path '"/api/v1/it-faculty/students/N22DCPT002/registrations"'
2025-06-11T07:46:24.1052323+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:24.1053338+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:24.1054370+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:24.1054903+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:24.1055870+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:24.1056257+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:24.1056682+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:24.1078421+07:00 [INF] (///) Route matched with "{action = \"GetStudent\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudent(System.String, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:24.1079044+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:24.1079252+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:24.1079554+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:24.1080323+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:24.1080594+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:24.1080985+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:24.1084274+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:24.1085214+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:24.1085941+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' using the name '"studentCode"' in request data ...
2025-06-11T07:46:24.1086782+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:24.1087009+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:24.1087194+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:24.1090045+07:00 [INF] (///) Route matched with "{action = \"GetStudentRegistrations\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudentRegistrations(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:24.1090737+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:24.1090971+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:24.1090712+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:24.1091259+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:24.1091267+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:24.1091488+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:24.1091642+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:24.1091821+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:24.1092341+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:24.1091937+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:24.1093082+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:24.1093129+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:24.1093653+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:24.1094114+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' using the name '"studentCode"' in request data ...
2025-06-11T07:46:24.1094379+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:24.1094575+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:24.1094710+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:24.1095139+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:24.1095828+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:24.1096618+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:24.1096992+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:24.1100348+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:24.1100819+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:24.1101048+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:24.1101407+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:24.1101761+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:24.1102017+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:24.1102241+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:24.1102444+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:24.1102718+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:24.1102943+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:24.1103192+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:24.1103394+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:24.1104248+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:24.1104433+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:24.1106418+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:24.1106767+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:24.1107183+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:24.1107364+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:24.1107686+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:24.1108961+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:24.1131806+07:00 [INF] (///) Processing request "StudentByIdQuery" with data [("StudentCode": StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 })]
2025-06-11T07:46:24.1141526+07:00 [INF] (///) Processing request "StudentRegistrationsQuery" with data [("StudentCode": StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T07:46:24.1157490+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:24.1160634+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:24.1165795+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .Where(s => s.StudentCode == __request_StudentCode_Value_0)
    .Select(s => new StudentDetailReponse{ 
        StudentCode = s.StudentCode, 
        FirstName = s.FirstName, 
        LastName = s.LastName, 
        BirthDate = s.BirthDate, 
        Address = s.Address, 
        IsSuspended = s.IsSuspended, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .FirstOrDefault()"'
2025-06-11T07:46:24.1172919+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Registration>()
    .Where(r => r.StudentCode == __request_StudentCode_Value_0)
    .OrderBy(__Registration => __Registration.CreditClassId)
    .Select(r => new RegistrationBasicResponse{ 
        CreditClassId = r.CreditClassId, 
        CourseCode = r.CreditClass.CourseCode, 
        GroupNumber = r.CreditClass.GroupNumber, 
        CurrentStudent = r.CreditClass.Registrations.Count, 
        MinStudent = (int)r.CreditClass.MinStudent, 
        AcademicYear = r.CreditClass.AcademicYear, 
        Semester = r.CreditClass.Semester, 
        IsCancelled = r.IsCancelled 
    }
    )
    .Count()"'
2025-06-11T07:46:24.1188593+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM registration AS r
                WHERE (r.faculty_code == @__ef_filter__Id_0) && (r.student_code == @__request_StudentCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM registration AS r
                WHERE (r.faculty_code == @__ef_filter__Id_0) && (r.student_code == @__request_StudentCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:46:24.1189561+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<StudentDetailReponse>(
        asyncEnumerable: SingleQueryingEnumerable.Create<StudentDetailReponse>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    StudentCode -> 0
                    FirstName -> 1
                    LastName -> 2
                    BirthDate -> 3
                    Address -> 4
                    IsSuspended -> 5
                    ClassCode -> 6
                    FacultyCode -> 7
                SELECT TOP(1) s.student_code AS StudentCode, s.first_name AS FirstName, s.last_name AS LastName, s.birth_date AS BirthDate, s.address AS Address, s.is_suspended AS IsSuspended, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__request_StudentCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    StudentCode -> 0
                    FirstName -> 1
                    LastName -> 2
                    BirthDate -> 3
                    Address -> 4
                    IsSuspended -> 5
                    ClassCode -> 6
                    FacultyCode -> 7
                SELECT TOP(1) s.student_code AS StudentCode, s.first_name AS FirstName, s.last_name AS LastName, s.birth_date AS BirthDate, s.address AS Address, s.is_suspended AS IsSuspended, s.class_code AS ClassCode, s.faculty_code AS FacultyCode
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__request_StudentCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                string value1;
                string value2;
                string value3;
                DateOnly? value4;
                string value5;
                bool? value6;
                string value7;
                string value8;
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.IsDBNull(3) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.IsDBNull(4) ? default(string) : dataReader.GetString(4) } catch (Exception) { ... } ;
                value6 = try { (bool?)dataReader.GetBoolean(5) } catch (Exception) { ... } ;
                value7 = try { dataReader.GetString(6) } catch (Exception) { ... } ;
                value8 = try { dataReader.GetString(7) } catch (Exception) { ... } ;
                return new StudentDetailReponse{ 
                    StudentCode = value1, 
                    FirstName = value2, 
                    LastName = value3, 
                    BirthDate = value4, 
                    Address = value5, 
                    IsSuspended = (bool)value6, 
                    ClassCode = value7, 
                    FacultyCode = value8 
                }
                ;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:46:24.1196533+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:24.1197011+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:24.1197270+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1197655+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1198869+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:24.1199358+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:24.1199785+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:24.1200271+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM registration AS r
WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0"
2025-06-11T07:46:24.1206561+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:24.1207062+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:24.1207258+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1207581+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1208888+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:24.1209260+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:24.1209796+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:24.1210172+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code AS \"StudentCode\", s.first_name AS \"FirstName\", s.last_name AS \"LastName\", s.birth_date AS \"BirthDate\", s.address AS \"Address\", s.is_suspended AS \"IsSuspended\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:24.1223035+07:00 [INF] (///) Executed DbCommand ("1"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code AS \"StudentCode\", s.first_name AS \"FirstName\", s.last_name AS \"LastName\", s.birth_date AS \"BirthDate\", s.address AS \"Address\", s.is_suspended AS \"IsSuspended\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:24.1229370+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1229984+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:24.1230969+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1231351+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:24.1233323+07:00 [INF] (///) Request "StudentByIdQuery" processed successfully in 10ms
2025-06-11T07:46:24.1234279+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 13.8688ms.
2025-06-11T07:46:24.1236531+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:24.1237012+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:24.1237150+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:24.1237246+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:24.1237521+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:24.1239034+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Students.Response.StudentDetailReponse"'.
2025-06-11T07:46:24.1246074+07:00 [INF] (///) Executed DbCommand ("5"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM registration AS r
WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0"
2025-06-11T07:46:24.1247465+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1248053+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:24.1248965+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1249438+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:24.1257402+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Registration>()
    .Where(r => r.StudentCode == __request_StudentCode_Value_0)
    .OrderBy(__Registration => __Registration.CreditClassId)
    .Select(r => new RegistrationBasicResponse{ 
        CreditClassId = r.CreditClassId, 
        CourseCode = r.CreditClass.CourseCode, 
        GroupNumber = r.CreditClass.GroupNumber, 
        CurrentStudent = r.CreditClass.Registrations.Count, 
        MinStudent = (int)r.CreditClass.MinStudent, 
        AcademicYear = r.CreditClass.AcademicYear, 
        Semester = r.CreditClass.Semester, 
        IsCancelled = r.IsCancelled 
    }
    )
    .Skip(__p_1)
    .Take(__p_2)"'
2025-06-11T07:46:24.1279351+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)" in 19.8395ms
2025-06-11T07:46:24.1280048+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:24.1281654+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/students/N22DCPT002" responded 200 in 23.8296 ms
2025-06-11T07:46:24.1282312+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:24.1282794+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:24.1283423+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1283839+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:24.1284437+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - 200 null "application/json; charset=utf-8" 24.6642ms
2025-06-11T07:46:24.1325623+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<RegistrationBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                CreditClassId -> 0
                CourseCode -> 1
                GroupNumber -> 2
                CurrentStudent -> 3
                MinStudent -> 4
                AcademicYear -> 5
                Semester -> 6
                IsCancelled -> 7
            SELECT r0.credit_class_id AS CreditClassId, c0.course_code AS CourseCode, c0.group_number AS GroupNumber, (
                SELECT CAST(count(*) AS integer)
                FROM registration AS r1
                WHERE (r1.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.credit_class_id != NULL)) && ((c0.faculty_code == r1.faculty_code) && (c0.credit_class_id == r1.credit_class_id)))) AS CurrentStudent, CAST(c0.min_student AS integer) AS MinStudent, c0.academic_year AS AcademicYear, c0.semester AS Semester, r0.is_cancelled AS IsCancelled
            FROM 
            (
                SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
                FROM registration AS r
                WHERE (r.faculty_code == @__ef_filter__Id_0) && (r.student_code == @__request_StudentCode_Value_0)
                ORDER BY r.credit_class_id ASC
                OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
            ) AS r0
            INNER JOIN 
            (
                SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
                FROM credit_class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
            ) AS c0 ON (r0.faculty_code == c0.faculty_code) && (r0.credit_class_id == c0.credit_class_id)
            ORDER BY r0.credit_class_id ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                CreditClassId -> 0
                CourseCode -> 1
                GroupNumber -> 2
                CurrentStudent -> 3
                MinStudent -> 4
                AcademicYear -> 5
                Semester -> 6
                IsCancelled -> 7
            SELECT r0.credit_class_id AS CreditClassId, c0.course_code AS CourseCode, c0.group_number AS GroupNumber, (
                SELECT CAST(count(*) AS integer)
                FROM registration AS r1
                WHERE (r1.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.credit_class_id != NULL)) && ((c0.faculty_code == r1.faculty_code) && (c0.credit_class_id == r1.credit_class_id)))) AS CurrentStudent, CAST(c0.min_student AS integer) AS MinStudent, c0.academic_year AS AcademicYear, c0.semester AS Semester, r0.is_cancelled AS IsCancelled
            FROM 
            (
                SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
                FROM registration AS r
                WHERE (r.faculty_code == @__ef_filter__Id_0) && (r.student_code == @__request_StudentCode_Value_0)
                ORDER BY r.credit_class_id ASC
                OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
            ) AS r0
            INNER JOIN 
            (
                SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
                FROM credit_class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
            ) AS c0 ON (r0.faculty_code == c0.faculty_code) && (r0.credit_class_id == c0.credit_class_id)
            ORDER BY r0.credit_class_id ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            string value2;
            int? value3;
            int? value4;
            int? value5;
            string value6;
            int? value7;
            bool? value8;
            value1 = try { (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.IsDBNull(4) ? default(int?) : (int?)dataReader.GetInt32(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
            value7 = try { (int?)dataReader.GetInt32(6) } catch (Exception) { ... } ;
            value8 = try { (bool?)dataReader.GetBoolean(7) } catch (Exception) { ... } ;
            return new RegistrationBasicResponse{ 
                CreditClassId = (int)value1, 
                CourseCode = value2, 
                GroupNumber = (int)value3, 
                CurrentStudent = (int)value4, 
                MinStudent = (int)value5, 
                AcademicYear = value6, 
                Semester = (int)value7, 
                IsCancelled = (bool)value8 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T07:46:24.1350215+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1351412+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1352430+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:24.1352783+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:24.1353245+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:24.1353727+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT r0.credit_class_id AS \"CreditClassId\", c0.course_code AS \"CourseCode\", c0.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r1
    WHERE r1.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = r1.faculty_code AND c0.credit_class_id = r1.credit_class_id) AS \"CurrentStudent\", c0.min_student::int AS \"MinStudent\", c0.academic_year AS \"AcademicYear\", c0.semester AS \"Semester\", r0.is_cancelled AS \"IsCancelled\"
FROM (
    SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0
    ORDER BY r.credit_class_id
    LIMIT @__p_2 OFFSET @__p_1
) AS r0
INNER JOIN (
    SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
    FROM credit_class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
) AS c0 ON r0.faculty_code = c0.faculty_code AND r0.credit_class_id = c0.credit_class_id
ORDER BY r0.credit_class_id"
2025-06-11T07:46:24.1421004+07:00 [INF] (///) Executed DbCommand ("7"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT r0.credit_class_id AS \"CreditClassId\", c0.course_code AS \"CourseCode\", c0.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r1
    WHERE r1.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = r1.faculty_code AND c0.credit_class_id = r1.credit_class_id) AS \"CurrentStudent\", c0.min_student::int AS \"MinStudent\", c0.academic_year AS \"AcademicYear\", c0.semester AS \"Semester\", r0.is_cancelled AS \"IsCancelled\"
FROM (
    SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0
    ORDER BY r.credit_class_id
    LIMIT @__p_2 OFFSET @__p_1
) AS r0
INNER JOIN (
    SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
    FROM credit_class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
) AS c0 ON r0.faculty_code = c0.faculty_code AND r0.credit_class_id = c0.credit_class_id
ORDER BY r0.credit_class_id"
2025-06-11T07:46:24.1424508+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1425671+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:24.1426494+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1426998+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:24.1429059+07:00 [INF] (///) Request "StudentRegistrationsQuery" processed successfully in 28ms
2025-06-11T07:46:24.1430026+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 32.0634ms.
2025-06-11T07:46:24.1431516+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:24.1431858+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:24.1431966+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:24.1432083+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:24.1432323+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:24.1432745+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Registrations.Response.RegistrationBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:24.1447844+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)" in 35.5929ms
2025-06-11T07:46:24.1448210+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:24.1448961+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/students/N22DCPT002/registrations" responded 200 in 39.5157 ms
2025-06-11T07:46:24.1449452+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:24.1449877+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:24.1450243+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:24.1450545+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:24.1451023+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002/registrations""?pageSize=50" - 200 null "application/json; charset=utf-8" 40.9585ms
2025-06-11T07:46:33.7174771+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:46:33.7175308+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:46:33.7177226+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:33.7177060+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:33.7178222+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:33.7178766+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:33.7178727+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:33.7179398+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:33.7179533+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:33.7179938+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:33.7180625+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:33.7180624+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:33.7180964+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:33.7181369+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:33.7181626+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:33.7180952+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:33.7181988+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:33.7182085+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:33.7182252+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:33.7182549+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:33.7182906+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:46:33.7183289+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:46:33.7183558+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:33.7183687+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:33.7183829+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:33.7183938+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:33.7184151+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:33.7184215+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:33.7184521+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:33.7184720+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:33.7185100+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:33.7184402+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:33.7185562+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:33.7185629+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:33.7186017+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:33.7186305+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:33.7186420+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:33.7186894+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:33.7188049+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:46:33.7188154+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:46:33.7188519+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:33.7188697+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:33.7188951+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:33.7189135+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:33.7188736+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:33.7189614+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:33.7189802+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:33.7190059+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:33.7190402+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:33.7190820+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:33.7191038+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:33.7191072+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:33.7191318+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:33.7191452+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:33.7191570+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:33.7191804+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:33.7191810+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:33.7192175+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:33.7192441+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:33.7192727+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:33.7192099+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:33.7193113+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:33.7193188+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:33.7193339+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:33.7193431+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:33.7193580+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:33.7193660+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:33.7193766+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:33.7193887+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:33.7194016+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:33.7194120+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:33.7194217+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:33.7194355+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:33.7194780+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:33.7194984+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:33.7195163+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:33.7194575+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:33.7195311+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:33.7195405+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:33.7195615+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:33.7195758+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:33.7195805+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:33.7195991+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:33.7196175+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:33.7196288+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:33.7196388+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:33.7196438+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:33.7196675+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:33.7196695+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:33.7197372+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:33.7197564+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:33.7198007+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:33.7198535+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:33.7199559+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:46:33.7199668+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:46:33.7206662+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:33.7207030+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:33.7210314+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:33.7210777+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:33.7210992+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7210314+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:33.7211335+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7211590+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:33.7211793+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7212080+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7212800+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:33.7213146+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:33.7213263+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:33.7213473+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:33.7213597+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:33.7213763+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:33.7214075+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:33.7213997+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:33.7232473+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:33.7235313+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7236178+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:33.7237422+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7238029+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:33.7239858+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:33.7241572+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7242340+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7242710+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:33.7243044+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7243565+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7243995+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:33.7244340+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:33.7244693+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:33.7244995+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:33.7245006+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 4ms
2025-06-11T07:46:33.7245383+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:33.7245669+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 4.6702ms.
2025-06-11T07:46:33.7248268+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:33.7248927+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:33.7249089+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:33.7249243+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:33.7249498+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:33.7249732+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:46:33.7251472+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 6.5487ms
2025-06-11T07:46:33.7251897+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:33.7252808+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 7.2763 ms
2025-06-11T07:46:33.7253536+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:33.7253970+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:33.7254294+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7254555+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:33.7255167+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 7.9666ms
2025-06-11T07:46:33.7269328+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:33.7272576+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7273452+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:33.7274739+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7275403+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:33.7276709+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 7ms
2025-06-11T07:46:33.7277418+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 7.8977ms.
2025-06-11T07:46:33.7279375+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:33.7279904+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:33.7280036+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:33.7280136+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:33.7281389+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:33.7281647+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:33.7283911+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 9.8872ms
2025-06-11T07:46:33.7284471+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:33.7285213+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 10.4874 ms
2025-06-11T07:46:33.7285825+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:33.7286166+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:33.7286523+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:33.7286803+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:33.7287347+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 11.2648ms
2025-06-11T07:46:34.8187575+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002/registrations""?pageSize=50" - null null
2025-06-11T07:46:34.8187575+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - null null
2025-06-11T07:46:34.8190469+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:34.8191765+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/{studentCode}"' is valid for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:34.8192242+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:34.8193035+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:34.8193913+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:34.8194184+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:34.8194623+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:34.8194761+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:34.8195126+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:34.8196031+07:00 [INF] (///) Route matched with "{action = \"GetStudent\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudent(System.String, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:34.8196464+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:34.8196651+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:34.8196919+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:34.8197950+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:34.8198181+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:34.8198534+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:34.8198981+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:34.8190474+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002/registrations"'
2025-06-11T07:46:34.8199496+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/{studentCode}/registrations"' is valid for the request path '"/api/v1/it-faculty/students/N22DCPT002/registrations"'
2025-06-11T07:46:34.8199582+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:34.8199991+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:34.8200111+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' using the name '"studentCode"' in request data ...
2025-06-11T07:46:34.8200405+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:34.8200553+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:34.8200643+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:34.8200685+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:34.8201045+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:34.8201431+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:34.8201691+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:34.8201190+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:34.8202097+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:34.8202170+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:34.8202252+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:34.8202317+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:34.8202452+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:34.8202561+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:34.8203195+07:00 [INF] (///) Route matched with "{action = \"GetStudentRegistrations\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudentRegistrations(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:34.8203578+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:34.8203718+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:34.8203612+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:34.8203925+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:34.8204085+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:34.8204951+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:34.8205352+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:34.8205057+07:00 [INF] (///) Processing request "StudentByIdQuery" with data [("StudentCode": StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 })]
2025-06-11T07:46:34.8205754+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:34.8206263+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:34.8206658+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' using the name '"studentCode"' in request data ...
2025-06-11T07:46:34.8206928+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:34.8207040+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:34.8207154+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:34.8207378+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:34.8207529+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:34.8208289+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:34.8208643+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:34.8208946+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:34.8209132+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:34.8209335+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:34.8209592+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:34.8209776+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:34.8209955+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:34.8210131+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:34.8210569+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:34.8210739+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:34.8210913+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:34.8211088+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:34.8211236+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:34.8211349+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:34.8211728+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:34.8211880+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:34.8212139+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:34.8212756+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:34.8212912+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:34.8212907+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:34.8221409+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:34.8225157+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:34.8225787+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:34.8226049+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8226417+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8228998+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:34.8229615+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:34.8229921+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:34.8231233+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code AS \"StudentCode\", s.first_name AS \"FirstName\", s.last_name AS \"LastName\", s.birth_date AS \"BirthDate\", s.address AS \"Address\", s.is_suspended AS \"IsSuspended\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:34.8233562+07:00 [INF] (///) Processing request "StudentRegistrationsQuery" with data [("StudentCode": StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T07:46:34.8242363+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:34.8253095+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:34.8253979+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:34.8254133+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code AS \"StudentCode\", s.first_name AS \"FirstName\", s.last_name AS \"LastName\", s.birth_date AS \"BirthDate\", s.address AS \"Address\", s.is_suspended AS \"IsSuspended\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:34.8254264+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8255210+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8256611+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8256761+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:34.8257141+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:34.8257168+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:34.8257414+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:34.8257758+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM registration AS r
WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0"
2025-06-11T07:46:34.8258072+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8259115+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:34.8260311+07:00 [INF] (///) Request "StudentByIdQuery" processed successfully in 5ms
2025-06-11T07:46:34.8261062+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 5.7055ms.
2025-06-11T07:46:34.8262627+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:34.8263147+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:34.8263269+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:34.8263369+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:34.8263610+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:34.8264754+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Students.Response.StudentDetailReponse"'.
2025-06-11T07:46:34.8267127+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)" in 6.8664ms
2025-06-11T07:46:34.8267557+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:34.8268302+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/students/N22DCPT002" responded 200 in 7.4885 ms
2025-06-11T07:46:34.8269018+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:34.8269402+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:34.8269763+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8270096+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:34.8270735+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - 200 null "application/json; charset=utf-8" 8.3139ms
2025-06-11T07:46:34.8281132+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM registration AS r
WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0"
2025-06-11T07:46:34.8283322+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8283900+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:34.8285568+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8286202+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:34.8289956+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8290543+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8291892+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:34.8292279+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:34.8292579+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:34.8292946+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT r0.credit_class_id AS \"CreditClassId\", c0.course_code AS \"CourseCode\", c0.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r1
    WHERE r1.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = r1.faculty_code AND c0.credit_class_id = r1.credit_class_id) AS \"CurrentStudent\", c0.min_student::int AS \"MinStudent\", c0.academic_year AS \"AcademicYear\", c0.semester AS \"Semester\", r0.is_cancelled AS \"IsCancelled\"
FROM (
    SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0
    ORDER BY r.credit_class_id
    LIMIT @__p_2 OFFSET @__p_1
) AS r0
INNER JOIN (
    SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
    FROM credit_class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
) AS c0 ON r0.faculty_code = c0.faculty_code AND r0.credit_class_id = c0.credit_class_id
ORDER BY r0.credit_class_id"
2025-06-11T07:46:34.8321024+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT r0.credit_class_id AS \"CreditClassId\", c0.course_code AS \"CourseCode\", c0.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r1
    WHERE r1.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = r1.faculty_code AND c0.credit_class_id = r1.credit_class_id) AS \"CurrentStudent\", c0.min_student::int AS \"MinStudent\", c0.academic_year AS \"AcademicYear\", c0.semester AS \"Semester\", r0.is_cancelled AS \"IsCancelled\"
FROM (
    SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0
    ORDER BY r.credit_class_id
    LIMIT @__p_2 OFFSET @__p_1
) AS r0
INNER JOIN (
    SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
    FROM credit_class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
) AS c0 ON r0.faculty_code = c0.faculty_code AND r0.credit_class_id = c0.credit_class_id
ORDER BY r0.credit_class_id"
2025-06-11T07:46:34.8322921+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8323440+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:34.8324304+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8324700+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:34.8325397+07:00 [INF] (///) Request "StudentRegistrationsQuery" processed successfully in 9ms
2025-06-11T07:46:34.8325853+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 10.3894ms.
2025-06-11T07:46:34.8327280+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:34.8327674+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:34.8327832+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:34.8327921+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:34.8328187+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:34.8328404+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Registrations.Response.RegistrationBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:34.8331081+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)" in 12.5771ms
2025-06-11T07:46:34.8331446+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:34.8332147+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/students/N22DCPT002/registrations" responded 200 in 13.1170 ms
2025-06-11T07:46:34.8332653+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:34.8333213+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:34.8333548+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:34.8333819+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:34.8334311+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002/registrations""?pageSize=50" - 200 null "application/json; charset=utf-8" 14.6747ms
2025-06-11T07:46:41.5503518+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - null null
2025-06-11T07:46:41.5505353+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:41.5505688+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:46:41.5506350+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:41.5507220+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:41.5507501+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:41.5508451+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:41.5508632+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:41.5508943+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:46:41.5509739+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/students/N22DCPT002" responded 204 in 0.3068 ms
2025-06-11T07:46:41.5510452+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:41.5511383+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - 204 null null 0.743ms
2025-06-11T07:46:41.5525701+07:00 [INF] (///) Request starting "HTTP/1.1" "PUT" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - "application/json" 108
2025-06-11T07:46:41.5527736+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:41.5528170+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.UpdateStudent (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/{studentCode}"' is valid for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:41.5528695+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.UpdateStudent (FacultyService.Api)"'
2025-06-11T07:46:41.5529816+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:41.5530722+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:41.5531039+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:41.5532672+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:41.5532872+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:41.5533429+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.UpdateStudent (FacultyService.Api)"'
2025-06-11T07:46:41.5557370+07:00 [INF] (///) Route matched with "{action = \"UpdateStudent\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStudent(System.String, FacultyService.Api.Students.Request.UpdateStudentRequest, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:41.5557919+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:41.5558070+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:41.5559370+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:41.5559672+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:41.5559879+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:41.5560265+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:41.5560833+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:41.5562337+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:41.5563036+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' using the name '"studentCode"' in request data ...
2025-06-11T07:46:41.5563462+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.5563637+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.5563781+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:41.5566036+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.5566402+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.UpdateStudentRequest"' ...
2025-06-11T07:46:41.5566683+07:00 [DBG] (///) Attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.UpdateStudentRequest"' using the name '""' in request data ...
2025-06-11T07:46:41.5567047+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:46:41.5573458+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"", Request id ""0HND8G4VFLPUE:00000008"": started reading request body.
2025-06-11T07:46:41.5574008+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"", Request id ""0HND8G4VFLPUE:00000008"": done reading request body.
2025-06-11T07:46:41.5584116+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"FacultyService.Api.Students.Request.UpdateStudentRequest"'
2025-06-11T07:46:41.5584612+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.UpdateStudentRequest"'.
2025-06-11T07:46:41.5584833+07:00 [DBG] (///) Done attempting to bind parameter '"request"' of type '"FacultyService.Api.Students.Request.UpdateStudentRequest"'.
2025-06-11T07:46:41.5585040+07:00 [DBG] (///) Attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Students.Request.UpdateStudentRequest"' ...
2025-06-11T07:46:41.5594462+07:00 [DBG] (///) Done attempting to validate the bound parameter '"request"' of type '"FacultyService.Api.Students.Request.UpdateStudentRequest"'.
2025-06-11T07:46:41.5594914+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:41.5595282+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:41.5595472+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:41.5595763+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:41.5597107+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.UpdateStudent (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:41.5656146+07:00 [INF] (///) Processing request "UpdateStudentCommand" with data [("OldStudentCode": StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }), ("NewStudentCode": "null"), ("LastName": LastName { Value: "NGỌC PHÚ" }), ("FirstName": FirstName { Value: "NGUYỄN" }), ("BirthDate": 01/15/2002), ("Gender": Female), ("Address": "null"), ("IsSuspended": False)]
2025-06-11T07:46:41.5708694+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:41.5714885+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .AsNoTracking()
    .FirstOrDefault(s => s.StudentCode == __request_OldStudentCode_Value_0)"'
2025-06-11T07:46:41.5787857+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Student>(
        asyncEnumerable: SingleQueryingEnumerable.Create<Student>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Student.FacultyCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: Student.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 1], [Property: Student.Address (string) MaxLength(100), 2], [Property: Student.BirthDate (DateOnly?), 3], [Property: Student.ClassCode (string) Required FK Index MaxLength(10), 4], [Property: Student.FirstName (string) Required Index MaxLength(10), 5], [Property: Student.Gender (bool?) ValueGenerated.OnAdd, 6], [Property: Student.IsSuspended (bool) Required Index ValueGenerated.OnAdd, 7], [Property: Student.LastName (string) Required Index MaxLength(50), 8] }
                SELECT TOP(1) s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__request_OldStudentCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Student.FacultyCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: Student.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 1], [Property: Student.Address (string) MaxLength(100), 2], [Property: Student.BirthDate (DateOnly?), 3], [Property: Student.ClassCode (string) Required FK Index MaxLength(10), 4], [Property: Student.FirstName (string) Required Index MaxLength(10), 5], [Property: Student.Gender (bool?) ValueGenerated.OnAdd, 6], [Property: Student.IsSuspended (bool) Required Index ValueGenerated.OnAdd, 7], [Property: Student.LastName (string) Required Index MaxLength(50), 8] }
                SELECT TOP(1) s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__request_OldStudentCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Student entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Student instance1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Student);
                    try { (object)dataReader.GetString(0) } catch (Exception) { ... }  != null && try { (object)dataReader.GetString(1) } catch (Exception) { ... }  != null ? 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")]: 
                                {
                                    return 
                                    {
                                        Student instance;
                                        instance = new Student();
                                        instance.<FacultyCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                        instance.<StudentCode>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                        instance.<Address>k__BackingField = try { dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2) } catch (Exception) { ... } ;
                                        instance.<BirthDate>k__BackingField = try { dataReader.IsDBNull(3) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                        instance.<ClassCode>k__BackingField = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                                        instance.<FirstName>k__BackingField = try { dataReader.GetString(5) } catch (Exception) { ... } ;
                                        instance.<Gender>k__BackingField = try { dataReader.IsDBNull(6) ? default(bool?) : (bool?)dataReader.GetBoolean(6) } catch (Exception) { ... } ;
                                        instance.<IsSuspended>k__BackingField = try { dataReader.GetBoolean(7) } catch (Exception) { ... } ;
                                        instance.<LastName>k__BackingField = try { dataReader.GetString(8) } catch (Exception) { ... } ;
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: NoTracking, 
                                            structuralType: [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Student)
                        }
                        ;
                        return instance1;
                    } : 
                    {
                        object[] keyValues1;
                        keyValues1 = new object[]
                        { 
                            try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetString(1) } catch (Exception) { ... }  
                        };
                        return ShapedQueryCompilingExpressionVisitor.CreateNullKeyValueInNoTrackingQuery(
                            entityType: [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{3} => namelessParameter{3}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")], 
                            properties: [LIFTABLE Constant: List<RuntimeProperty> { Property: Student.FacultyCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), Property: Student.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10) } | Resolver: c => c.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\").FindPrimaryKey().Properties], 
                            keyValues: keyValues1);
                    };
                    return instance1;
                };
                return entity;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:46:41.5810478+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:41.5811193+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:41.5811409+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.5811822+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.5813595+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:41.5814795+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.5815070+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.5815660+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_OldStudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_OldStudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:41.5832910+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_OldStudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_OldStudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:41.5839187+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.5839739+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:41.5840944+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.5841447+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.5881160+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .Where(s => s.StudentCode == __request_OldStudentCode_Value_0)
    .ExecuteUpdate(x => x.SetProperty<string>(
        propertyExpression: s => s.FirstName, 
        valueExpression: __request_FirstName_Value_1).SetProperty<string>(
        propertyExpression: s => s.LastName, 
        valueExpression: __request_LastName_Value_2).SetProperty<DateOnly?>(
        propertyExpression: s => s.BirthDate, 
        valueExpression: __request_BirthDate_3).SetProperty<string>(
        propertyExpression: s => s.Address, 
        valueExpression: __request_Address_4).SetProperty<bool?>(
        propertyExpression: s => (bool?)s.IsSuspended, 
        valueExpression: __request_IsSuspended_5).SetProperty<bool?>(
        propertyExpression: s => s.Gender, 
        valueExpression: __ToBoolean_6))"'
2025-06-11T07:46:41.6004180+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            UPDATE student AS s
            SET 
            s.gender = @__ToBoolean_6,
                s.is_suspended = @__request_IsSuspended_5,
                s.address = @__request_Address_4,
                s.birth_date = @__request_BirthDate_3,
                s.last_name = @__request_LastName_Value_2,
                s.first_name = @__request_FirstName_Value_1
            SELECT 1
            FROM student AS s
            WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__request_OldStudentCode_Value_0)) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            UPDATE student AS s
            SET 
            s.gender = @__ToBoolean_6,
                s.is_suspended = @__request_IsSuspended_5,
                s.address = @__request_Address_4,
                s.birth_date = @__request_BirthDate_3,
                s.last_name = @__request_LastName_Value_2,
                s.first_name = @__request_FirstName_Value_1
            SELECT 1
            FROM student AS s
            WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__request_OldStudentCode_Value_0), 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        contextType: FacultyService.Application.FacultyDbContext, 
        commandSource: BulkUpdate, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T07:46:41.6044133+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-11T07:46:41.6044721+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-11T07:46:41.6044934+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (0ms).
2025-06-11T07:46:41.6045094+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.6045425+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.6049120+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ToBoolean_6='?' (DbType = Boolean), @__request_IsSuspended_5='?' (DbType = Boolean), @__request_BirthDate_3='?' (DbType = Date), @__request_LastName_Value_2='?', @__request_FirstName_Value_1='?', @__ef_filter__Id_0='?', @__request_OldStudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""UPDATE student AS s
SET gender = @__ToBoolean_6,
    is_suspended = @__request_IsSuspended_5,
    address = NULL,
    birth_date = @__request_BirthDate_3,
    last_name = @__request_LastName_Value_2,
    first_name = @__request_FirstName_Value_1
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_OldStudentCode_Value_0"
2025-06-11T07:46:41.6083037+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ToBoolean_6='?' (DbType = Boolean), @__request_IsSuspended_5='?' (DbType = Boolean), @__request_BirthDate_3='?' (DbType = Date), @__request_LastName_Value_2='?', @__request_FirstName_Value_1='?', @__ef_filter__Id_0='?', @__request_OldStudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""UPDATE student AS s
SET gender = @__ToBoolean_6,
    is_suspended = @__request_IsSuspended_5,
    address = NULL,
    birth_date = @__request_BirthDate_3,
    last_name = @__request_LastName_Value_2,
    first_name = @__request_FirstName_Value_1
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_OldStudentCode_Value_0"
2025-06-11T07:46:41.6091127+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.6091696+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.6116525+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .Where(s => s.StudentCode == __notification_OldStudentCode_Value_0)
    .FirstOrDefault()"'
2025-06-11T07:46:41.6177914+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Student>(
        asyncEnumerable: SingleQueryingEnumerable.Create<Student>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Student.FacultyCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: Student.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 1], [Property: Student.Address (string) MaxLength(100), 2], [Property: Student.BirthDate (DateOnly?), 3], [Property: Student.ClassCode (string) Required FK Index MaxLength(10), 4], [Property: Student.FirstName (string) Required Index MaxLength(10), 5], [Property: Student.Gender (bool?) ValueGenerated.OnAdd, 6], [Property: Student.IsSuspended (bool) Required Index ValueGenerated.OnAdd, 7], [Property: Student.LastName (string) Required Index MaxLength(50), 8] }
                SELECT TOP(1) s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__notification_OldStudentCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Student.FacultyCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 0], [Property: Student.StudentCode (string) Required PK FK Index AfterSave:Throw MaxLength(10), 1], [Property: Student.Address (string) MaxLength(100), 2], [Property: Student.BirthDate (DateOnly?), 3], [Property: Student.ClassCode (string) Required FK Index MaxLength(10), 4], [Property: Student.FirstName (string) Required Index MaxLength(10), 5], [Property: Student.Gender (bool?) ValueGenerated.OnAdd, 6], [Property: Student.IsSuspended (bool) Required Index ValueGenerated.OnAdd, 7], [Property: Student.LastName (string) Required Index MaxLength(50), 8] }
                SELECT TOP(1) s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (s.student_code == @__notification_OldStudentCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                Student entity;
                entity = 
                {
                    MaterializationContext materializationContext1;
                    IEntityType entityType1;
                    Student instance1;
                    InternalEntityEntry entry1;
                    bool hasNullKey1;
                    materializationContext1 = new MaterializationContext(
                        [LIFTABLE Constant: ValueBuffer | Resolver: _ => (object)ValueBuffer.Empty], 
                        queryContext.Context
                    );
                    instance1 = default(Student);
                    entry1 = queryContext.TryGetEntry(
                        key: [LIFTABLE Constant: Key: Student.FacultyCode, Student.StudentCode PK | Resolver: c => c.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\").FindPrimaryKey()], 
                        keyValues: new object[]
                        { 
                            try { (object)dataReader.GetString(0) } catch (Exception) { ... } , 
                            try { (object)dataReader.GetString(1) } catch (Exception) { ... }  
                        }, 
                        throwOnNullKey: True, 
                        hasNullKey: hasNullKey1);
                    !(hasNullKey1) ? entry1 != default(InternalEntityEntry) ? 
                    {
                        entityType1 = entry1.EntityType;
                        return instance1 = (Student)entry1.Entity;
                    } : 
                    {
                        ISnapshot shadowSnapshot1;
                        shadowSnapshot1 = [LIFTABLE Constant: Snapshot | Resolver: _ => Snapshot.Empty];
                        entityType1 = [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{0} => namelessParameter{0}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")];
                        instance1 = switch (entityType1)
                        {
                            case [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{1} => namelessParameter{1}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")]: 
                                {
                                    return 
                                    {
                                        Student instance;
                                        instance = new Student();
                                        instance.<FacultyCode>k__BackingField = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                                        instance.<StudentCode>k__BackingField = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                                        instance.<Address>k__BackingField = try { dataReader.IsDBNull(2) ? default(string) : dataReader.GetString(2) } catch (Exception) { ... } ;
                                        instance.<BirthDate>k__BackingField = try { dataReader.IsDBNull(3) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(3) } catch (Exception) { ... } ;
                                        instance.<ClassCode>k__BackingField = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                                        instance.<FirstName>k__BackingField = try { dataReader.GetString(5) } catch (Exception) { ... } ;
                                        instance.<Gender>k__BackingField = try { dataReader.IsDBNull(6) ? default(bool?) : (bool?)dataReader.GetBoolean(6) } catch (Exception) { ... } ;
                                        instance.<IsSuspended>k__BackingField = try { dataReader.GetBoolean(7) } catch (Exception) { ... } ;
                                        instance.<LastName>k__BackingField = try { dataReader.GetString(8) } catch (Exception) { ... } ;
                                        (instance is IInjectableService) ? ((IInjectableService)instance).Injected(
                                            context: materializationContext1.Context, 
                                            entity: instance, 
                                            queryTrackingBehavior: TrackAll, 
                                            structuralType: [LIFTABLE Constant: EntityType: Student | Resolver: namelessParameter{2} => namelessParameter{2}.Dependencies.Model.FindEntityType(\"FacultyService.Domain.Entity.Student\")]) : default(void);
                                        return instance;
                                    }}
                            default: 
                                default(Student)
                        }
                        ;
                        entry1 = entityType1 == default(IEntityType) ? default(InternalEntityEntry) : queryContext.StartTracking(
                            entityType: entityType1, 
                            entity: instance1, 
                            snapshot: shadowSnapshot1);
                        return instance1;
                    } : default(void);
                    return instance1;
                };
                return entity;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:46:41.6206289+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.6207156+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.6208345+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:41.6208775+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.6209070+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.6209520+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__notification_OldStudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__notification_OldStudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:41.6231132+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__notification_OldStudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.faculty_code, s.student_code, s.address, s.birth_date, s.class_code, s.first_name, s.gender, s.is_suspended, s.last_name
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__notification_OldStudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:41.6245822+07:00 [DBG] (///) Context '"FacultyDbContext"' started tracking '"Student"' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-06-11T07:46:41.6249654+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.6250179+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 1ms reading results.
2025-06-11T07:46:41.6251688+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.6252146+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.7460757+07:00 [INF] (///) Request "UpdateStudentCommand" processed successfully in 180ms
2025-06-11T07:46:41.7461916+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.UpdateStudent (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 186.4373ms.
2025-06-11T07:46:41.7463568+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:41.7464050+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:41.7464201+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:41.7464295+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:41.7464579+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:41.7464814+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Shared.Domain.ValueObject.StudentCode"'.
2025-06-11T07:46:41.7466399+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.UpdateStudent (FacultyService.Api)" in 190.6212ms
2025-06-11T07:46:41.7466789+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.UpdateStudent (FacultyService.Api)"'
2025-06-11T07:46:41.7467561+07:00 [INF] (///) HTTP "PUT" "/api/v1/it-faculty/students/N22DCPT002" responded 200 in 193.7326 ms
2025-06-11T07:46:41.7468144+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:41.7468532+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:41.7468842+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7469182+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.7469805+07:00 [INF] (///) Request finished "HTTP/1.1" "PUT" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - 200 null "application/json; charset=utf-8" 194.3942ms
2025-06-11T07:46:41.7489516+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002/registrations""?pageSize=50" - null null
2025-06-11T07:46:41.7489516+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - null null
2025-06-11T07:46:41.7492140+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002/registrations"'
2025-06-11T07:46:41.7492142+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:41.7492627+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/{studentCode}/registrations"' is valid for the request path '"/api/v1/it-faculty/students/N22DCPT002/registrations"'
2025-06-11T07:46:41.7492675+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/{studentCode}"' is valid for the request path '"/api/v1/it-faculty/students/N22DCPT002"'
2025-06-11T07:46:41.7493290+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:41.7494101+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:41.7493291+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:41.7494779+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:41.7495173+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:41.7495463+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:41.7495525+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:41.7495695+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:41.7495990+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:41.7496051+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:41.7496169+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:41.7496242+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:41.7496617+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:41.7496617+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:41.7497498+07:00 [INF] (///) Route matched with "{action = \"GetStudentRegistrations\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudentRegistrations(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:41.7497881+07:00 [INF] (///) Route matched with "{action = \"GetStudent\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStudent(System.String, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:41.7497955+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:41.7498280+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:41.7498295+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:41.7498543+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:41.7498592+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:41.7498808+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:41.7498886+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:41.7499053+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:41.7499127+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:41.7499499+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:41.7499259+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:41.7499936+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:41.7500195+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:41.7500480+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:41.7500675+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:41.7500949+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' using the name '"studentCode"' in request data ...
2025-06-11T07:46:41.7501144+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:41.7501290+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.7501502+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.7501526+07:00 [DBG] (///) Attempting to bind parameter '"studentCode"' of type '"System.String"' using the name '"studentCode"' in request data ...
2025-06-11T07:46:41.7501688+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:41.7502005+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.7502225+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:41.7501821+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.7502482+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:41.7502642+07:00 [DBG] (///) Done attempting to bind parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.7502851+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCode"' of type '"System.String"' ...
2025-06-11T07:46:41.7502920+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:41.7503188+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCode"' of type '"System.String"'.
2025-06-11T07:46:41.7503304+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:41.7503411+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:41.7503556+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:41.7503727+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:41.7503869+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:41.7503910+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:41.7504192+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:41.7504437+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:41.7504687+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:41.7504768+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:41.7504909+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:41.7505121+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:41.7505340+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:41.7505544+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:41.7505748+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:41.7505910+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:41.7506011+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:41.7506086+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:41.7506538+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:41.7506734+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:41.7506966+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:41.7507130+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:41.7507313+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:41.7507961+07:00 [INF] (///) Processing request "StudentByIdQuery" with data [("StudentCode": StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 })]
2025-06-11T07:46:41.7508410+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:41.7509356+07:00 [INF] (///) Processing request "StudentRegistrationsQuery" with data [("StudentCode": StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T07:46:41.7515613+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:41.7515614+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:41.7519655+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:41.7520275+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:41.7520573+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7520981+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:41.7521475+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:41.7521323+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7521789+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7522266+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7523315+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:41.7523732+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:41.7523889+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.7524104+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.7524214+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.7524398+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.7524720+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM registration AS r
WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0"
2025-06-11T07:46:41.7524646+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code AS \"StudentCode\", s.first_name AS \"FirstName\", s.last_name AS \"LastName\", s.birth_date AS \"BirthDate\", s.address AS \"Address\", s.is_suspended AS \"IsSuspended\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:41.7546380+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM registration AS r
WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0"
2025-06-11T07:46:41.7546399+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code AS \"StudentCode\", s.first_name AS \"FirstName\", s.last_name AS \"LastName\", s.birth_date AS \"BirthDate\", s.address AS \"Address\", s.is_suspended AS \"IsSuspended\", s.class_code AS \"ClassCode\", s.faculty_code AS \"FacultyCode\"
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0 AND s.student_code = @__request_StudentCode_Value_0
LIMIT 1"
2025-06-11T07:46:41.7548574+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7548935+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7549056+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:41.7549520+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:41.7550221+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7550623+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7551202+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.7550705+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.7552143+07:00 [INF] (///) Request "StudentByIdQuery" processed successfully in 4ms
2025-06-11T07:46:41.7552679+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 4.6202ms.
2025-06-11T07:46:41.7554541+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:41.7555103+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:41.7555231+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:41.7555396+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:41.7555512+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7555751+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:41.7556081+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Students.Response.StudentDetailReponse"'.
2025-06-11T07:46:41.7556164+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7558033+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)" in 5.7806ms
2025-06-11T07:46:41.7558118+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:41.7558420+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudent (FacultyService.Api)"'
2025-06-11T07:46:41.7558492+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.7558959+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:41.7559245+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/students/N22DCPT002" responded 200 in 6.3998 ms
2025-06-11T07:46:41.7559337+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT r0.credit_class_id AS \"CreditClassId\", c0.course_code AS \"CourseCode\", c0.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r1
    WHERE r1.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = r1.faculty_code AND c0.credit_class_id = r1.credit_class_id) AS \"CurrentStudent\", c0.min_student::int AS \"MinStudent\", c0.academic_year AS \"AcademicYear\", c0.semester AS \"Semester\", r0.is_cancelled AS \"IsCancelled\"
FROM (
    SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0
    ORDER BY r.credit_class_id
    LIMIT @__p_2 OFFSET @__p_1
) AS r0
INNER JOIN (
    SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
    FROM credit_class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
) AS c0 ON r0.faculty_code = c0.faculty_code AND r0.credit_class_id = c0.credit_class_id
ORDER BY r0.credit_class_id"
2025-06-11T07:46:41.7559751+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:41.7560140+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:41.7560453+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7560753+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.7561282+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002""" - 200 null "application/json; charset=utf-8" 7.1815ms
2025-06-11T07:46:41.7596419+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_StudentCode_Value_0='?', @__p_2='?' (DbType = Int32), @__p_1='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT r0.credit_class_id AS \"CreditClassId\", c0.course_code AS \"CourseCode\", c0.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r1
    WHERE r1.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = r1.faculty_code AND c0.credit_class_id = r1.credit_class_id) AS \"CurrentStudent\", c0.min_student::int AS \"MinStudent\", c0.academic_year AS \"AcademicYear\", c0.semester AS \"Semester\", r0.is_cancelled AS \"IsCancelled\"
FROM (
    SELECT r.faculty_code, r.credit_class_id, r.is_cancelled
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND r.student_code = @__request_StudentCode_Value_0
    ORDER BY r.credit_class_id
    LIMIT @__p_2 OFFSET @__p_1
) AS r0
INNER JOIN (
    SELECT c.faculty_code, c.credit_class_id, c.academic_year, c.course_code, c.group_number, c.min_student, c.semester
    FROM credit_class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
) AS c0 ON r0.faculty_code = c0.faculty_code AND r0.credit_class_id = c0.credit_class_id
ORDER BY r0.credit_class_id"
2025-06-11T07:46:41.7598279+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7598706+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:41.7599719+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7600271+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.7601188+07:00 [INF] (///) Request "StudentRegistrationsQuery" processed successfully in 9ms
2025-06-11T07:46:41.7601653+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 9.2853ms.
2025-06-11T07:46:41.7602940+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:41.7603384+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:41.7603464+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:41.7603591+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:41.7603955+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:41.7604179+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Registrations.Response.RegistrationBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:41.7606642+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)" in 10.7194ms
2025-06-11T07:46:41.7606898+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.GetStudentRegistrations (FacultyService.Api)"'
2025-06-11T07:46:41.7607515+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/students/N22DCPT002/registrations" responded 200 in 11.3096 ms
2025-06-11T07:46:41.7607975+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:41.7608290+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:41.7608571+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:41.7608803+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:41.7609296+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/students/N22DCPT002/registrations""?pageSize=50" - 200 null "application/json; charset=utf-8" 11.9827ms
2025-06-11T07:46:44.1655602+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:46:44.1655602+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:46:44.1657887+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:44.1657888+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:44.1658396+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:44.1658395+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:44.1658946+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:44.1658946+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:44.1659690+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:44.1659690+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:44.1660654+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:44.1660654+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:44.1660981+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:44.1661497+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:44.1661686+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:44.1661896+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:44.1662055+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:44.1662236+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:44.1662384+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:44.1662606+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:44.1662850+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:46:44.1663072+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:46:44.1663469+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:44.1663580+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:44.1663782+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:44.1663731+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:44.1664069+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:44.1664068+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:44.1664314+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:44.1664410+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:44.1664539+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:44.1664668+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:44.1664951+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:44.1664951+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:44.1665378+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:44.1665378+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:44.1666096+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:44.1666627+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:46:44.1667010+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:44.1667183+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:44.1666319+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:44.1667580+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:44.1667841+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:46:44.1667957+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:44.1668208+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:44.1668278+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:44.1668468+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:44.1668567+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:44.1668676+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:44.1668948+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:44.1668961+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:44.1669206+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:44.1669407+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:44.1669558+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:44.1669687+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:44.1669951+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:44.1670016+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:44.1670258+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:44.1670390+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:44.1670503+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:44.1670614+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:44.1670766+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:44.1670846+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:44.1670998+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:44.1671241+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:44.1671079+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:44.1672032+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:44.1672193+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:44.1672340+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:44.1672486+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:44.1672552+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:44.1672748+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:44.1672827+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:44.1673028+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:44.1673142+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:44.1673216+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:44.1673448+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:44.1673513+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:44.1673675+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:44.1673922+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:44.1674067+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:44.1674127+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:44.1674282+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:44.1674555+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:44.1674644+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:44.1674755+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:44.1674839+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:44.1675066+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:44.1675164+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:44.1675374+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:44.1675578+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:44.1676410+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:44.1676704+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:44.1677865+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:46:44.1677862+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:46:44.1685534+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:44.1686156+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:44.1689793+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:44.1689793+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:44.1690419+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:44.1690430+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:44.1690843+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1690843+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1691325+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1691311+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1692817+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:44.1692793+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:44.1693212+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:44.1693213+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:44.1693606+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:44.1693654+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:44.1694107+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:44.1694109+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:44.1714269+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:44.1717440+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1718364+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:44.1719657+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1720316+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:44.1720642+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:44.1722498+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1723593+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:44.1724450+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1724513+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1724737+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:44.1725150+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1725689+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 4ms
2025-06-11T07:46:44.1726430+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:44.1726273+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 4.914ms.
2025-06-11T07:46:44.1726684+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:44.1726998+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:44.1727371+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:44.1728113+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:44.1728588+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:44.1729800+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:44.1729930+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:44.1730372+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:44.1730685+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:46:44.1732493+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 6.7543ms
2025-06-11T07:46:44.1733429+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:44.1734367+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 7.4309 ms
2025-06-11T07:46:44.1735050+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:44.1735514+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:44.1735822+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1736074+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:44.1737121+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 8.1207ms
2025-06-11T07:46:44.1747171+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:44.1749801+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1750393+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:44.1751472+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1751892+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:44.1753037+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 7ms
2025-06-11T07:46:44.1753519+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 7.6715ms.
2025-06-11T07:46:44.1755085+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:44.1755569+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:44.1755719+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:44.1755904+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:44.1756191+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:44.1756530+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:44.1758393+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 9.3424ms
2025-06-11T07:46:44.1759584+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:44.1760394+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 10.0256 ms
2025-06-11T07:46:44.1761833+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:44.1762298+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:44.1762721+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:44.1763141+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:44.1763740+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 10.8105ms
2025-06-11T07:46:51.1439708+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - null null
2025-06-11T07:46:51.1442711+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:46:51.1443285+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:46:51.1445639+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:51.1446916+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:51.1447227+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:51.1447820+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:51.1448060+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:51.1448459+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:46:51.1449406+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/students/bulk" responded 204 in 0.3401 ms
2025-06-11T07:46:51.1450113+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:51.1450790+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 204 null null 1.1126ms
2025-06-11T07:46:51.1477774+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - "application/json" 27
2025-06-11T07:46:51.1480846+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:46:51.1481514+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/bulk"' is valid for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:46:51.1482189+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:46:51.1483359+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:51.1484497+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:51.1484873+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:51.1485418+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:51.1485704+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:51.1486289+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:46:51.1513393+07:00 [INF] (///) Route matched with "{action = \"DeleteStudents\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteStudents(System.Collections.Generic.List`1[System.String], System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:46:51.1514180+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:51.1514380+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:51.1514626+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:51.1514740+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:51.1514968+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:51.1515385+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:51.1516114+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:46:51.1517921+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:46:51.1518606+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' using the name '""' in request data ...
2025-06-11T07:46:51.1519079+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:46:51.1527010+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"", Request id ""0HND8G4VFLPUE:0000000C"": started reading request body.
2025-06-11T07:46:51.1527579+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"", Request id ""0HND8G4VFLPUE:0000000C"": done reading request body.
2025-06-11T07:46:51.1535006+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'
2025-06-11T07:46:51.1535362+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:46:51.1535557+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:46:51.1535884+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:46:51.1545659+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:46:51.1545975+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:51.1546311+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:51.1546546+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:51.1546872+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:51.1547981+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:51.1595407+07:00 [INF] (///) Processing request "DeleteStudentsCommand" with data [("StudentCodes": [StudentCode { Value: "N22DCPT001", AcademicYear: 22, ClassCode: "PT", StudentNumber: 1 }, StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }])]
2025-06-11T07:46:51.1618370+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:51.1619032+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:51.1619419+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:51.1619708+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.1620128+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.1621437+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:46:51.1621840+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:46:51.1629721+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<GlobalStudentCode>()
    .Where(s => __request_StudentCodes_0.Contains((StudentCode)s.StudentCode))
    .ExecuteDelete()"'
2025-06-11T07:46:51.1785386+07:00 [ERR] (///) Error deleting students
System.InvalidOperationException: The LINQ expression '__request_StudentCodes_0
    .Contains((StudentCode)StructuralTypeShaperExpression(
        StructuralType: FacultyService.Domain.Entity.GlobalStudentCode
        ValueBufferExpression: ProjectionBindingExpression: EmptyProjectionMember
        IsNullable: False).StudentCode)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.TranslateSubquery(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.<VisitMethodCall>g__TranslateAsSubquery|33_0(Expression expression, <>c__DisplayClass33_0&)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Query.Internal.NpgsqlSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.Translate(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateExpression(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateLambdaExpression(ShapedQueryExpression shapedQueryExpression, LambdaExpression lambdaExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateWhere(ShapedQueryExpression source, LambdaExpression predicate)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Query.Internal.NpgsqlQueryableMethodTranslatingExpressionVisitor.TranslateWhere(ShapedQueryExpression source, LambdaExpression predicate)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteDeleteAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 21
2025-06-11T07:46:51.1870499+07:00 [DBG] (///) Rolling back transaction.
2025-06-11T07:46:51.1906662+07:00 [DBG] (///) Rolled back transaction.
2025-06-11T07:46:51.1907417+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.1907853+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:51.1917554+07:00 [DBG] (///) Disposing transaction.
2025-06-11T07:46:51.1920409+07:00 [ERR] (///) Error processing request "DeleteStudentsCommand" after 32ms
Shared.Exception.BusinessException: Không thể xóa sinh viên, hãy thử lại
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
2025-06-11T07:46:51.1931112+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" in 41.5823ms
2025-06-11T07:46:51.1931685+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:46:51.1932790+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BusinessException: Không thể xóa sinh viên, hãy thử lại
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
   at FacultyService.Api.Students.Controller.StudentsController.DeleteStudents(List`1 studentCodes, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api/Students/Controller/StudentsController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Finbuckle.MultiTenant.AspNetCore.Internal.MultiTenantMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-11T07:46:51.1983185+07:00 [ERR] (///) HTTP "DELETE" "/api/v1/it-faculty/students/bulk" responded 500 in 49.9505 ms
2025-06-11T07:46:51.1983945+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:51.1984355+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:51.1984869+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.1985236+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:51.1985801+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 500 null "application/problem+json" 50.7951ms
2025-06-11T07:46:51.2021957+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:46:51.2021958+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:46:51.2024648+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:51.2024699+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:51.2025111+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:46:51.2025111+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:46:51.2025639+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:51.2025638+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:51.2026397+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:51.2026397+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:46:51.2027537+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:51.2027915+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:51.2027718+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:46:51.2028329+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:46:51.2028889+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:51.2029040+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:46:51.2029092+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:51.2029249+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:46:51.2029501+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:51.2030383+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:51.2031259+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:46:51.2031255+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:46:51.2031906+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:51.2032015+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:46:51.2032228+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:51.2032342+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:46:51.2032658+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:51.2032768+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:51.2033174+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:51.2033424+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:51.2032899+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:46:51.2033857+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:51.2033902+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:46:51.2034219+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:51.2034401+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:46:51.2034675+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:46:51.2034996+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:51.2035129+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:51.2036577+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:46:51.2036974+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:51.2037242+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:51.2037516+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:46:51.2037109+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:46:51.2037831+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:51.2037942+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:46:51.2038125+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:51.2038238+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:51.2038321+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:46:51.2038673+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:46:51.2038673+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:51.2038947+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:51.2039264+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:51.2039368+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:46:51.2039649+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:51.2039958+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:51.2040235+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:51.2040462+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:51.2040705+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:51.2039830+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:46:51.2040935+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:51.2041234+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:51.2041290+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:51.2041590+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:51.2041504+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:46:51.2041756+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:51.2041911+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:46:51.2042017+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:51.2042268+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:46:51.2042297+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:51.2042549+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:51.2042533+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:46:51.2043303+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:51.2043545+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:46:51.2042787+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:51.2043831+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:51.2043807+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:46:51.2044139+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:51.2044374+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:46:51.2044356+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:51.2044719+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:51.2044718+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:51.2044949+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:51.2045076+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:51.2045158+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:46:51.2045228+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:51.2045620+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:46:51.2045903+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:51.2045516+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:51.2046178+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:51.2046529+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:46:51.2046777+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:46:51.2047394+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:51.2047973+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:46:51.2048711+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:46:51.2049034+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:46:51.2057680+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:51.2057735+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:46:51.2064481+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:51.2064482+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:46:51.2064994+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:51.2064996+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:46:51.2065387+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2065387+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2065882+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2065864+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2067268+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:51.2067574+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:51.2067868+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:51.2068187+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:51.2068429+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:51.2068700+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:51.2068640+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:51.2069116+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:51.2087588+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:46:51.2089608+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2090304+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:51.2092209+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2093075+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:51.2094029+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:46:51.2095732+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2096180+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:51.2097135+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2097115+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2097629+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:51.2097689+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2098533+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 4ms
2025-06-11T07:46:51.2099020+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:46:51.2099391+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:51.2099768+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:46:51.2099003+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 5.1167ms.
2025-06-11T07:46:51.2100191+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:51.2102012+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:51.2102511+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:51.2102739+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:51.2102964+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:51.2103354+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:51.2103670+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:46:51.2105477+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 7.1727ms
2025-06-11T07:46:51.2106107+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:46:51.2108244+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 8.0079 ms
2025-06-11T07:46:51.2108980+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:46:51.2109534+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:51.2110020+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2110334+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:51.2110993+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 8.9194ms
2025-06-11T07:46:51.2120232+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:46:51.2122315+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2122819+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:46:51.2123876+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2124345+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:51.2125292+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 7ms
2025-06-11T07:46:51.2126365+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 7.806ms.
2025-06-11T07:46:51.2128040+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:46:51.2128688+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:46:51.2128831+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:46:51.2129073+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:46:51.2129355+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:46:51.2129660+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:46:51.2131737+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 9.7521ms
2025-06-11T07:46:51.2132264+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:46:51.2133132+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 10.6236 ms
2025-06-11T07:46:51.2133803+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:46:51.2134311+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:46:51.2134847+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:46:51.2135212+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:46:51.2136161+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 11.4157ms
2025-06-11T07:47:00.9430714+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - null null
2025-06-11T07:47:00.9433198+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:47:00.9433598+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:47:00.9434615+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:47:00.9435880+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:47:00.9436489+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:47:00.9437237+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:47:00.9437481+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:47:00.9437908+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:47:00.9438940+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/students/bulk" responded 204 in 0.3922 ms
2025-06-11T07:47:00.9439745+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:47:00.9441444+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 204 null null 1.0633ms
2025-06-11T07:47:00.9461939+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - "application/json" 27
2025-06-11T07:47:00.9469331+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:47:00.9471228+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/bulk"' is valid for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:47:00.9473393+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:47:00.9474331+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:47:00.9475442+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:47:00.9476101+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:47:00.9476607+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:47:00.9476841+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:47:00.9477181+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:47:00.9478040+07:00 [INF] (///) Route matched with "{action = \"DeleteStudents\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteStudents(System.Collections.Generic.List`1[System.String], System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:47:00.9479980+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:47:00.9480279+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:47:00.9480713+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:47:00.9480982+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:47:00.9481207+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:47:00.9481652+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:47:00.9482188+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:47:00.9483062+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:47:00.9484474+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' using the name '""' in request data ...
2025-06-11T07:47:00.9485011+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:47:00.9485610+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"", Request id ""0HND8G4VFLPUE:0000000F"": started reading request body.
2025-06-11T07:47:00.9485918+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"", Request id ""0HND8G4VFLPUE:0000000F"": done reading request body.
2025-06-11T07:47:00.9488063+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'
2025-06-11T07:47:00.9488572+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:47:00.9489023+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:47:00.9489256+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:47:00.9491255+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:47:00.9491649+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:47:00.9492103+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:47:00.9492345+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:47:00.9492582+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:47:00.9494421+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:47:00.9496760+07:00 [INF] (///) Processing request "DeleteStudentsCommand" with data [("StudentCodes": [StudentCode { Value: "N22DCPT001", AcademicYear: 22, ClassCode: "PT", StudentNumber: 1 }, StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }])]
2025-06-11T07:47:00.9505459+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:47:00.9506697+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:47:00.9507215+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:47:00.9508927+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9509406+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9510854+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:47:00.9511288+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:47:00.9514134+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<GlobalStudentCode>()
    .Where(s => __request_StudentCodes_0.Contains((StudentCode)s.StudentCode))
    .ExecuteDelete()"'
2025-06-11T07:47:00.9520764+07:00 [ERR] (///) Error deleting students
System.InvalidOperationException: The LINQ expression '__request_StudentCodes_0
    .Contains((StudentCode)StructuralTypeShaperExpression(
        StructuralType: FacultyService.Domain.Entity.GlobalStudentCode
        ValueBufferExpression: ProjectionBindingExpression: EmptyProjectionMember
        IsNullable: False).StudentCode)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.TranslateSubquery(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.<VisitMethodCall>g__TranslateAsSubquery|33_0(Expression expression, <>c__DisplayClass33_0&)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Query.Internal.NpgsqlSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.Translate(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateExpression(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateLambdaExpression(ShapedQueryExpression shapedQueryExpression, LambdaExpression lambdaExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateWhere(ShapedQueryExpression source, LambdaExpression predicate)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Query.Internal.NpgsqlQueryableMethodTranslatingExpressionVisitor.TranslateWhere(ShapedQueryExpression source, LambdaExpression predicate)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteDeleteAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 21
2025-06-11T07:47:00.9573142+07:00 [DBG] (///) Rolling back transaction.
2025-06-11T07:47:00.9584492+07:00 [DBG] (///) Rolled back transaction.
2025-06-11T07:47:00.9585162+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9585606+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:47:00.9587206+07:00 [DBG] (///) Disposing transaction.
2025-06-11T07:47:00.9588638+07:00 [ERR] (///) Error processing request "DeleteStudentsCommand" after 9ms
Shared.Exception.BusinessException: Không thể xóa sinh viên, hãy thử lại
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
2025-06-11T07:47:00.9599343+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" in 11.7718ms
2025-06-11T07:47:00.9600063+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:47:00.9600890+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Shared.Exception.BusinessException: Không thể xóa sinh viên, hãy thử lại
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
   at FacultyService.Api.Students.Controller.StudentsController.DeleteStudents(List`1 studentCodes, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api/Students/Controller/StudentsController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Finbuckle.MultiTenant.AspNetCore.Internal.MultiTenantMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-11T07:47:00.9656985+07:00 [ERR] (///) HTTP "DELETE" "/api/v1/it-faculty/students/bulk" responded 500 in 18.2277 ms
2025-06-11T07:47:00.9657857+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:47:00.9658458+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:47:00.9658936+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9659281+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:47:00.9659934+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 500 null "application/problem+json" 19.8393ms
2025-06-11T07:47:00.9863175+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:47:00.9863176+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:47:00.9865294+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:47:00.9865294+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:47:00.9865912+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:47:00.9866257+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:47:00.9866413+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:47:00.9866660+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:47:00.9867291+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:47:00.9867291+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:47:00.9868123+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:47:00.9868178+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:47:00.9868460+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:47:00.9868462+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:47:00.9868884+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:47:00.9869129+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:47:00.9869376+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:47:00.9869517+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:47:00.9869539+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:47:00.9869800+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:47:00.9870354+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:47:00.9870398+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:47:00.9870804+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:47:00.9870963+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:47:00.9871020+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:47:00.9871209+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:47:00.9871302+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:47:00.9871537+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:47:00.9871833+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:47:00.9872183+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:47:00.9871443+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:47:00.9872495+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:47:00.9872614+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:47:00.9872714+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:47:00.9873073+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:47:00.9873471+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:47:00.9873926+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:47:00.9874006+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:47:00.9874430+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:47:00.9874753+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:47:00.9874971+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:47:00.9874419+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:47:00.9875150+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:47:00.9875412+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:47:00.9875539+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:47:00.9875623+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:47:00.9875791+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:47:00.9875836+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:47:00.9876204+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:47:00.9876355+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:47:00.9876539+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:47:00.9876772+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:47:00.9877194+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:47:00.9877480+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:47:00.9876790+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:47:00.9877801+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:47:00.9877824+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:47:00.9878048+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:47:00.9878065+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:47:00.9878371+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:47:00.9878427+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:47:00.9878577+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:47:00.9878737+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:47:00.9878827+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:47:00.9879086+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:47:00.9879172+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:47:00.9879382+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:47:00.9879450+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:47:00.9879605+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:47:00.9879794+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:47:00.9879888+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:47:00.9880027+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:47:00.9880218+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:47:00.9880173+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:47:00.9880421+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:47:00.9880432+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:47:00.9880656+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:47:00.9880766+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:47:00.9880866+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:47:00.9880971+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:47:00.9881098+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:47:00.9881420+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:47:00.9881759+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:47:00.9881384+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:47:00.9882046+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:47:00.9882259+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:47:00.9882315+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:47:00.9882586+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:47:00.9882584+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:47:00.9882864+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:47:00.9883121+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:47:00.9884011+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:47:00.9884186+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:47:00.9885280+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:47:00.9885140+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:47:00.9891727+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:47:00.9891850+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:47:00.9895369+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:47:00.9895370+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:47:00.9895891+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:47:00.9895917+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:47:00.9896278+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9896278+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9896718+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9896718+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9898270+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:47:00.9898593+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:47:00.9898920+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:47:00.9898914+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:47:00.9899182+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:47:00.9899518+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:47:00.9899375+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:47:00.9899886+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:47:00.9919921+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:47:00.9922845+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9923564+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:47:00.9925064+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9925631+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:47:00.9927702+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:47:00.9929569+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9929927+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9930778+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9930259+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:47:00.9932315+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:47:00.9932739+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9933343+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:47:00.9932643+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:47:00.9934021+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:47:00.9934377+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 4ms
2025-06-11T07:47:00.9934550+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:47:00.9934914+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 5.018ms.
2025-06-11T07:47:00.9936858+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:47:00.9937434+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:47:00.9937667+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:47:00.9937901+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:47:00.9938231+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:47:00.9940079+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:47:00.9941926+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 6.9743ms
2025-06-11T07:47:00.9942393+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:47:00.9943275+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 7.5479 ms
2025-06-11T07:47:00.9943806+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" completed keep alive response.
2025-06-11T07:47:00.9944246+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:47:00.9944635+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9944937+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:47:00.9945568+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 8.2434ms
2025-06-11T07:47:00.9959030+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:47:00.9961930+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9962592+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:47:00.9963864+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9965160+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:47:00.9966357+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 7ms
2025-06-11T07:47:00.9967018+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 8.2574ms.
2025-06-11T07:47:00.9969148+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:47:00.9969747+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:47:00.9969979+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:47:00.9970157+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:47:00.9970578+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:47:00.9970917+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:47:00.9973298+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 10.0232ms
2025-06-11T07:47:00.9973833+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:47:00.9974751+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 10.7040 ms
2025-06-11T07:47:00.9975717+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" completed keep alive response.
2025-06-11T07:47:00.9976248+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:47:00.9976665+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:47:00.9977155+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:47:00.9977831+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 11.4662ms
2025-06-11T07:48:04.5481253+07:00 [DBG] (///) HttpMessageHandler expired after 120000ms for client '""'
2025-06-11T07:48:14.5499525+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:48:14.5526293+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.3506ms - processed: 0 items - remaining: 1 items
2025-06-11T07:48:24.5535305+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:48:24.5536830+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.002ms - processed: 0 items - remaining: 1 items
2025-06-11T07:48:34.5537708+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:48:34.5538543+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-06-11T07:48:44.5534321+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:48:44.5535122+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-06-11T07:48:54.5543875+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:48:54.5544693+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-06-11T07:49:04.5547110+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:49:04.5548192+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-06-11T07:49:11.9230731+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" disconnecting.
2025-06-11T07:49:11.9230872+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" disconnecting.
2025-06-11T07:49:11.9241640+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" stopped.
2025-06-11T07:49:11.9241644+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" stopped.
2025-06-11T07:49:11.9247518+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUD"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T07:49:11.9247375+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T07:49:14.5548480+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:49:14.5549545+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0023ms - processed: 0 items - remaining: 1 items
2025-06-11T07:49:24.5553764+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:49:24.5569594+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 1.4328ms - processed: 1 items - remaining: 0 items
2025-06-11T07:49:33.3600198+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" accepted.
2025-06-11T07:49:33.3600900+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" started.
2025-06-11T07:49:33.3603313+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - null null
2025-06-11T07:49:33.3605654+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:49:33.3606137+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:49:33.3607050+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:49:33.3607959+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:49:33.3609524+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:49:33.3610159+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:49:33.3610365+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:49:33.3610753+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:49:33.3611799+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/students/bulk" responded 204 in 0.4260 ms
2025-06-11T07:49:33.3612519+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" completed keep alive response.
2025-06-11T07:49:33.3614031+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 204 null null 0.9724ms
2025-06-11T07:49:33.3630349+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - "application/json" 27
2025-06-11T07:49:33.3636548+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:49:33.3652594+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/bulk"' is valid for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:49:33.3653624+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:49:33.3654869+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:49:33.3655786+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:49:33.3656145+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:49:33.3656659+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:49:33.3656856+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:49:33.3657267+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:49:33.3658226+07:00 [INF] (///) Route matched with "{action = \"DeleteStudents\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteStudents(System.Collections.Generic.List`1[System.String], System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:49:33.3658698+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:49:33.3658970+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:49:33.3659446+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:49:33.3659710+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:49:33.3659942+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:49:33.3660327+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:49:33.3660763+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:49:33.3661476+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:49:33.3661924+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' using the name '""' in request data ...
2025-06-11T07:49:33.3662351+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:49:33.3662888+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"", Request id ""0HND8G4VFLPUF:00000002"": started reading request body.
2025-06-11T07:49:33.3663243+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"", Request id ""0HND8G4VFLPUF:00000002"": done reading request body.
2025-06-11T07:49:33.3663805+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'
2025-06-11T07:49:33.3664073+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:49:33.3664301+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:49:33.3664505+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:49:33.3665041+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:49:33.3665346+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:49:33.3665635+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:49:33.3665821+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:49:33.3666037+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:49:33.3668311+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:49:33.3669766+07:00 [INF] (///) Processing request "DeleteStudentsCommand" with data [("StudentCodes": [StudentCode { Value: "N22DCPT001", AcademicYear: 22, ClassCode: "PT", StudentNumber: 1 }, StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }])]
2025-06-11T07:49:33.3678799+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:49:33.3680138+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:49:33.3680739+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:49:33.3681051+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.3681516+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.3683499+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:49:33.3684072+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:49:33.3688013+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<GlobalStudentCode>()
    .Where(s => __request_StudentCodes_0.Contains((StudentCode)s.StudentCode))
    .ExecuteDelete()"'
2025-06-11T07:49:33.3699260+07:00 [ERR] (///) Error deleting students
System.InvalidOperationException: The LINQ expression '__request_StudentCodes_0
    .Contains((StudentCode)StructuralTypeShaperExpression(
        StructuralType: FacultyService.Domain.Entity.GlobalStudentCode
        ValueBufferExpression: ProjectionBindingExpression: EmptyProjectionMember
        IsNullable: False).StudentCode)' could not be translated. Either rewrite the query in a form that can be translated, or switch to client evaluation explicitly by inserting a call to 'AsEnumerable', 'AsAsyncEnumerable', 'ToList', or 'ToListAsync'. See https://go.microsoft.com/fwlink/?linkid=2101038 for more information.
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.TranslateSubquery(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.<VisitMethodCall>g__TranslateAsSubquery|33_0(Expression expression, <>c__DisplayClass33_0&)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Query.Internal.NpgsqlSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.Translate(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateExpression(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateLambdaExpression(ShapedQueryExpression shapedQueryExpression, LambdaExpression lambdaExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateWhere(ShapedQueryExpression source, LambdaExpression predicate)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Query.Internal.NpgsqlQueryableMethodTranslatingExpressionVisitor.TranslateWhere(ShapedQueryExpression source, LambdaExpression predicate)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutorExpression[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass11_0`1.<ExecuteCore>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteCore[TResult](Expression query, Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteDeleteAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 21
2025-06-11T07:49:33.3805615+07:00 [DBG] (///) Rolling back transaction.
2025-06-11T07:49:33.3885008+07:00 [ERR] (///) An error occurred using a transaction.
2025-06-11T07:49:33.3886105+07:00 [DBG] (///) Disposing transaction.
2025-06-11T07:49:33.3886903+07:00 [ERR] (///) Error processing request "DeleteStudentsCommand" after 21ms
Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.EndOfStreamException: Attempted to read past the end of the stream.
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ExecuteInternalCommand(Byte[] data, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlTransaction.Rollback(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 39
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
   at FacultyService.Api.Students.Controller.StudentsController.DeleteStudents(List`1 studentCodes, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api/Students/Controller/StudentsController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Finbuckle.MultiTenant.AspNetCore.Internal.MultiTenantMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-11T07:49:33.3929554+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" in 26.9216ms
2025-06-11T07:49:33.3930075+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:49:33.3930374+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.EndOfStreamException: Attempted to read past the end of the stream.
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ExecuteInternalCommand(Byte[] data, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlTransaction.Rollback(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalTransaction.RollbackAsync(CancellationToken cancellationToken)
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 39
   at FacultyService.Application.Students.CommandHandler.DeleteStudentsCommandHandler.Handle(DeleteStudentsCommand request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Students/CommandHandler/DeleteStudentsCommandHandler.cs:line 40
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
   at FacultyService.Api.Students.Controller.StudentsController.DeleteStudents(List`1 studentCodes, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api/Students/Controller/StudentsController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Finbuckle.MultiTenant.AspNetCore.Internal.MultiTenantMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-11T07:49:33.3969337+07:00 [ERR] (///) HTTP "DELETE" "/api/v1/it-faculty/students/bulk" responded 500 in 31.4210 ms
2025-06-11T07:49:33.3969933+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" completed keep alive response.
2025-06-11T07:49:33.3970239+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:49:33.3970541+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.3970758+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:49:33.3971109+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 500 null "application/problem+json" 34.0785ms
2025-06-11T07:49:33.4202696+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:49:33.4205255+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:49:33.4205953+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:49:33.4206455+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:49:33.4207152+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:49:33.4206960+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUG"" accepted.
2025-06-11T07:49:33.4208002+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUG"" started.
2025-06-11T07:49:33.4208021+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:49:33.4208334+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:49:33.4208792+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:49:33.4208983+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:49:33.4209351+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:49:33.4209322+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:49:33.4210753+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:49:33.4210746+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:49:33.4211166+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:49:33.4211197+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:49:33.4211360+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:49:33.4211673+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:49:33.4211659+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:49:33.4211900+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:49:33.4212072+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:49:33.4212156+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:49:33.4212798+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:49:33.4212362+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:49:33.4213112+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:49:33.4213414+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:49:33.4213508+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:49:33.4213418+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:49:33.4213804+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:49:33.4213990+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:49:33.4214427+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:49:33.4214671+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:49:33.4214806+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:49:33.4214954+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:49:33.4215233+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:49:33.4215464+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:49:33.4215687+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:49:33.4215988+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:49:33.4216227+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:49:33.4215066+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:49:33.4216431+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:49:33.4216622+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:49:33.4216619+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:49:33.4216870+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:49:33.4216916+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:49:33.4217068+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:49:33.4217197+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:49:33.4217248+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:49:33.4217391+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:49:33.4217461+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:49:33.4217661+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:49:33.4217839+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:49:33.4217570+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:49:33.4217999+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:49:33.4218246+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:49:33.4218290+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:49:33.4218418+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:49:33.4218537+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:49:33.4218696+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:49:33.4218833+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:49:33.4219019+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:49:33.4219255+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:49:33.4219342+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:49:33.4219394+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:49:33.4219539+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:49:33.4219643+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:49:33.4220368+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:49:33.4220528+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:49:33.4220609+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:49:33.4220675+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:49:33.4220955+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:49:33.4221154+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:49:33.4221353+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:49:33.4221589+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:49:33.4221802+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:49:33.4222016+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:49:33.4221756+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:49:33.4222236+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:49:33.4222406+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:49:33.4223243+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:49:33.4223413+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:49:33.4223600+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:49:33.4223744+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:49:33.4223906+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:49:33.4224096+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:49:33.4224269+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:49:33.4224427+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:49:33.4224580+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:49:33.4224718+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:49:33.4225401+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:49:33.4225548+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:49:33.4225795+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:49:33.4225940+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:49:33.4226101+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:49:33.4227310+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:49:33.4228199+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:49:33.4229426+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:49:33.4233222+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:49:33.4233722+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:49:33.4233999+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4235537+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:49:33.4238751+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:49:33.4239218+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:49:33.4239436+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4336286+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4338220+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:49:33.4338625+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:49:33.4338917+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:49:33.4339392+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:49:33.4351981+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4353500+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:49:33.4353904+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:49:33.4354107+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:49:33.4355095+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:49:33.4481138+07:00 [INF] (///) Executed DbCommand ("13"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:49:33.4483028+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4483480+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:49:33.4484205+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4484566+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:49:33.4485008+07:00 [INF] (///) Executed DbCommand ("15"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:49:33.4486203+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4486507+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:49:33.4487151+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4487373+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:49:33.4487921+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 25ms
2025-06-11T07:49:33.4488366+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 26.0697ms.
2025-06-11T07:49:33.4488410+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4488769+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4489675+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:49:33.4489714+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:49:33.4489964+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:49:33.4490043+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:49:33.4490139+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:49:33.4490166+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:49:33.4490260+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:49:33.4490515+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:49:33.4490739+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:49:33.4490788+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:49:33.4492330+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 27.4062ms
2025-06-11T07:49:33.4492654+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:49:33.4493352+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 28.0789 ms
2025-06-11T07:49:33.4493751+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUG"" completed keep alive response.
2025-06-11T07:49:33.4494034+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:49:33.4494281+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4494480+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:49:33.4494867+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 28.5471ms
2025-06-11T07:49:33.4513167+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:49:33.4514954+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4515550+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:49:33.4516489+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4516845+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:49:33.4517565+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 29ms
2025-06-11T07:49:33.4517973+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 29.7037ms.
2025-06-11T07:49:33.4519332+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:49:33.4519790+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:49:33.4519885+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:49:33.4520003+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:49:33.4520238+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:49:33.4520431+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:49:33.4523467+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 31.1088ms
2025-06-11T07:49:33.4524330+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:49:33.4525049+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 31.7558 ms
2025-06-11T07:49:33.4525480+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" completed keep alive response.
2025-06-11T07:49:33.4525836+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:49:33.4526229+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:49:33.4526514+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:49:33.4526917+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 32.4218ms
2025-06-11T07:50:21.0097547+07:00 [INF] (///) Application is shutting down...
2025-06-11T07:50:21.0107235+07:00 [DBG] (///) Hosting stopping
2025-06-11T07:50:21.0144778+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUG"" disconnecting.
2025-06-11T07:50:21.0144778+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" disconnecting.
2025-06-11T07:50:21.0145702+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" stopped.
2025-06-11T07:50:21.0145700+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUG"" stopped.
2025-06-11T07:50:21.0146350+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUG"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T07:50:21.0146350+07:00 [DBG] (///) Connection id ""0HND8G4VFLPUF"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T07:50:21.0169055+07:00 [DBG] (///) Hosting stopped
2025-06-11T07:50:25.5118812+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-11T07:50:25.6036347+07:00 [DBG] (///) Hosting starting
2025-06-11T07:50:25.6597421+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-11T07:50:25.6616500+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-11T07:50:25.7171474+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-11T07:50:25.7187663+07:00 [WRN] (///) Overriding address(es) '"http://localhost:5291"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-11T07:50:25.7246641+07:00 [INF] (///) Now listening on: "http://localhost:30000"
2025-06-11T07:50:25.7251203+07:00 [INF] (///) Now listening on: "https://localhost:30001"
2025-06-11T07:50:25.7251666+07:00 [INF] (///) Now listening on: "https://localhost:30002"
2025-06-11T07:50:25.7252944+07:00 [DBG] (///) Loaded hosting startup assembly "FacultyService.Api"
2025-06-11T07:50:25.7255797+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-11T07:50:25.7256650+07:00 [INF] (///) Hosting environment: "Development"
2025-06-11T07:50:25.7257219+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api"
2025-06-11T07:50:25.7258003+07:00 [DBG] (///) Hosting started
2025-06-11T07:50:35.1616516+07:00 [INF] (///) Application is shutting down...
2025-06-11T07:50:35.1623680+07:00 [DBG] (///) Hosting stopping
2025-06-11T07:50:35.1688347+07:00 [DBG] (///) Hosting stopped
2025-06-11T07:50:36.4096986+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-11T07:50:36.5006590+07:00 [DBG] (///) Hosting starting
2025-06-11T07:50:36.5528298+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-11T07:50:36.5546621+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-11T07:50:36.6051310+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-11T07:50:36.6064888+07:00 [WRN] (///) Overriding address(es) '"http://localhost:5291"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-11T07:50:36.6124963+07:00 [INF] (///) Now listening on: "http://localhost:30000"
2025-06-11T07:50:36.6129320+07:00 [INF] (///) Now listening on: "https://localhost:30001"
2025-06-11T07:50:36.6129732+07:00 [INF] (///) Now listening on: "https://localhost:30002"
2025-06-11T07:50:36.6130756+07:00 [DBG] (///) Loaded hosting startup assembly "FacultyService.Api"
2025-06-11T07:50:36.6133127+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-11T07:50:36.6133640+07:00 [INF] (///) Hosting environment: "Development"
2025-06-11T07:50:36.6134115+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api"
2025-06-11T07:50:36.6134804+07:00 [DBG] (///) Hosting started
2025-06-11T07:50:44.0524168+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" accepted.
2025-06-11T07:50:44.0534424+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" started.
2025-06-11T07:50:44.0694249+07:00 [INF] (///) Request starting "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - null null
2025-06-11T07:50:44.1109279+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:50:44.1114677+07:00 [DBG] (///) Request matched endpoint '"405 HTTP Method Not Supported"'
2025-06-11T07:50:44.1160335+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:50:44.1350484+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:50:44.1381766+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:50:44.1406019+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:50:44.1410200+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:50:44.1417464+07:00 [DBG] (///) The request is a preflight request.
2025-06-11T07:50:44.1466008+07:00 [INF] (///) HTTP "OPTIONS" "/api/v1/it-faculty/students/bulk" responded 204 in 28.6970 ms
2025-06-11T07:50:44.1534883+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" completed keep alive response.
2025-06-11T07:50:44.1569948+07:00 [INF] (///) Request finished "HTTP/1.1" "OPTIONS" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 204 null null 88.3336ms
2025-06-11T07:50:44.1588121+07:00 [INF] (///) Request starting "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - "application/json" 27
2025-06-11T07:50:44.1601101+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:50:44.1635555+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/students/bulk"' is valid for the request path '"/api/v1/it-faculty/students/bulk"'
2025-06-11T07:50:44.1671498+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:50:44.1676327+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:50:44.1679654+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:50:44.1681282+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:50:44.1683517+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:50:44.1684149+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:50:44.1691051+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:50:44.1854992+07:00 [INF] (///) Route matched with "{action = \"DeleteStudents\", controller = \"Students\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteStudents(System.Collections.Generic.List`1[System.String], System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api").
2025-06-11T07:50:44.1886062+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:50:44.1888472+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:50:44.1895562+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:50:44.1896821+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:50:44.1898526+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:50:44.1913448+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:50:44.1918071+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsController" ("FacultyService.Api")
2025-06-11T07:50:44.1938570+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:50:44.1951431+07:00 [DBG] (///) Attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' using the name '""' in request data ...
2025-06-11T07:50:44.1959102+07:00 [DBG] (///) Selected input formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter"' for content type '"application/json"'.
2025-06-11T07:50:44.1999273+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"", Request id ""0HND8G7VHH0FC:00000002"": started reading request body.
2025-06-11T07:50:44.2002291+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"", Request id ""0HND8G7VHH0FC:00000002"": done reading request body.
2025-06-11T07:50:44.2036090+07:00 [DBG] (///) JSON input formatter succeeded, deserializing to type '"System.Collections.Generic.List`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]"'
2025-06-11T07:50:44.2039133+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:50:44.2040677+07:00 [DBG] (///) Done attempting to bind parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:50:44.2041701+07:00 [DBG] (///) Attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"' ...
2025-06-11T07:50:44.2076918+07:00 [DBG] (///) Done attempting to validate the bound parameter '"studentCodes"' of type '"System.Collections.Generic.List`1[System.String]"'.
2025-06-11T07:50:44.2087508+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:50:44.2090437+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:50:44.2091048+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:50:44.2092587+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:50:44.2142200+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:50:44.2274759+07:00 [INF] (///) Processing request "DeleteStudentsCommand" with data [("StudentCodes": [StudentCode { Value: "N22DCPT001", AcademicYear: 22, ClassCode: "PT", StudentNumber: 1 }, StudentCode { Value: "N22DCPT002", AcademicYear: 22, ClassCode: "PT", StudentNumber: 2 }])]
2025-06-11T07:50:44.3626964+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-11T07:50:44.8065391+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Class"' as the properties are already covered by the index "{'FacultyCode', 'ClassCode'}".
2025-06-11T07:50:44.8070297+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"CreditClass"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId'}".
2025-06-11T07:50:44.8071700+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId', 'StudentCode'}".
2025-06-11T07:50:44.8072829+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'StudentCode'}".
2025-06-11T07:50:44.8073997+07:00 [DBG] (///) The index "{'FacultyCode', 'CreditClassId'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId', 'StudentCode'}".
2025-06-11T07:50:44.8075751+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Student"' as the properties are already covered by the index "{'FacultyCode', 'StudentCode'}".
2025-06-11T07:50:44.8077390+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Student"' as the properties are already covered by the index "{'FacultyCode', 'ClassCode'}".
2025-06-11T07:50:44.9972435+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:50:45.0075366+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:50:45.0409532+07:00 [DBG] (///) Created DbConnection. (32ms).
2025-06-11T07:50:45.0444714+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:45.1369052+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:45.1417742+07:00 [DBG] (///) Beginning transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:50:45.1486537+07:00 [DBG] (///) Began transaction with isolation level '"ReadCommitted"'.
2025-06-11T07:50:45.1905068+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<GlobalStudentCode>()
    .Where(s => __studentCodes_0.Contains(s.StudentCode))
    .ExecuteDelete()"'
2025-06-11T07:50:45.3953776+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => RelationalShapedQueryCompilingExpressionVisitor.NonQueryResultAsync(
    relationalQueryContext: (RelationalQueryContext)queryContext, 
    relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
        DELETE FROM global_student_code AS g
        SELECT 1
        FROM global_student_code AS g
        WHERE g.student_code = ANY(@__studentCodes_0)) | Resolver: c => new RelationalCommandCache(
        c.Dependencies.MemoryCache, 
        c.RelationalDependencies.QuerySqlGeneratorFactory, 
        c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
        DELETE FROM global_student_code AS g
        SELECT 1
        FROM global_student_code AS g
        WHERE g.student_code = ANY(@__studentCodes_0), 
        False, 
        new HashSet<string>(
            new string[]{ }, 
            StringComparer.Ordinal
        )
    )].GetRelationalCommandTemplate(parameters), 
    contextType: FacultyService.Application.FacultyDbContext, 
    commandSource: ExecuteDelete, 
    threadSafetyChecksEnabled: True)"'
2025-06-11T07:50:45.4216214+07:00 [DBG] (///) Creating DbCommand for '"ExecuteNonQuery"'.
2025-06-11T07:50:45.4272006+07:00 [DBG] (///) Created DbCommand for '"ExecuteNonQuery"' (2ms).
2025-06-11T07:50:45.4345320+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteNonQuery"' (13ms).
2025-06-11T07:50:45.4421853+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__studentCodes_0='?' (DbType = Object)"], CommandType='Text', CommandTimeout='300']"
""DELETE FROM global_student_code AS g
WHERE g.student_code = ANY (@__studentCodes_0)"
2025-06-11T07:50:45.5989580+07:00 [INF] (///) Executed DbCommand ("158"ms) [Parameters=["@__studentCodes_0='?' (DbType = Object)"], CommandType='Text', CommandTimeout='300']"
""DELETE FROM global_student_code AS g
WHERE g.student_code = ANY (@__studentCodes_0)"
2025-06-11T07:50:45.6042887+07:00 [DBG] (///) Committing transaction.
2025-06-11T07:50:45.6107124+07:00 [DBG] (///) Committed transaction.
2025-06-11T07:50:45.6127787+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:45.6182110+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (3ms).
2025-06-11T07:50:45.9169244+07:00 [DBG] (///) Disposing transaction.
2025-06-11T07:50:45.9172072+07:00 [INF] (///) Request "DeleteStudentsCommand" processed successfully in 1687ms
2025-06-11T07:50:45.9219275+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 1704.069ms.
2025-06-11T07:50:45.9283108+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:50:45.9305495+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:50:45.9306591+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:50:45.9306885+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:50:45.9313269+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:50:45.9316858+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"System.Int32"'.
2025-06-11T07:50:45.9488347+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)" in 1755.1732ms
2025-06-11T07:50:45.9499205+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsController.DeleteStudents (FacultyService.Api)"'
2025-06-11T07:50:45.9544044+07:00 [INF] (///) HTTP "DELETE" "/api/v1/it-faculty/students/bulk" responded 200 in 1786.5357 ms
2025-06-11T07:50:45.9571481+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" completed keep alive response.
2025-06-11T07:50:45.9594347+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FD"" accepted.
2025-06-11T07:50:45.9596379+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FD"" started.
2025-06-11T07:50:45.9601310+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:50:45.9604807+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:50:45.9609492+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:50:45.9611501+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:50:45.9614338+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:50:45.9616704+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:50:45.9617531+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:50:45.9618303+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:50:45.9619064+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:50:45.9620489+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:50:45.9622053+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:50:45.9678047+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:50:45.9680696+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:50:45.9681704+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:50:45.9682160+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:45.9683199+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:50:45.9684791+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:50:45.9686154+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:50:45.9687679+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:50:45.9691274+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:50:45.9694317+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:50:45.9697450+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:50:45.9701420+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:50:45.9702253+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:50:45.9703057+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:50:45.9708756+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:50:45.9709570+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:50:45.9712473+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:50:45.9726759+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (3ms).
2025-06-11T07:50:45.9738889+07:00 [INF] (///) Request finished "HTTP/1.1" "DELETE" "http"://"localhost:30000""""/api/v1/it-faculty/students/bulk""" - 200 null "application/json; charset=utf-8" 1815.0341ms
2025-06-11T07:50:45.9742410+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:50:45.9749057+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:50:45.9753382+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:50:45.9757533+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:50:45.9762920+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:50:45.9764133+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:50:45.9765528+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:50:45.9766776+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:50:45.9768059+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:50:45.9769054+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:50:45.9769977+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:50:45.9770873+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:50:45.9771691+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:50:45.9774985+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:50:45.9776207+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:50:45.9778352+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:50:45.9794493+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:50:45.9796374+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:50:45.9798433+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:50:45.9799140+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:50:45.9800158+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:50:45.9803911+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:50:45.9834551+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:50:45.9836486+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:50:45.9838555+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:50:45.9840209+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:50:45.9842080+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:50:45.9842690+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:50:45.9843620+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:50:45.9844156+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:50:45.9844733+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:50:45.9881619+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:50:45.9882293+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:50:45.9883770+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:50:45.9884300+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:50:45.9884982+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:50:45.9885863+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:50:45.9886486+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:50:45.9887552+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:50:45.9892858+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:50:45.9897953+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:50:45.9900767+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:50:45.9902001+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:50:45.9902794+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:50:45.9903710+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:50:45.9906484+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:50:45.9907116+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:50:45.9914107+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:50:45.9919375+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:50:45.9920823+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:50:45.9922254+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:50:45.9923256+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:50:45.9926663+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:50:45.9934862+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:50:45.9935686+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:50:45.9936518+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:50:45.9937203+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:50:45.9938010+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:50:45.9938720+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:50:45.9940064+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:50:45.9940909+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:50:45.9941588+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:50:45.9945376+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:50:45.9946026+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:50:45.9947176+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:50:45.9947768+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:50:45.9948796+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:50:45.9951635+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:50:46.0002118+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:50:46.0122182+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:50:46.0193248+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .Where(c => c.ClassCode == __request_ClassCode_Value_0)
    .Select(c => new ClassDetailResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .FirstOrDefault()"'
2025-06-11T07:50:46.0640946+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:50:46.0719675+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .OrderBy(__Student => __Student.StudentCode)
    .Select(s => new StudentBasicResponse{ 
        StudentCode = s.StudentCode, 
        FirstName = s.FirstName, 
        LastName = s.LastName, 
        Gender = GenderExtensions.FromBoolean(s.Gender ?? False), 
        BirthDate = s.BirthDate, 
        Address = s.Address, 
        IsSuspended = s.IsSuspended, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Count()"'
2025-06-11T07:50:46.1435560+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE s.faculty_code == @__ef_filter__Id_0) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE s.faculty_code == @__ef_filter__Id_0, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:50:46.1435560+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ClassDetailResponse>(
        asyncEnumerable: SingleQueryingEnumerable.Create<ClassDetailResponse>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    ClassCode -> 0
                    ClassName -> 1
                    FacultyCode -> 2
                    StudentCount -> 3
                    FacultyName -> 4
                    AcademicYearCode -> 5
                SELECT TOP(1) c.class_code AS ClassCode, c.class_name AS ClassName, c.faculty_code AS FacultyCode, (
                    SELECT CAST(count(*) AS integer)
                    FROM student AS s
                    WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.class_code != NULL)) && ((c.faculty_code == s.faculty_code) && (c.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c.academic_year_code AS AcademicYearCode
                FROM class AS c
                INNER JOIN 
                (
                    SELECT f.faculty_code, f.faculty_name
                    FROM faculty AS f
                    WHERE f.faculty_code == @__ef_filter__Id_0
                ) AS f0 ON c.faculty_code == f0.faculty_code
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    ClassCode -> 0
                    ClassName -> 1
                    FacultyCode -> 2
                    StudentCount -> 3
                    FacultyName -> 4
                    AcademicYearCode -> 5
                SELECT TOP(1) c.class_code AS ClassCode, c.class_name AS ClassName, c.faculty_code AS FacultyCode, (
                    SELECT CAST(count(*) AS integer)
                    FROM student AS s
                    WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.class_code != NULL)) && ((c.faculty_code == s.faculty_code) && (c.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c.academic_year_code AS AcademicYearCode
                FROM class AS c
                INNER JOIN 
                (
                    SELECT f.faculty_code, f.faculty_name
                    FROM faculty AS f
                    WHERE f.faculty_code == @__ef_filter__Id_0
                ) AS f0 ON c.faculty_code == f0.faculty_code
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                string value1;
                string value2;
                string value3;
                int? value4;
                string value5;
                string value6;
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
                return new ClassDetailResponse{ 
                    ClassCode = value1, 
                    ClassName = value2, 
                    FacultyCode = value3, 
                    StudentCount = (int)value4, 
                    FacultyName = value5, 
                    AcademicYearCode = value6 
                }
                ;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:50:46.1655740+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:50:46.1655740+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:50:46.1657831+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:50:46.1657844+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:50:46.1658692+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1659332+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1666227+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1668786+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:50:46.1669508+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:50:46.1687979+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (1ms).
2025-06-11T07:50:46.1694976+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:50:46.1747986+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1751303+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:50:46.1751143+07:00 [INF] (///) Executed DbCommand ("6"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:50:46.1752414+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:50:46.1753426+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:50:46.1755176+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:50:46.1875918+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1884982+07:00 [INF] (///) Executed DbCommand ("13"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:50:46.1900941+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 13ms reading results.
2025-06-11T07:50:46.1911825+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1912754+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:50:46.1921896+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1922862+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 3ms reading results.
2025-06-11T07:50:46.1925137+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.1926889+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:50:46.1929302+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 204ms
2025-06-11T07:50:46.1930969+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 212.6111ms.
2025-06-11T07:50:46.1934880+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:50:46.1936740+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:50:46.1937469+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:50:46.1937872+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:50:46.1939505+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:50:46.1940402+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:50:46.1950201+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .OrderBy(__Student => __Student.StudentCode)
    .Select(s => new StudentBasicResponse{ 
        StudentCode = s.StudentCode, 
        FirstName = s.FirstName, 
        LastName = s.LastName, 
        Gender = GenderExtensions.FromBoolean(s.Gender ?? False), 
        BirthDate = s.BirthDate, 
        Address = s.Address, 
        IsSuspended = s.IsSuspended, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-11T07:50:46.2110966+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<StudentBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
            SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
            FROM student AS s
            WHERE s.faculty_code == @__ef_filter__Id_0
            ORDER BY s.student_code ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
            SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
            FROM student AS s
            WHERE s.faculty_code == @__ef_filter__Id_0
            ORDER BY s.student_code ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            string value1;
            string value2;
            string value3;
            bool? value4;
            DateOnly? value5;
            string value6;
            bool? value7;
            string value8;
            string value9;
            value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(bool?) : (bool?)dataReader.GetBoolean(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.IsDBNull(4) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
            value7 = try { (bool?)dataReader.GetBoolean(6) } catch (Exception) { ... } ;
            value8 = try { dataReader.GetString(7) } catch (Exception) { ... } ;
            value9 = try { dataReader.GetString(8) } catch (Exception) { ... } ;
            return new StudentBasicResponse{ 
                StudentCode = value1, 
                FirstName = value2, 
                LastName = value3, 
                Gender = GenderExtensions.FromBoolean((bool)value4), 
                BirthDate = value5, 
                Address = value6, 
                IsSuspended = (bool)value7, 
                ClassCode = value8, 
                FacultyCode = value9 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T07:50:46.2163712+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.2165389+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.2167000+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:50:46.2167711+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:50:46.2168833+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:50:46.2169939+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:50:46.2196550+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:50:46.2205449+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.2206456+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:50:46.2207944+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.2208698+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:50:46.2216434+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 221ms
2025-06-11T07:50:46.2217706+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 226.5303ms.
2025-06-11T07:50:46.2220509+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:50:46.2221339+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:50:46.2221803+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:50:46.2222497+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:50:46.2223363+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:50:46.2224308+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:50:46.2250863+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 256.3382ms
2025-06-11T07:50:46.2252122+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:50:46.2253484+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 263.8460 ms
2025-06-11T07:50:46.2254907+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FD"" completed keep alive response.
2025-06-11T07:50:46.2255991+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:50:46.2257213+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.2257932+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:50:46.2260380+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 265.8906ms
2025-06-11T07:50:46.2277885+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 239.0497ms
2025-06-11T07:50:46.2279149+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:50:46.2281014+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 243.9611 ms
2025-06-11T07:50:46.2282932+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" completed keep alive response.
2025-06-11T07:50:46.2283954+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:50:46.2285082+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:50:46.2286310+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:50:46.2287928+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 254.5264ms
2025-06-11T07:51:32.6239553+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" received FIN.
2025-06-11T07:51:32.6242863+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FD"" received FIN.
2025-06-11T07:51:32.6252385+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FD"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T07:51:32.6252359+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T07:51:32.6281568+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FD"" disconnecting.
2025-06-11T07:51:32.6281525+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" disconnecting.
2025-06-11T07:51:32.6296593+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FC"" stopped.
2025-06-11T07:51:32.6296584+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FD"" stopped.
2025-06-11T07:52:45.6335283+07:00 [DBG] (///) HttpMessageHandler expired after 120000ms for client '""'
2025-06-11T07:52:55.6351396+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:52:55.6379584+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.5514ms - processed: 0 items - remaining: 1 items
2025-06-11T07:53:05.6383627+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:53:05.6385829+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0019ms - processed: 0 items - remaining: 1 items
2025-06-11T07:53:15.6386714+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:53:15.6389758+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0046ms - processed: 0 items - remaining: 1 items
2025-06-11T07:53:25.6389973+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:53:25.6391261+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0025ms - processed: 0 items - remaining: 1 items
2025-06-11T07:53:35.6392734+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:53:35.6398661+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0035ms - processed: 0 items - remaining: 1 items
2025-06-11T07:53:45.6401996+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:53:45.6403931+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0062ms - processed: 0 items - remaining: 1 items
2025-06-11T07:53:55.6407283+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:53:55.6408190+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0017ms - processed: 0 items - remaining: 1 items
2025-06-11T07:54:05.6407537+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:54:05.6408680+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0021ms - processed: 0 items - remaining: 1 items
2025-06-11T07:54:15.6418116+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:54:15.6421443+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 0.0022ms - processed: 0 items - remaining: 1 items
2025-06-11T07:54:25.6423572+07:00 [DBG] (///) Starting HttpMessageHandler cleanup cycle with 1 items
2025-06-11T07:54:25.6438212+07:00 [DBG] (///) Ending HttpMessageHandler cleanup cycle after 1.2696ms - processed: 1 items - remaining: 0 items
2025-06-11T07:57:43.1951351+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FE"" accepted.
2025-06-11T07:57:43.1964735+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FE"" started.
2025-06-11T07:57:43.1966391+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" accepted.
2025-06-11T07:57:43.1967630+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" started.
2025-06-11T07:57:43.1968663+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:57:43.1969351+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:57:43.1976398+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:57:43.1976421+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:57:43.1977738+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:57:43.1978250+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:57:43.1979126+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:57:43.1979257+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:57:43.1982241+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:57:43.1982543+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:57:43.1986342+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:57:43.1986885+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:57:43.1987761+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:57:43.1987983+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:57:43.1989247+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:57:43.1989264+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:57:43.1990012+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:57:43.1989887+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:57:43.1990835+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:57:43.1990844+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:57:43.1993620+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:57:43.1993606+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:57:43.1996013+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:57:43.1996353+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:57:43.1996896+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:57:43.1996942+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:57:43.1997931+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:57:43.1997921+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:57:43.1998688+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:57:43.1998715+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:57:43.1999218+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:57:43.1999278+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:57:43.2000399+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:57:43.2000532+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:57:43.2002372+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:57:43.2001935+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:57:43.2004365+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:57:43.2004686+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:57:43.2006186+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:57:43.2006334+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:57:43.2007200+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:57:43.2007408+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:57:43.2007731+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:57:43.2007967+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:57:43.2008119+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:57:43.2008411+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:57:43.2010096+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:57:43.2010102+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:57:43.2010745+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:57:43.2010897+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:57:43.2011704+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:57:43.2012587+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:57:43.2013571+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:57:43.2013846+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:57:43.2014308+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:57:43.2014835+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:57:43.2014889+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:57:43.2015455+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:57:43.2015911+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:57:43.2016134+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:57:43.2016610+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:57:43.2016708+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:57:43.2017099+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:57:43.2017407+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:57:43.2017662+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:57:43.2017936+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:57:43.2018142+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:57:43.2018371+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:57:43.2018610+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:57:43.2018774+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:57:43.2019048+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:57:43.2019172+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:57:43.2019508+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:57:43.2019599+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:57:43.2019876+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:57:43.2020008+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:57:43.2020316+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:57:43.2020707+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:57:43.2021024+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:57:43.2020443+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:57:43.2021928+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:57:43.2022255+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:57:43.2022565+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:57:43.2023418+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:57:43.2024040+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:57:43.2023916+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:57:43.2024515+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:57:43.2024854+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:57:43.2024939+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:57:43.2025299+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:57:43.2025717+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:57:43.2027578+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:57:43.2027566+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:57:43.2037076+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:57:43.2042116+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:57:43.2134702+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:57:43.2134708+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:57:43.2162693+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:57:43.2162693+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:57:43.2163669+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:57:43.2164200+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2163664+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:57:43.2165529+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2390076+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2392620+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:57:43.2393494+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:57:43.2394321+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:57:43.2395079+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2396754+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:57:43.2397326+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:57:43.2399671+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:57:43.2402672+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:57:43.2404445+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:57:43.2502200+07:00 [INF] (///) Executed DbCommand ("10"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:57:43.2502236+07:00 [INF] (///) Executed DbCommand ("11"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:57:43.2507611+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2507611+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2508298+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:57:43.2508298+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:57:43.2510068+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2510089+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2511074+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:57:43.2510944+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:57:43.2513260+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 46ms
2025-06-11T07:57:43.2514332+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 48.556ms.
2025-06-11T07:57:43.2517592+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2517621+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:57:43.2518613+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2518888+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:57:43.2519282+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:57:43.2519616+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:57:43.2520392+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:57:43.2520633+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:57:43.2521403+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:57:43.2522165+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:57:43.2520954+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:57:43.2523211+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:57:43.2525580+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 52.5452ms
2025-06-11T07:57:43.2526488+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:57:43.2528868+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 54.4744 ms
2025-06-11T07:57:43.2530981+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FE"" completed keep alive response.
2025-06-11T07:57:43.2531711+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:57:43.2532312+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2532944+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:57:43.2534023+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 56.5426ms
2025-06-11T07:57:43.2549966+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:57:43.2553222+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2554059+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:57:43.2555961+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2556723+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:57:43.2558393+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 51ms
2025-06-11T07:57:43.2559402+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 52.9727ms.
2025-06-11T07:57:43.2562065+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:57:43.2563301+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:57:43.2563609+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:57:43.2563965+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:57:43.2564458+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:57:43.2564944+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:57:43.2567610+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 56.7289ms
2025-06-11T07:57:43.2568421+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:57:43.2570432+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 58.7002 ms
2025-06-11T07:57:43.2571607+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" completed keep alive response.
2025-06-11T07:57:43.2572451+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:57:43.2573188+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:57:43.2573822+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:57:43.2574828+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 60.5285ms
2025-06-11T07:58:53.7591189+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T07:58:53.7595419+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:58:53.7596167+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:58:53.7596788+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:58:53.7598219+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:58:53.7600329+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:58:53.7600916+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:58:53.7601528+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:58:53.7601744+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:58:53.7602581+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:58:53.7639660+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:58:53.7640522+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:58:53.7640723+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:58:53.7641530+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:53.7641844+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:58:53.7642099+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:53.7642650+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:58:53.7643475+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:58:53.7644623+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:53.7645557+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:58:53.7648902+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:58:53.7649299+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:53.7649595+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:53.7649903+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:58:53.7650305+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:58:53.7653242+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:58:53.7654123+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:53.7654512+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:53.7654931+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:58:53.7655309+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:53.7655705+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:53.7655979+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:53.7656299+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:53.7656710+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:53.7661012+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:53.7661334+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:53.7661889+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:53.7662117+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:53.7662726+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:53.7664488+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:58:53.7692215+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T07:58:53.7715273+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:58:53.7721402+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .OrderBy(__Class => __Class.ClassCode)
    .Select(c => new ClassBasicResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .Count()"'
2025-06-11T07:58:53.7751704+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T07:58:53.7762358+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:58:53.7763085+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:58:53.7763639+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:53.7764120+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:53.7765659+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:58:53.7765978+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:53.7766388+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:53.7767006+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:58:53.7810575+07:00 [ERR] (///) Failed executing DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:58:53.7883285+07:00 [ERR] (///) An exception occurred while iterating over the results of a query for context type '"FacultyService.Application.FacultyDbContext"'."
""System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.EndOfStreamException: Attempted to read past the end of the stream.
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()"
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.EndOfStreamException: Attempted to read past the end of the stream.
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Arch.EntityFrameworkCore.UnitOfWork.Collections.IQueryablePageListExtensions.ToPagedListAsync[T](IQueryable`1 source, Int32 pageIndex, Int32 pageSize, Int32 indexFrom, CancellationToken cancellationToken)
   at FacultyService.Application.Classes.QueryHandler.GetAllClassesQueryHandler.Handle(DefaultClassQuery request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Classes/QueryHandler/GetAllClassesQueryHandler.cs:line 15
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
2025-06-11T07:58:53.8187222+07:00 [ERR] (///) Error processing request "DefaultClassQuery" after 49ms
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.EndOfStreamException: Attempted to read past the end of the stream.
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Arch.EntityFrameworkCore.UnitOfWork.Collections.IQueryablePageListExtensions.ToPagedListAsync[T](IQueryable`1 source, Int32 pageIndex, Int32 pageSize, Int32 indexFrom, CancellationToken cancellationToken)
   at FacultyService.Application.Classes.QueryHandler.GetAllClassesQueryHandler.Handle(DefaultClassQuery request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Classes/QueryHandler/GetAllClassesQueryHandler.cs:line 15
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
   at FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses(GridifyQuery gridifyQuery, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api/Classes/Controller/ClassesController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Finbuckle.MultiTenant.AspNetCore.Internal.MultiTenantMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-11T07:58:53.8265748+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 62.3267ms
2025-06-11T07:58:53.8266637+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:58:53.8275723+07:00 [ERR] (///) An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure.
 ---> Npgsql.NpgsqlException (0x80004005): Exception while reading from stream
 ---> System.IO.EndOfStreamException: Attempted to read past the end of the stream.
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at Npgsql.Internal.NpgsqlReadBuffer.<Ensure>g__EnsureLong|55_0(NpgsqlReadBuffer buffer, Int32 count, Boolean async, Boolean readingNotifications)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Arch.EntityFrameworkCore.UnitOfWork.Collections.IQueryablePageListExtensions.ToPagedListAsync[T](IQueryable`1 source, Int32 pageIndex, Int32 pageSize, Int32 indexFrom, CancellationToken cancellationToken)
   at FacultyService.Application.Classes.QueryHandler.GetAllClassesQueryHandler.Handle(DefaultClassQuery request, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Application/Classes/QueryHandler/GetAllClassesQueryHandler.cs:line 15
   at Shared.Logging.MediatRLoggingBehavior`2.Handle(TRequest request, RequestHandlerDelegate`1 next, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/Shared/Logging/MediatRLoggingBehavior.cs:line 31
   at FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses(GridifyQuery gridifyQuery, CancellationToken cancellationToken) in /home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api/Classes/Controller/ClassesController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Finbuckle.MultiTenant.AspNetCore.Internal.MultiTenantMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-06-11T07:58:53.8437497+07:00 [ERR] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 500 in 83.8463 ms
2025-06-11T07:58:53.8438941+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" completed keep alive response.
2025-06-11T07:58:53.8439601+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:58:53.8440236+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:53.8440680+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:53.8442148+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 500 null "application/problem+json" 85.0245ms
2025-06-11T07:58:54.8517969+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T07:58:54.8521172+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:58:54.8522587+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T07:58:54.8523428+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:58:54.8524463+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:58:54.8525764+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:58:54.8526167+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:58:54.8526686+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:58:54.8526848+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:58:54.8528020+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:58:54.8529154+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:58:54.8529763+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:58:54.8530989+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:58:54.8531362+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:54.8531630+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:58:54.8531864+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:54.8532600+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:58:54.8533474+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:58:54.8534423+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:54.8535158+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:58:54.8535691+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:58:54.8536096+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:54.8536408+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:54.8536686+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:58:54.8538157+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:58:54.8539018+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:58:54.8539299+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:54.8539553+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:54.8539786+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:58:54.8540216+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:54.8540435+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:54.8540788+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:54.8541009+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:54.8541224+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:54.8542092+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:54.8542411+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:54.8543079+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:54.8543337+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:54.8544262+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:54.8545828+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:58:54.8549954+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T07:58:54.8556520+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:58:54.8561308+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:58:54.8561704+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:58:54.8562088+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8644697+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8646537+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:58:54.8646925+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:54.8647367+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:54.8647911+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:58:54.8772177+07:00 [INF] (///) Executed DbCommand ("12"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:58:54.8775704+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8776600+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:58:54.8779048+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8779917+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:54.8787714+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .OrderBy(__Class => __Class.ClassCode)
    .Select(c => new ClassBasicResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-11T07:58:54.8836684+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<ClassBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                ClassCode -> 0
                ClassName -> 1
                FacultyCode -> 2
                StudentCount -> 3
                FacultyName -> 4
                AcademicYearCode -> 5
            SELECT c0.class_code AS ClassCode, c0.class_name AS ClassName, c0.faculty_code AS FacultyCode, (
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.class_code != NULL)) && ((c0.faculty_code == s.faculty_code) && (c0.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c0.academic_year_code AS AcademicYearCode
            FROM 
            (
                SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
                ORDER BY c.class_code ASC
                OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
            ) AS c0
            INNER JOIN 
            (
                SELECT f.faculty_code, f.faculty_name
                FROM faculty AS f
                WHERE f.faculty_code == @__ef_filter__Id_0
            ) AS f0 ON c0.faculty_code == f0.faculty_code
            ORDER BY c0.class_code ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                ClassCode -> 0
                ClassName -> 1
                FacultyCode -> 2
                StudentCount -> 3
                FacultyName -> 4
                AcademicYearCode -> 5
            SELECT c0.class_code AS ClassCode, c0.class_name AS ClassName, c0.faculty_code AS FacultyCode, (
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.class_code != NULL)) && ((c0.faculty_code == s.faculty_code) && (c0.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c0.academic_year_code AS AcademicYearCode
            FROM 
            (
                SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
                ORDER BY c.class_code ASC
                OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
            ) AS c0
            INNER JOIN 
            (
                SELECT f.faculty_code, f.faculty_name
                FROM faculty AS f
                WHERE f.faculty_code == @__ef_filter__Id_0
            ) AS f0 ON c0.faculty_code == f0.faculty_code
            ORDER BY c0.class_code ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            string value1;
            string value2;
            string value3;
            int? value4;
            string value5;
            string value6;
            value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
            return new ClassBasicResponse{ 
                ClassCode = value1, 
                ClassName = value2, 
                FacultyCode = value3, 
                StudentCount = (int)value4, 
                FacultyName = value5, 
                AcademicYearCode = value6 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T07:58:54.8851693+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8852514+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8854317+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:58:54.8854679+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:54.8855218+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:54.8855941+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T07:58:54.8888527+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T07:58:54.8894861+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8895728+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:58:54.8898519+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8899171+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:54.8903162+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 35ms
2025-06-11T07:58:54.8904327+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 35.8081ms.
2025-06-11T07:58:54.8906521+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:58:54.8906956+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:58:54.8907157+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:58:54.8907340+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:58:54.8907682+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:58:54.8908168+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:58:54.8930366+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 39.8232ms
2025-06-11T07:58:54.8930695+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T07:58:54.8931529+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 40.6596 ms
2025-06-11T07:58:54.8932084+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" completed keep alive response.
2025-06-11T07:58:54.8932421+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:58:54.8932855+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:54.8933285+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:54.8933879+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 41.5899ms
2025-06-11T07:58:56.1580420+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T07:58:56.1584009+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:58:56.1584587+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T07:58:56.1585128+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:58:56.1586086+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:58:56.1587568+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:58:56.1588171+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:58:56.1589263+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:58:56.1589500+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:58:56.1589978+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:58:56.1591141+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T07:58:56.1591642+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:58:56.1592745+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:58:56.1593120+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:56.1593308+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:58:56.1593473+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:56.1593926+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:58:56.1594414+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T07:58:56.1595723+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T07:58:56.1596260+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T07:58:56.1596601+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:58:56.1596726+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T07:58:56.1596845+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T07:58:56.1597253+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T07:58:56.1597440+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:56.1597712+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:58:56.1599259+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:58:56.1599532+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:56.1599780+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:56.1601869+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:58:56.1602289+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:58:56.1602521+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:58:56.1602793+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:58:56.1603024+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:56.1603210+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:56.1603463+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:58:56.1603647+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:56.1603804+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:56.1603993+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:56.1604158+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:56.1605009+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:56.1605618+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:56.1605856+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:56.1606231+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:56.1606722+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:56.1606909+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:56.1608561+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:58:56.1610253+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T07:58:56.1620571+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:58:56.1626046+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:58:56.1626860+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:58:56.1627290+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1627868+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1630068+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:58:56.1630806+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:56.1632000+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:56.1632652+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:58:56.1631526+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T07:58:56.1637159+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:58:56.1637619+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T07:58:56.1638076+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:58:56.1638887+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T07:58:56.1640604+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T07:58:56.1640974+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T07:58:56.1641439+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T07:58:56.1641610+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T07:58:56.1641937+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:58:56.1642736+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T07:58:56.1643195+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T07:58:56.1643389+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T07:58:56.1643627+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:56.1643799+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T07:58:56.1644333+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T07:58:56.1644636+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:58:56.1645044+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T07:58:56.1645757+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:58:56.1647115+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T07:58:56.1647477+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:58:56.1647632+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:58:56.1647740+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T07:58:56.1648123+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T07:58:56.1648268+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:56.1648478+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T07:58:56.1648824+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T07:58:56.1649078+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:56.1649250+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T07:58:56.1650099+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T07:58:56.1650381+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T07:58:56.1650563+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T07:58:56.1650721+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:56.1650844+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T07:58:56.1650966+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T07:58:56.1651110+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:56.1651246+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T07:58:56.1651382+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:56.1651811+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:56.1651930+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T07:58:56.1652408+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T07:58:56.1652582+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:56.1652874+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:56.1653039+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T07:58:56.1653180+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T07:58:56.1654856+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T07:58:56.1660854+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T07:58:56.1667714+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T07:58:56.1669732+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T07:58:56.1670161+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1670741+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:58:56.1671867+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1672338+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:56.1673240+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 6ms
2025-06-11T07:58:56.1673790+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 6.4819ms.
2025-06-11T07:58:56.1675482+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:58:56.1675659+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T07:58:56.1676052+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:58:56.1676102+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T07:58:56.1676215+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:58:56.1676332+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:58:56.1676348+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1676587+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:58:56.1676697+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1676767+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T07:58:56.1678169+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:58:56.1678500+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:56.1678880+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:56.1680059+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:58:56.1678646+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 8.4911ms
2025-06-11T07:58:56.1683086+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T07:58:56.1684257+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 9.7602 ms
2025-06-11T07:58:56.1684993+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" completed keep alive response.
2025-06-11T07:58:56.1685375+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:58:56.1685792+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1686118+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:56.1686667+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 10.6243ms
2025-06-11T07:58:56.1698958+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T07:58:56.1701110+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1701867+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:58:56.1703270+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1703849+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:56.1707981+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1708610+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1710105+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T07:58:56.1710521+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:56.1710960+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T07:58:56.1711508+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:58:56.1731157+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T07:58:56.1733354+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1733905+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T07:58:56.1734992+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1735469+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:56.1736324+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 7ms
2025-06-11T07:58:56.1736807+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 8.1532ms.
2025-06-11T07:58:56.1738390+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T07:58:56.1738909+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T07:58:56.1739051+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T07:58:56.1739349+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T07:58:56.1739686+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T07:58:56.1740042+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T07:58:56.1741820+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 9.7249ms
2025-06-11T07:58:56.1742133+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T07:58:56.1743033+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 10.3646 ms
2025-06-11T07:58:56.1743528+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FE"" completed keep alive response.
2025-06-11T07:58:56.1743859+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T07:58:56.1744198+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T07:58:56.1744560+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T07:58:56.1745555+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 11.3567ms
2025-06-11T08:01:06.6326006+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FE"" disconnecting.
2025-06-11T08:01:06.6327132+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FE"" stopped.
2025-06-11T08:01:06.6332011+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" disconnecting.
2025-06-11T08:01:06.6332463+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" stopped.
2025-06-11T08:01:06.6340594+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FE"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T08:01:06.6340763+07:00 [DBG] (///) Connection id ""0HND8G7VHH0FF"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T10:49:02.2391243+07:00 [INF] (///) Application is shutting down...
2025-06-11T10:49:02.2437440+07:00 [DBG] (///) Hosting stopping
2025-06-11T10:49:02.2603136+07:00 [DBG] (///) Hosting stopped
2025-06-11T12:48:37.3890012+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-11T12:48:37.4897774+07:00 [DBG] (///) Hosting starting
2025-06-11T12:48:37.5486142+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-11T12:48:37.5506666+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-11T12:48:37.6074814+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-11T12:48:37.6087647+07:00 [WRN] (///) Overriding address(es) '"http://localhost:5291"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-11T12:48:37.6148254+07:00 [INF] (///) Now listening on: "http://localhost:30000"
2025-06-11T12:48:37.6152851+07:00 [INF] (///) Now listening on: "https://localhost:30001"
2025-06-11T12:48:37.6153998+07:00 [INF] (///) Now listening on: "https://localhost:30002"
2025-06-11T12:48:37.6155215+07:00 [DBG] (///) Loaded hosting startup assembly "FacultyService.Api"
2025-06-11T12:48:37.6157207+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-11T12:48:37.6157809+07:00 [INF] (///) Hosting environment: "Development"
2025-06-11T12:48:37.6158168+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api"
2025-06-11T12:48:37.6158704+07:00 [DBG] (///) Hosting started
2025-06-11T12:48:50.8796404+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" accepted.
2025-06-11T12:48:50.8801417+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF4"" accepted.
2025-06-11T12:48:50.8805302+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF4"" started.
2025-06-11T12:48:50.8807544+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" started.
2025-06-11T12:48:50.9004476+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - null null
2025-06-11T12:48:50.9004386+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - null null
2025-06-11T12:48:50.9596862+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T12:48:50.9596862+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T12:48:50.9644982+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes/{id}"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01"'
2025-06-11T12:48:50.9644982+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode}/classes/{classCode}/students"' is valid for the request path '"/api/v1/it-faculty/classes/D22CQPT01/students"'
2025-06-11T12:48:50.9687028+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T12:48:50.9687028+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T12:48:50.9743399+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T12:48:50.9743395+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T12:48:50.9934481+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T12:48:50.9934489+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T12:48:50.9984192+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T12:48:50.9984193+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T12:48:51.0023609+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T12:48:51.0027798+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T12:48:51.0023637+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T12:48:51.0031236+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T12:48:51.0040313+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T12:48:51.0040307+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T12:48:51.0215598+07:00 [INF] (///) Route matched with "{action = \"GetClassById\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetClassById(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T12:48:51.0215600+07:00 [INF] (///) Route matched with "{action = \"GetAllStudents\", controller = \"StudentsInClass\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStudents(System.String, Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api").
2025-06-11T12:48:51.0240711+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T12:48:51.0240735+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T12:48:51.0242503+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T12:48:51.0242516+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T12:48:51.0247765+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:51.0247779+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:51.0248826+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T12:48:51.0248936+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T12:48:51.0249724+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:51.0249714+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:51.0263306+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T12:48:51.0263293+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T12:48:51.0268900+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Students.Controller.StudentsInClassController" ("FacultyService.Api")
2025-06-11T12:48:51.0268917+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T12:48:51.0293774+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' ...
2025-06-11T12:48:51.0293760+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' ...
2025-06-11T12:48:51.0305830+07:00 [DBG] (///) Attempting to bind parameter '"classCode"' of type '"System.String"' using the name '"classCode"' in request data ...
2025-06-11T12:48:51.0305825+07:00 [DBG] (///) Attempting to bind parameter '"id"' of type '"System.String"' using the name '"id"' in request data ...
2025-06-11T12:48:51.0309545+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T12:48:51.0309526+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T12:48:51.0310174+07:00 [DBG] (///) Done attempting to bind parameter '"classCode"' of type '"System.String"'.
2025-06-11T12:48:51.0310196+07:00 [DBG] (///) Done attempting to bind parameter '"id"' of type '"System.String"'.
2025-06-11T12:48:51.0310619+07:00 [DBG] (///) Attempting to validate the bound parameter '"classCode"' of type '"System.String"' ...
2025-06-11T12:48:51.0310605+07:00 [DBG] (///) Attempting to validate the bound parameter '"id"' of type '"System.String"' ...
2025-06-11T12:48:51.0341607+07:00 [DBG] (///) Done attempting to validate the bound parameter '"id"' of type '"System.String"'.
2025-06-11T12:48:51.0341607+07:00 [DBG] (///) Done attempting to validate the bound parameter '"classCode"' of type '"System.String"'.
2025-06-11T12:48:51.0358599+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:51.0358599+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:51.0361136+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T12:48:51.0364777+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T12:48:51.0387728+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T12:48:51.0387728+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T12:48:51.0391489+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:48:51.0391486+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:48:51.0394366+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:48:51.0394385+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:48:51.0397966+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T12:48:51.0398047+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T12:48:51.0398604+07:00 [DBG] (///) Could not find a value in the request with name '"PageSize"' for binding property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T12:48:51.0398901+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T12:48:51.0399835+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T12:48:51.0400239+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:51.0400590+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:51.0400945+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T12:48:51.0401286+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:51.0401604+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:51.0401431+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T12:48:51.0403257+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:51.0403924+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:51.0404404+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:51.0405416+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T12:48:51.0406196+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:51.0406721+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:51.0407167+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T12:48:51.0407635+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:51.0408034+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:51.0408619+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:51.0409069+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:51.0409387+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:51.0420295+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:51.0420038+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:51.0421161+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:51.0421206+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:51.0424130+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:51.0424132+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:51.0424801+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:51.0424808+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:51.0425927+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:51.0427673+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:51.0505957+07:00 [INF] (///) Executing action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" - Validation state: Valid
2025-06-11T12:48:51.0505958+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" - Validation state: Valid
2025-06-11T12:48:51.0679612+07:00 [INF] (///) Processing request "ClassByIdQuery" with data [("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 }), ("GridifyQuery": GridifyQuery { Page: 0, PageSize: 0, OrderBy: null, Filter: null })]
2025-06-11T12:48:51.0679612+07:00 [INF] (///) Processing request "StudentInClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null }), ("ClassCode": ClassCode { Value: "D22CQPT01", AcademicYear: "22", MajorCode: "PT", ClassNumber: 1 })]
2025-06-11T12:48:51.2159842+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-11T12:48:51.2159840+07:00 [DBG] (///) An additional 'IServiceProvider' was created for internal use by Entity Framework. An existing service provider was not used due to the following configuration changes: "configuration changed for 'Core:EnableDetailedErrors', configuration changed for 'Core:ConfigureWarnings', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseAdminDatabase', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:SetPostgresVersion', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:UseRedshift', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ReverseNullOrdering', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:RemoteCertificateValidationCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvideClientCertificatesCallback', configuration added for 'Npgsql.EntityFrameworkCore.PostgreSQL:ProvidePasswordCallback'".
2025-06-11T12:48:51.6482410+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Class"' as the properties are already covered by the index "{'FacultyCode', 'ClassCode'}".
2025-06-11T12:48:51.6485768+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"CreditClass"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId'}".
2025-06-11T12:48:51.6487013+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId', 'StudentCode'}".
2025-06-11T12:48:51.6488223+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'StudentCode'}".
2025-06-11T12:48:51.6488913+07:00 [DBG] (///) The index "{'FacultyCode', 'CreditClassId'}" was not created on entity type '"Registration"' as the properties are already covered by the index "{'FacultyCode', 'CreditClassId', 'StudentCode'}".
2025-06-11T12:48:51.6489590+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Student"' as the properties are already covered by the index "{'FacultyCode', 'StudentCode'}".
2025-06-11T12:48:51.6490202+07:00 [DBG] (///) The index "{'FacultyCode'}" was not created on entity type '"Student"' as the properties are already covered by the index "{'FacultyCode', 'ClassCode'}".
2025-06-11T12:48:51.8368180+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T12:48:51.8368190+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T12:48:51.8824663+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .Where(c => c.ClassCode == __request_ClassCode_Value_0)
    .Select(c => new ClassDetailResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .FirstOrDefault()"'
2025-06-11T12:48:51.8824663+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .OrderBy(__Student => __Student.StudentCode)
    .Select(s => new StudentBasicResponse{ 
        StudentCode = s.StudentCode, 
        FirstName = s.FirstName, 
        LastName = s.LastName, 
        Gender = GenderExtensions.FromBoolean(s.Gender ?? False), 
        BirthDate = s.BirthDate, 
        Address = s.Address, 
        IsSuspended = s.IsSuspended, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Count()"'
2025-06-11T12:48:52.0702701+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE s.faculty_code == @__ef_filter__Id_0) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE s.faculty_code == @__ef_filter__Id_0, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T12:48:52.0702699+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ClassDetailResponse>(
        asyncEnumerable: SingleQueryingEnumerable.Create<ClassDetailResponse>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    ClassCode -> 0
                    ClassName -> 1
                    FacultyCode -> 2
                    StudentCount -> 3
                    FacultyName -> 4
                    AcademicYearCode -> 5
                SELECT TOP(1) c.class_code AS ClassCode, c.class_name AS ClassName, c.faculty_code AS FacultyCode, (
                    SELECT CAST(count(*) AS integer)
                    FROM student AS s
                    WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.class_code != NULL)) && ((c.faculty_code == s.faculty_code) && (c.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c.academic_year_code AS AcademicYearCode
                FROM class AS c
                INNER JOIN 
                (
                    SELECT f.faculty_code, f.faculty_name
                    FROM faculty AS f
                    WHERE f.faculty_code == @__ef_filter__Id_0
                ) AS f0 ON c.faculty_code == f0.faculty_code
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0)) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    ClassCode -> 0
                    ClassName -> 1
                    FacultyCode -> 2
                    StudentCount -> 3
                    FacultyName -> 4
                    AcademicYearCode -> 5
                SELECT TOP(1) c.class_code AS ClassCode, c.class_name AS ClassName, c.faculty_code AS FacultyCode, (
                    SELECT CAST(count(*) AS integer)
                    FROM student AS s
                    WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.class_code != NULL)) && ((c.faculty_code == s.faculty_code) && (c.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c.academic_year_code AS AcademicYearCode
                FROM class AS c
                INNER JOIN 
                (
                    SELECT f.faculty_code, f.faculty_name
                    FROM faculty AS f
                    WHERE f.faculty_code == @__ef_filter__Id_0
                ) AS f0 ON c.faculty_code == f0.faculty_code
                WHERE (c.faculty_code == @__ef_filter__Id_0) && (c.class_code == @__request_ClassCode_Value_0), 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                string value1;
                string value2;
                string value3;
                int? value4;
                string value5;
                string value6;
                value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
                value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
                value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
                value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
                value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
                value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
                return new ClassDetailResponse{ 
                    ClassCode = value1, 
                    ClassName = value2, 
                    FacultyCode = value3, 
                    StudentCount = (int)value4, 
                    FacultyName = value5, 
                    AcademicYearCode = value6 
                }
                ;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T12:48:52.1049008+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T12:48:52.1049004+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T12:48:52.1403493+07:00 [DBG] (///) Created DbConnection. (33ms).
2025-06-11T12:48:52.1403488+07:00 [DBG] (///) Created DbConnection. (33ms).
2025-06-11T12:48:52.1432105+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.1432099+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.2732575+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.2732636+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.2781903+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:48:52.2781882+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:48:52.2831154+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (2ms).
2025-06-11T12:48:52.2831144+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (2ms).
2025-06-11T12:48:52.2905391+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (12ms).
2025-06-11T12:48:52.2905394+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (12ms).
2025-06-11T12:48:52.2978110+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:48:52.2978073+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T12:48:52.3795206+07:00 [INF] (///) Executed DbCommand ("79"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:48:52.3795210+07:00 [INF] (///) Executed DbCommand ("79"ms) [Parameters=["@__ef_filter__Id_0='?', @__request_ClassCode_Value_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT c.class_code AS \"ClassCode\", c.class_name AS \"ClassName\", c.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = s.faculty_code AND c.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c.academic_year_code AS \"AcademicYearCode\"
FROM class AS c
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c.faculty_code = f0.faculty_code
WHERE c.faculty_code = @__ef_filter__Id_0 AND c.class_code = @__request_ClassCode_Value_0
LIMIT 1"
2025-06-11T12:48:52.3925286+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.3925278+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.4000526+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 14ms reading results.
2025-06-11T12:48:52.4000471+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 14ms reading results.
2025-06-11T12:48:52.4048216+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.4048157+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.4098650+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (4ms).
2025-06-11T12:48:52.4098643+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (4ms).
2025-06-11T12:48:52.4107936+07:00 [INF] (///) Request "ClassByIdQuery" processed successfully in 1339ms
2025-06-11T12:48:52.4136120+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Student>()
    .OrderBy(__Student => __Student.StudentCode)
    .Select(s => new StudentBasicResponse{ 
        StudentCode = s.StudentCode, 
        FirstName = s.FirstName, 
        LastName = s.LastName, 
        Gender = GenderExtensions.FromBoolean(s.Gender ?? False), 
        BirthDate = s.BirthDate, 
        Address = s.Address, 
        IsSuspended = s.IsSuspended, 
        ClassCode = s.ClassCode, 
        FacultyCode = s.FacultyCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-11T12:48:52.4150014+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 1361.4565ms.
2025-06-11T12:48:52.4251191+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T12:48:52.4276121+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T12:48:52.4277549+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T12:48:52.4277881+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T12:48:52.4283779+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T12:48:52.4288827+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"FacultyService.Application.Classes.Response.ClassDetailResponse"'.
2025-06-11T12:48:52.4330407+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<StudentBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
            SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
            FROM student AS s
            WHERE s.faculty_code == @__ef_filter__Id_0
            ORDER BY s.student_code ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Client Projections:
                0 -> 0
                1 -> 1
                2 -> 2
                3 -> 3
                4 -> 4
                5 -> 5
                6 -> 6
                7 -> 7
                8 -> 8
            SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
            FROM student AS s
            WHERE s.faculty_code == @__ef_filter__Id_0
            ORDER BY s.student_code ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            string value1;
            string value2;
            string value3;
            bool? value4;
            DateOnly? value5;
            string value6;
            bool? value7;
            string value8;
            string value9;
            value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(bool?) : (bool?)dataReader.GetBoolean(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.IsDBNull(4) ? default(DateOnly?) : (DateOnly?)dataReader.GetFieldValue<DateOnly>(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.IsDBNull(5) ? default(string) : dataReader.GetString(5) } catch (Exception) { ... } ;
            value7 = try { (bool?)dataReader.GetBoolean(6) } catch (Exception) { ... } ;
            value8 = try { dataReader.GetString(7) } catch (Exception) { ... } ;
            value9 = try { dataReader.GetString(8) } catch (Exception) { ... } ;
            return new StudentBasicResponse{ 
                StudentCode = value1, 
                FirstName = value2, 
                LastName = value3, 
                Gender = GenderExtensions.FromBoolean((bool)value4), 
                BirthDate = value5, 
                Address = value6, 
                IsSuspended = (bool)value7, 
                ClassCode = value8, 
                FacultyCode = value9 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T12:48:52.4374761+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.4380734+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.4383988+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:48:52.4385011+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:52.4386085+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:52.4387598+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T12:48:52.4428521+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT s.student_code, s.first_name, s.last_name, COALESCE(s.gender, FALSE), s.birth_date, s.address, s.is_suspended, s.class_code, s.faculty_code
FROM student AS s
WHERE s.faculty_code = @__ef_filter__Id_0
ORDER BY s.student_code
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T12:48:52.4437998+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.4439223+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T12:48:52.4440743+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.4441442+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:48:52.4448827+07:00 [INF] (///) Request "StudentInClassQuery" processed successfully in 1374ms
2025-06-11T12:48:52.4450394+07:00 [INF] (///) Executed action method "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 1394.1854ms.
2025-06-11T12:48:52.4453635+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T12:48:52.4454973+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T12:48:52.4455324+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T12:48:52.4455541+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T12:48:52.4457278+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T12:48:52.4457823+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Students.Response.StudentBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T12:48:52.4791505+07:00 [INF] (///) Executed action "FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)" in 1450.726ms
2025-06-11T12:48:52.4791498+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)" in 1450.7306ms
2025-06-11T12:48:52.4801118+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Students.Controller.StudentsInClassController.GetAllStudents (FacultyService.Api)"'
2025-06-11T12:48:52.4801499+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetClassById (FacultyService.Api)"'
2025-06-11T12:48:52.4902612+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01" responded 200 in 1511.3313 ms
2025-06-11T12:48:52.4902612+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes/D22CQPT01/students" responded 200 in 1511.3307 ms
2025-06-11T12:48:52.4944863+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF4"" completed keep alive response.
2025-06-11T12:48:52.4944880+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" completed keep alive response.
2025-06-11T12:48:52.5027874+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T12:48:52.5027872+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T12:48:52.5083754+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.5083735+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:52.5106762+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (2ms).
2025-06-11T12:48:52.5106768+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (2ms).
2025-06-11T12:48:52.5124905+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01""" - 200 null "application/json; charset=utf-8" 1613.296ms
2025-06-11T12:48:52.5124912+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes/D22CQPT01/students""?pageSize=50" - 200 null "application/json; charset=utf-8" 1613.296ms
2025-06-11T12:48:54.8533580+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T12:48:54.8549497+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T12:48:54.8552499+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T12:48:54.8554599+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T12:48:54.8558077+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T12:48:54.8563152+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T12:48:54.8565028+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T12:48:54.8567736+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T12:48:54.8568474+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T12:48:54.8569357+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T12:48:54.8622991+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T12:48:54.8625309+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T12:48:54.8626223+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T12:48:54.8627002+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:54.8627662+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T12:48:54.8628384+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:54.8630234+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T12:48:54.8631915+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T12:48:54.8634552+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:54.8636180+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T12:48:54.8642261+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T12:48:54.8643497+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:48:54.8643962+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:48:54.8644479+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T12:48:54.8645091+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T12:48:54.8646013+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T12:48:54.8646664+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:54.8647548+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:54.8649053+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T12:48:54.8649628+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:54.8652205+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:54.8654203+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:54.8654650+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:54.8655303+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:54.8660623+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:54.8661867+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:54.8663135+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:54.8663578+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:54.8664343+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:54.8670333+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T12:48:54.8712218+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T12:48:54.9141798+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T12:48:54.9158440+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .OrderBy(__Class => __Class.ClassCode)
    .Select(c => new ClassBasicResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .Count()"'
2025-06-11T12:48:54.9192637+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T12:48:54.9202029+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T12:48:54.9203022+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T12:48:54.9203527+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9204368+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9206014+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:48:54.9206968+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:54.9207544+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:54.9208541+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:48:54.9228904+07:00 [INF] (///) Executed DbCommand ("2"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:48:54.9232324+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9233125+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T12:48:54.9234285+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9235061+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:48:54.9241787+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<Class>()
    .OrderBy(__Class => __Class.ClassCode)
    .Select(c => new ClassBasicResponse{ 
        ClassCode = c.ClassCode, 
        ClassName = c.ClassName, 
        FacultyCode = c.FacultyCode, 
        StudentCount = c.Students.Count, 
        FacultyName = c.FacultyCodeNavigation.FacultyName, 
        AcademicYearCode = c.AcademicYearCode 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-11T12:48:54.9290707+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<ClassBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                ClassCode -> 0
                ClassName -> 1
                FacultyCode -> 2
                StudentCount -> 3
                FacultyName -> 4
                AcademicYearCode -> 5
            SELECT c0.class_code AS ClassCode, c0.class_name AS ClassName, c0.faculty_code AS FacultyCode, (
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.class_code != NULL)) && ((c0.faculty_code == s.faculty_code) && (c0.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c0.academic_year_code AS AcademicYearCode
            FROM 
            (
                SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
                ORDER BY c.class_code ASC
                OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
            ) AS c0
            INNER JOIN 
            (
                SELECT f.faculty_code, f.faculty_name
                FROM faculty AS f
                WHERE f.faculty_code == @__ef_filter__Id_0
            ) AS f0 ON c0.faculty_code == f0.faculty_code
            ORDER BY c0.class_code ASC) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                ClassCode -> 0
                ClassName -> 1
                FacultyCode -> 2
                StudentCount -> 3
                FacultyName -> 4
                AcademicYearCode -> 5
            SELECT c0.class_code AS ClassCode, c0.class_name AS ClassName, c0.faculty_code AS FacultyCode, (
                SELECT CAST(count(*) AS integer)
                FROM student AS s
                WHERE (s.faculty_code == @__ef_filter__Id_0) && (((c0.faculty_code != NULL) && (c0.class_code != NULL)) && ((c0.faculty_code == s.faculty_code) && (c0.class_code == s.class_code)))) AS StudentCount, f0.faculty_name AS FacultyName, c0.academic_year_code AS AcademicYearCode
            FROM 
            (
                SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
                FROM class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0
                ORDER BY c.class_code ASC
                OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
            ) AS c0
            INNER JOIN 
            (
                SELECT f.faculty_code, f.faculty_name
                FROM faculty AS f
                WHERE f.faculty_code == @__ef_filter__Id_0
            ) AS f0 ON c0.faculty_code == f0.faculty_code
            ORDER BY c0.class_code ASC, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            string value1;
            string value2;
            string value3;
            int? value4;
            string value5;
            string value6;
            value1 = try { dataReader.GetString(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { dataReader.GetString(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.GetString(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
            return new ClassBasicResponse{ 
                ClassCode = value1, 
                ClassName = value2, 
                FacultyCode = value3, 
                StudentCount = (int)value4, 
                FacultyName = value5, 
                AcademicYearCode = value6 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T12:48:54.9304827+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9305899+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9307364+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:48:54.9307884+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:54.9308387+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:54.9309070+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T12:48:54.9343637+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T12:48:54.9350676+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9351696+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T12:48:54.9353257+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9354102+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:48:54.9356945+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 64ms
2025-06-11T12:48:54.9358117+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 68.6524ms.
2025-06-11T12:48:54.9360291+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T12:48:54.9361157+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T12:48:54.9361473+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T12:48:54.9362706+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T12:48:54.9363398+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T12:48:54.9363969+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T12:48:54.9392003+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 76.152ms
2025-06-11T12:48:54.9393509+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T12:48:54.9396392+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 83.6736 ms
2025-06-11T12:48:54.9398393+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" completed keep alive response.
2025-06-11T12:48:54.9399839+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T12:48:54.9400713+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:54.9401295+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:48:54.9402428+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 86.9113ms
2025-06-11T12:48:58.5494149+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/creditclasses""?page=0&pageSize=50" - null null
2025-06-11T12:48:58.5498882+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/creditclasses"'
2025-06-11T12:48:58.5499490+07:00 [DBG] (///) Endpoint '"FacultyService.Api.CreditClasses.Controller.CreditClassesController.GetAllCreditClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/CreditClasses"' is valid for the request path '"/api/v1/it-faculty/creditclasses"'
2025-06-11T12:48:58.5500436+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.CreditClasses.Controller.CreditClassesController.GetAllCreditClasses (FacultyService.Api)"'
2025-06-11T12:48:58.5501598+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T12:48:58.5503043+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T12:48:58.5503425+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T12:48:58.5504133+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T12:48:58.5504345+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T12:48:58.5504694+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.CreditClasses.Controller.CreditClassesController.GetAllCreditClasses (FacultyService.Api)"'
2025-06-11T12:48:58.5535368+07:00 [INF] (///) Route matched with "{action = \"GetAllCreditClasses\", controller = \"CreditClasses\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCreditClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.CreditClasses.Controller.CreditClassesController" ("FacultyService.Api").
2025-06-11T12:48:58.5536229+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T12:48:58.5536435+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T12:48:58.5536684+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:58.5536911+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T12:48:58.5537548+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:48:58.5537869+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.CreditClasses.Controller.CreditClassesController" ("FacultyService.Api")
2025-06-11T12:48:58.5540423+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.CreditClasses.Controller.CreditClassesController" ("FacultyService.Api")
2025-06-11T12:48:58.5541622+07:00 [DBG] (///) Attempting to bind parameter '"query"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:58.5542539+07:00 [DBG] (///) Attempting to bind parameter '"query"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T12:48:58.5545586+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T12:48:58.5546339+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:48:58.5548357+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T12:48:58.5548811+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T12:48:58.5549018+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T12:48:58.5549236+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:58.5549359+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:48:58.5550226+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T12:48:58.5550927+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:58.5551204+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:48:58.5551524+07:00 [DBG] (///) Done attempting to bind parameter '"query"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:58.5551677+07:00 [DBG] (///) Done attempting to bind parameter '"query"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:58.5551800+07:00 [DBG] (///) Attempting to validate the bound parameter '"query"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:48:58.5554531+07:00 [DBG] (///) Done attempting to validate the bound parameter '"query"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:48:58.5555351+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:58.5556024+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:58.5556217+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:48:58.5556592+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:48:58.5559094+07:00 [INF] (///) Executing action method "FacultyService.Api.CreditClasses.Controller.CreditClassesController.GetAllCreditClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T12:48:58.5603460+07:00 [INF] (///) Processing request "DefaultCreditClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T12:48:58.5635315+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T12:48:58.5646089+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<CreditClass>()
    .OrderBy(__CreditClass => __CreditClass.CreditClassId)
    .Select(c => new CreditClassBasicResponse{ 
        CreditClassId = c.CreditClassId, 
        CourseCode = c.CourseCode, 
        GroupNumber = c.GroupNumber, 
        CurrentStudent = c.Registrations.Count, 
        MinStudent = (int)c.MinStudent, 
        AcademicYear = c.AcademicYear, 
        Semester = c.Semester, 
        IsCancelled = c.IsCancelled 
    }
    )
    .Count()"'
2025-06-11T12:48:58.5674383+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
        asyncEnumerable: SingleQueryingEnumerable.Create<int>(
            relationalQueryContext: (RelationalQueryContext)queryContext, 
            relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM credit_class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0) | Resolver: c => new RelationalCommandCache(
                c.Dependencies.MemoryCache, 
                c.RelationalDependencies.QuerySqlGeneratorFactory, 
                c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
                Projection Mapping:
                    EmptyProjectionMember -> 0
                SELECT CAST(count(*) AS integer)
                FROM credit_class AS c
                WHERE c.faculty_code == @__ef_filter__Id_0, 
                False, 
                new HashSet<string>(
                    new string[]{ }, 
                    StringComparer.Ordinal
                )
            )].GetRelationalCommandTemplate(parameters), 
            readerColumns: null, 
            shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
            {
                int? value1;
                value1 = try { dataReader.IsDBNull(0) ? default(int?) : (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
                return (int)value1;
            }, 
            contextType: FacultyService.Application.FacultyDbContext, 
            standAloneStateManager: False, 
            detailedErrorsEnabled: True, 
            threadSafetyChecksEnabled: True), 
        cancellationToken: queryContext.CancellationToken);
}"'
2025-06-11T12:48:58.5681655+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T12:48:58.5682208+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T12:48:58.5683104+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5683626+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5685060+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:48:58.5685429+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:58.5685813+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:58.5686241+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM credit_class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:48:58.5725348+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM credit_class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:48:58.5728171+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5729478+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T12:48:58.5730921+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5731548+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:48:58.5738345+07:00 [DBG] (///) Compiling query expression: "
"'"DbSet<CreditClass>()
    .OrderBy(__CreditClass => __CreditClass.CreditClassId)
    .Select(c => new CreditClassBasicResponse{ 
        CreditClassId = c.CreditClassId, 
        CourseCode = c.CourseCode, 
        GroupNumber = c.GroupNumber, 
        CurrentStudent = c.Registrations.Count, 
        MinStudent = (int)c.MinStudent, 
        AcademicYear = c.AcademicYear, 
        Semester = c.Semester, 
        IsCancelled = c.IsCancelled 
    }
    )
    .Skip(__p_0)
    .Take(__p_1)"'
2025-06-11T12:48:58.5780764+07:00 [DBG] (///) Generated query execution expression: "
"'"queryContext => 
{
    queryContext.AddParameter(
        name: \"__ef_filter__Id_0\", 
        value: (object)Invoke(queryContext => ((FacultyDbContext)queryContext.Context).TenantInfo.Id, queryContext));
    return SingleQueryingEnumerable.Create<CreditClassBasicResponse>(
        relationalQueryContext: (RelationalQueryContext)queryContext, 
        relationalCommandResolver: parameters => [LIFTABLE Constant: RelationalCommandCache.QueryExpression(
            Projection Mapping:
                CreditClassId -> 0
                CourseCode -> 1
                GroupNumber -> 2
                CurrentStudent -> 3
                MinStudent -> 4
                AcademicYear -> 5
                Semester -> 6
                IsCancelled -> 7
            SELECT c.credit_class_id AS CreditClassId, c.course_code AS CourseCode, c.group_number AS GroupNumber, (
                SELECT CAST(count(*) AS integer)
                FROM registration AS r
                WHERE (r.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.credit_class_id != NULL)) && ((c.faculty_code == r.faculty_code) && (c.credit_class_id == r.credit_class_id)))) AS CurrentStudent, CAST(c.min_student AS integer) AS MinStudent, c.academic_year AS AcademicYear, c.semester AS Semester, c.is_cancelled AS IsCancelled
            FROM credit_class AS c
            WHERE c.faculty_code == @__ef_filter__Id_0
            ORDER BY c.credit_class_id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY) | Resolver: c => new RelationalCommandCache(
            c.Dependencies.MemoryCache, 
            c.RelationalDependencies.QuerySqlGeneratorFactory, 
            c.RelationalDependencies.RelationalParameterBasedSqlProcessorFactory, 
            Projection Mapping:
                CreditClassId -> 0
                CourseCode -> 1
                GroupNumber -> 2
                CurrentStudent -> 3
                MinStudent -> 4
                AcademicYear -> 5
                Semester -> 6
                IsCancelled -> 7
            SELECT c.credit_class_id AS CreditClassId, c.course_code AS CourseCode, c.group_number AS GroupNumber, (
                SELECT CAST(count(*) AS integer)
                FROM registration AS r
                WHERE (r.faculty_code == @__ef_filter__Id_0) && (((c.faculty_code != NULL) && (c.credit_class_id != NULL)) && ((c.faculty_code == r.faculty_code) && (c.credit_class_id == r.credit_class_id)))) AS CurrentStudent, CAST(c.min_student AS integer) AS MinStudent, c.academic_year AS AcademicYear, c.semester AS Semester, c.is_cancelled AS IsCancelled
            FROM credit_class AS c
            WHERE c.faculty_code == @__ef_filter__Id_0
            ORDER BY c.credit_class_id ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY, 
            False, 
            new HashSet<string>(
                new string[]{ }, 
                StringComparer.Ordinal
            )
        )].GetRelationalCommandTemplate(parameters), 
        readerColumns: null, 
        shaper: (queryContext, dataReader, resultContext, resultCoordinator) => 
        {
            int? value1;
            string value2;
            int? value3;
            int? value4;
            int? value5;
            string value6;
            int? value7;
            bool? value8;
            value1 = try { (int?)dataReader.GetInt32(0) } catch (Exception) { ... } ;
            value2 = try { dataReader.GetString(1) } catch (Exception) { ... } ;
            value3 = try { (int?)dataReader.GetInt32(2) } catch (Exception) { ... } ;
            value4 = try { dataReader.IsDBNull(3) ? default(int?) : (int?)dataReader.GetInt32(3) } catch (Exception) { ... } ;
            value5 = try { dataReader.IsDBNull(4) ? default(int?) : (int?)dataReader.GetInt32(4) } catch (Exception) { ... } ;
            value6 = try { dataReader.GetString(5) } catch (Exception) { ... } ;
            value7 = try { (int?)dataReader.GetInt32(6) } catch (Exception) { ... } ;
            value8 = try { (bool?)dataReader.GetBoolean(7) } catch (Exception) { ... } ;
            return new CreditClassBasicResponse{ 
                CreditClassId = (int)value1, 
                CourseCode = value2, 
                GroupNumber = (int)value3, 
                CurrentStudent = (int)value4, 
                MinStudent = (int)value5, 
                AcademicYear = value6, 
                Semester = (int)value7, 
                IsCancelled = (bool)value8 
            }
            ;
        }, 
        contextType: FacultyService.Application.FacultyDbContext, 
        standAloneStateManager: False, 
        detailedErrorsEnabled: True, 
        threadSafetyChecksEnabled: True);
}"'
2025-06-11T12:48:58.5793777+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5794989+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5796213+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:48:58.5796485+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:58.5796832+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:48:58.5797324+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c.credit_class_id AS \"CreditClassId\", c.course_code AS \"CourseCode\", c.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = r.faculty_code AND c.credit_class_id = r.credit_class_id) AS \"CurrentStudent\", c.min_student::int AS \"MinStudent\", c.academic_year AS \"AcademicYear\", c.semester AS \"Semester\", c.is_cancelled AS \"IsCancelled\"
FROM credit_class AS c
WHERE c.faculty_code = @__ef_filter__Id_0
ORDER BY c.credit_class_id
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T12:48:58.5853776+07:00 [INF] (///) Executed DbCommand ("6"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c.credit_class_id AS \"CreditClassId\", c.course_code AS \"CourseCode\", c.group_number AS \"GroupNumber\", (
    SELECT count(*)::int
    FROM registration AS r
    WHERE r.faculty_code = @__ef_filter__Id_0 AND c.faculty_code = r.faculty_code AND c.credit_class_id = r.credit_class_id) AS \"CurrentStudent\", c.min_student::int AS \"MinStudent\", c.academic_year AS \"AcademicYear\", c.semester AS \"Semester\", c.is_cancelled AS \"IsCancelled\"
FROM credit_class AS c
WHERE c.faculty_code = @__ef_filter__Id_0
ORDER BY c.credit_class_id
LIMIT @__p_1 OFFSET @__p_0"
2025-06-11T12:48:58.5877482+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5878368+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 2ms reading results.
2025-06-11T12:48:58.5879325+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5880231+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:48:58.5881820+07:00 [INF] (///) Request "DefaultCreditClassQuery" processed successfully in 27ms
2025-06-11T12:48:58.5882598+07:00 [INF] (///) Executed action method "FacultyService.Api.CreditClasses.Controller.CreditClassesController.GetAllCreditClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 32.217ms.
2025-06-11T12:48:58.5884560+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T12:48:58.5885087+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T12:48:58.5885223+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T12:48:58.5885319+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T12:48:58.5885538+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T12:48:58.5885859+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.CreditClasses.Response.CreditClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T12:48:58.5920755+07:00 [INF] (///) Executed action "FacultyService.Api.CreditClasses.Controller.CreditClassesController.GetAllCreditClasses (FacultyService.Api)" in 38.2932ms
2025-06-11T12:48:58.5921463+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.CreditClasses.Controller.CreditClassesController.GetAllCreditClasses (FacultyService.Api)"'
2025-06-11T12:48:58.5922505+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/creditclasses" responded 200 in 42.0210 ms
2025-06-11T12:48:58.5923123+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" completed keep alive response.
2025-06-11T12:48:58.5923639+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T12:48:58.5924216+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:48:58.5924786+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:48:58.5925656+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/creditclasses""?page=0&pageSize=50" - 200 null "application/json; charset=utf-8" 43.1411ms
2025-06-11T12:51:02.5726394+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF4"" disconnecting.
2025-06-11T12:51:02.5736070+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF4"" stopped.
2025-06-11T12:51:02.5744001+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF4"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T12:51:09.5725126+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" disconnecting.
2025-06-11T12:51:09.5727152+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" stopped.
2025-06-11T12:51:09.5728470+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF3"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T12:54:16.8331538+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF5"" accepted.
2025-06-11T12:54:16.8335079+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF5"" started.
2025-06-11T12:54:16.8339243+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T12:54:16.8341651+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T12:54:16.8342156+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T12:54:16.8342586+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T12:54:16.8343807+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T12:54:16.8345039+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T12:54:16.8346126+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T12:54:16.8346675+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T12:54:16.8346883+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T12:54:16.8347227+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T12:54:16.8348345+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T12:54:16.8348754+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T12:54:16.8348925+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T12:54:16.8349303+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:54:16.8349497+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T12:54:16.8349609+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T12:54:16.8349888+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T12:54:16.8350343+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T12:54:16.8350957+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:54:16.8351752+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T12:54:16.8352360+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T12:54:16.8352616+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:54:16.8352806+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T12:54:16.8353095+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T12:54:16.8353306+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T12:54:16.8353463+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T12:54:16.8353598+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:54:16.8353709+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T12:54:16.8353841+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T12:54:16.8353953+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:54:16.8354147+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T12:54:16.8354349+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:54:16.8354632+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:54:16.8354722+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T12:54:16.8356481+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T12:54:16.8356702+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:54:16.8357088+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:54:16.8357201+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T12:54:16.8357297+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T12:54:16.8358738+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T12:54:16.8363338+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T12:54:16.8381413+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T12:54:16.8416892+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T12:54:16.8418212+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T12:54:16.8418596+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8661021+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8662802+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:54:16.8663193+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:54:16.8663557+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:54:16.8663979+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:54:16.8763745+07:00 [INF] (///) Executed DbCommand ("10"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T12:54:16.8766875+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8767674+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T12:54:16.8768779+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8769230+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:54:16.8772214+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8772560+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8773551+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T12:54:16.8773807+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:54:16.8774126+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T12:54:16.8774441+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T12:54:16.8801280+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T12:54:16.8803865+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8804320+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T12:54:16.8805292+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8805890+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:54:16.8807038+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 44ms
2025-06-11T12:54:16.8807628+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 44.8428ms.
2025-06-11T12:54:16.8810033+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T12:54:16.8810723+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T12:54:16.8810913+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T12:54:16.8811171+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T12:54:16.8811457+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T12:54:16.8811783+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T12:54:16.8814191+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 46.4351ms
2025-06-11T12:54:16.8815003+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T12:54:16.8817221+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 47.1680 ms
2025-06-11T12:54:16.8817780+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF5"" completed keep alive response.
2025-06-11T12:54:16.8818070+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T12:54:16.8818398+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T12:54:16.8818621+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T12:54:16.8819094+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 47.9827ms
2025-06-11T12:56:28.6100816+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF5"" disconnecting.
2025-06-11T12:56:28.6110239+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF5"" stopped.
2025-06-11T12:56:28.6115036+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF5"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T13:07:57.0009306+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF6"" accepted.
2025-06-11T13:07:57.0013764+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF6"" started.
2025-06-11T13:07:57.0016757+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T13:07:57.0021213+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T13:07:57.0022052+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T13:07:57.0022784+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:07:57.0024078+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T13:07:57.0025910+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T13:07:57.0026659+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T13:07:57.0027446+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T13:07:57.0027784+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T13:07:57.0028289+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:07:57.0029467+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T13:07:57.0029984+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T13:07:57.0031447+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T13:07:57.0031937+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T13:07:57.0032174+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T13:07:57.0032567+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T13:07:57.0033356+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T13:07:57.0033917+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T13:07:57.0034919+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T13:07:57.0035624+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T13:07:57.0036239+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T13:07:57.0036668+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T13:07:57.0036961+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T13:07:57.0037226+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T13:07:57.0037814+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T13:07:57.0213512+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T13:07:57.0214433+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T13:07:57.0214849+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T13:07:57.0216124+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T13:07:57.0216400+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T13:07:57.0216663+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T13:07:57.0216945+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:07:57.0217209+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:07:57.0217407+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T13:07:57.0218264+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:07:57.0218579+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T13:07:57.0219203+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T13:07:57.0219390+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T13:07:57.0220647+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T13:07:57.0223404+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T13:07:57.0225923+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T13:07:57.0236623+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T13:07:57.0240355+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T13:07:57.0240814+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T13:07:57.0241341+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0443815+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0445720+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T13:07:57.0446261+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:07:57.0446705+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:07:57.0447719+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T13:07:57.0555195+07:00 [INF] (///) Executed DbCommand ("11"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T13:07:57.0558283+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0559425+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T13:07:57.0561898+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0562872+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:07:57.0569003+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0569370+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0570920+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T13:07:57.0571316+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:07:57.0571882+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:07:57.0572859+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T13:07:57.0603046+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T13:07:57.0606687+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0607604+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T13:07:57.0608882+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0609596+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:07:57.0610818+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 38ms
2025-06-11T13:07:57.0611504+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 38.7437ms.
2025-06-11T13:07:57.0613701+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T13:07:57.0614408+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T13:07:57.0614592+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T13:07:57.0615439+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T13:07:57.0615753+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T13:07:57.0616070+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T13:07:57.0618855+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 58.5883ms
2025-06-11T13:07:57.0619444+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:07:57.0622158+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 59.6015 ms
2025-06-11T13:07:57.0622915+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF6"" completed keep alive response.
2025-06-11T13:07:57.0623418+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T13:07:57.0623915+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:07:57.0624429+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:07:57.0625150+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 60.8331ms
2025-06-11T13:10:08.7092567+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF6"" disconnecting.
2025-06-11T13:10:08.7097263+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF6"" stopped.
2025-06-11T13:10:08.7103690+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF6"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T13:19:01.9327564+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF7"" accepted.
2025-06-11T13:19:01.9328466+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF7"" started.
2025-06-11T13:19:01.9331806+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T13:19:01.9334972+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T13:19:01.9335637+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T13:19:01.9336164+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:19:01.9337105+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T13:19:01.9338907+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T13:19:01.9340837+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T13:19:01.9341601+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T13:19:01.9341882+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T13:19:01.9343952+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:19:01.9345974+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T13:19:01.9346611+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T13:19:01.9346921+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T13:19:01.9347456+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T13:19:01.9347743+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T13:19:01.9347949+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T13:19:01.9348360+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T13:19:01.9348857+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T13:19:01.9349799+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T13:19:01.9350945+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T13:19:01.9351713+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T13:19:01.9352132+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T13:19:01.9352426+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T13:19:01.9352904+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T13:19:01.9353302+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T13:19:01.9353581+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T13:19:01.9353832+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T13:19:01.9354052+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T13:19:01.9354387+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T13:19:01.9354669+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T13:19:01.9354979+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T13:19:01.9356495+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:19:01.9356748+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:19:01.9356963+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T13:19:01.9357679+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:19:01.9357974+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T13:19:01.9358493+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T13:19:01.9358669+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T13:19:01.9358853+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T13:19:01.9360613+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T13:19:01.9362319+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T13:19:01.9455821+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T13:19:01.9460770+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T13:19:01.9471672+07:00 [DBG] (///) Created DbConnection. (1ms).
2025-06-11T13:19:01.9472205+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9667507+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9669807+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T13:19:01.9670487+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:19:01.9671161+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:19:01.9672171+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T13:19:01.9786792+07:00 [INF] (///) Executed DbCommand ("11"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T13:19:01.9790024+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9791239+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T13:19:01.9794319+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9795363+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:19:01.9801584+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9801922+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9803673+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T13:19:01.9804120+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:19:01.9804656+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:19:01.9805283+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T13:19:01.9834111+07:00 [INF] (///) Executed DbCommand ("3"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T13:19:01.9836422+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9837068+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T13:19:01.9838279+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9838838+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:19:01.9840624+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 47ms
2025-06-11T13:19:01.9841267+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 48.014ms.
2025-06-11T13:19:01.9843727+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T13:19:01.9844295+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T13:19:01.9844441+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T13:19:01.9844615+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T13:19:01.9845022+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T13:19:01.9845278+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T13:19:01.9847618+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 49.9331ms
2025-06-11T13:19:01.9848165+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:19:01.9849205+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 51.1482 ms
2025-06-11T13:19:01.9849906+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF7"" completed keep alive response.
2025-06-11T13:19:01.9850300+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T13:19:01.9853036+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:19:01.9853499+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:19:01.9854321+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 52.2364ms
2025-06-11T13:21:13.7888586+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF7"" disconnecting.
2025-06-11T13:21:13.7889767+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF7"" stopped.
2025-06-11T13:21:13.7894578+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF7"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T13:37:10.0963705+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF8"" accepted.
2025-06-11T13:37:10.0969157+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF8"" started.
2025-06-11T13:37:10.0971579+07:00 [INF] (///) Request starting "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - null null
2025-06-11T13:37:10.0975729+07:00 [DBG] (///) 1 candidate(s) found for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T13:37:10.0977577+07:00 [DBG] (///) Endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"' with route pattern '"api/v{version:apiVersion}/{facultyCode:facultyCode}/Classes"' is valid for the request path '"/api/v1/it-faculty/classes"'
2025-06-11T13:37:10.0978460+07:00 [DBG] (///) Request matched endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:37:10.0979727+07:00 [DBG] (///) Static files was skipped as the request already matched an endpoint.
2025-06-11T13:37:10.0982551+07:00 [DBG] (///) GetIdentifierAsync: Found identifier: ""IT-FACULTY""
2025-06-11T13:37:10.0983388+07:00 [DBG] (///) TryGetByIdentifierAsync: Tenant found with identifier ""IT-FACULTY""
2025-06-11T13:37:10.0984301+07:00 [DBG] (///) The request has an origin header: '"http://localhost:32101"'.
2025-06-11T13:37:10.0984633+07:00 [INF] (///) CORS policy execution successful.
2025-06-11T13:37:10.0985305+07:00 [INF] (///) Executing endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:37:10.0986559+07:00 [INF] (///) Route matched with "{action = \"GetAllClasses\", controller = \"Classes\"}". Executing controller action with signature "System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllClasses(Gridify.GridifyQuery, System.Threading.CancellationToken)" on controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api").
2025-06-11T13:37:10.0987325+07:00 [DBG] (///) Execution plan of "authorization" filters (in the following order): ["None"]
2025-06-11T13:37:10.0987678+07:00 [DBG] (///) Execution plan of "resource" filters (in the following order): ["None"]
2025-06-11T13:37:10.0988066+07:00 [DBG] (///) Execution plan of "action" filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)", "Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T13:37:10.0988357+07:00 [DBG] (///) Execution plan of "exception" filters (in the following order): ["None"]
2025-06-11T13:37:10.0988635+07:00 [DBG] (///) Execution plan of "result" filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)", "Asp.Versioning.ReportApiVersionsAttribute (Order: 0)"]
2025-06-11T13:37:10.0989023+07:00 [DBG] (///) Executing controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T13:37:10.0990604+07:00 [DBG] (///) Executed controller factory for controller "FacultyService.Api.Classes.Controller.ClassesController" ("FacultyService.Api")
2025-06-11T13:37:10.0992287+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T13:37:10.0993175+07:00 [DBG] (///) Attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' using the name '""' in request data ...
2025-06-11T13:37:10.0993776+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"' using the name '"Page"' in request data ...
2025-06-11T13:37:10.0994134+07:00 [DBG] (///) Could not find a value in the request with name '"Page"' for binding property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T13:37:10.0994499+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Page"' of type '"System.Int32"'.
2025-06-11T13:37:10.0994846+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"' using the name '"PageSize"' in request data ...
2025-06-11T13:37:10.0995194+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."PageSize"' of type '"System.Int32"'.
2025-06-11T13:37:10.0995498+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"' using the name '"OrderBy"' in request data ...
2025-06-11T13:37:10.0995749+07:00 [DBG] (///) Could not find a value in the request with name '"OrderBy"' for binding property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T13:37:10.0995979+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."OrderBy"' of type '"System.String"'.
2025-06-11T13:37:10.0996225+07:00 [DBG] (///) Attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"' using the name '"Filter"' in request data ...
2025-06-11T13:37:10.0996459+07:00 [DBG] (///) Could not find a value in the request with name '"Filter"' for binding property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T13:37:10.0996826+07:00 [DBG] (///) Done attempting to bind property '"Gridify.GridifyQuery"."Filter"' of type '"System.String"'.
2025-06-11T13:37:10.0998274+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:37:10.0998559+07:00 [DBG] (///) Done attempting to bind parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:37:10.0998745+07:00 [DBG] (///) Attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"' ...
2025-06-11T13:37:10.0999523+07:00 [DBG] (///) Done attempting to validate the bound parameter '"gridifyQuery"' of type '"Gridify.GridifyQuery"'.
2025-06-11T13:37:10.0999778+07:00 [DBG] (///) Attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T13:37:10.1000414+07:00 [DBG] (///) Done attempting to bind parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T13:37:10.1000599+07:00 [DBG] (///) Attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"' ...
2025-06-11T13:37:10.1000830+07:00 [DBG] (///) Done attempting to validate the bound parameter '"cancellationToken"' of type '"System.Threading.CancellationToken"'.
2025-06-11T13:37:10.1002765+07:00 [INF] (///) Executing action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" - Validation state: Valid
2025-06-11T13:37:10.1004489+07:00 [INF] (///) Processing request "DefaultClassQuery" with data [("GridifyQuery": GridifyQuery { Page: 0, PageSize: 50, OrderBy: null, Filter: null })]
2025-06-11T13:37:10.1013933+07:00 [DBG] (///) Entity Framework Core "9.0.5" initialized '"FacultyDbContext"' using provider '"Npgsql.EntityFrameworkCore.PostgreSQL":"9.0.4+fd2380957bee5cd86f336466af36b08c0163f1a5"' with options: "DetailedErrorsEnabled "
2025-06-11T13:37:10.1018199+07:00 [DBG] (///) Creating DbConnection.
2025-06-11T13:37:10.1020015+07:00 [DBG] (///) Created DbConnection. (0ms).
2025-06-11T13:37:10.1020362+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1310229+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1312236+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T13:37:10.1313173+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:37:10.1314461+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:37:10.1315681+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T13:37:10.1438443+07:00 [INF] (///) Executed DbCommand ("12"ms) [Parameters=["@__ef_filter__Id_0='?'"], CommandType='Text', CommandTimeout='300']"
""SELECT count(*)::int
FROM class AS c
WHERE c.faculty_code = @__ef_filter__Id_0"
2025-06-11T13:37:10.1441419+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1442351+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T13:37:10.1446098+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1447362+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:37:10.1452944+07:00 [DBG] (///) Opening connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1453398+07:00 [DBG] (///) Opened connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1455084+07:00 [DBG] (///) Creating DbCommand for '"ExecuteReader"'.
2025-06-11T13:37:10.1455526+07:00 [DBG] (///) Created DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:37:10.1456067+07:00 [DBG] (///) Initialized DbCommand for '"ExecuteReader"' (0ms).
2025-06-11T13:37:10.1456658+07:00 [DBG] (///) Executing DbCommand [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T13:37:10.1494740+07:00 [INF] (///) Executed DbCommand ("4"ms) [Parameters=["@__ef_filter__Id_0='?', @__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)"], CommandType='Text', CommandTimeout='300']"
""SELECT c0.class_code AS \"ClassCode\", c0.class_name AS \"ClassName\", c0.faculty_code AS \"FacultyCode\", (
    SELECT count(*)::int
    FROM student AS s
    WHERE s.faculty_code = @__ef_filter__Id_0 AND c0.faculty_code = s.faculty_code AND c0.class_code = s.class_code) AS \"StudentCount\", f0.faculty_name AS \"FacultyName\", c0.academic_year_code AS \"AcademicYearCode\"
FROM (
    SELECT c.faculty_code, c.class_code, c.academic_year_code, c.class_name
    FROM class AS c
    WHERE c.faculty_code = @__ef_filter__Id_0
    ORDER BY c.class_code
    LIMIT @__p_1 OFFSET @__p_0
) AS c0
INNER JOIN (
    SELECT f.faculty_code, f.faculty_name
    FROM faculty AS f
    WHERE f.faculty_code = @__ef_filter__Id_0
) AS f0 ON c0.faculty_code = f0.faculty_code
ORDER BY c0.class_code"
2025-06-11T13:37:10.1497978+07:00 [DBG] (///) Closing data reader to '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1498703+07:00 [DBG] (///) A data reader for '"dsmsdb"' on server '"tcp://localhost:26000"' is being disposed after spending 0ms reading results.
2025-06-11T13:37:10.1500030+07:00 [DBG] (///) Closing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1500580+07:00 [DBG] (///) Closed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:37:10.1501672+07:00 [INF] (///) Request "DefaultClassQuery" processed successfully in 49ms
2025-06-11T13:37:10.1502283+07:00 [INF] (///) Executed action method "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)", returned result "Microsoft.AspNetCore.Mvc.OkObjectResult" in 49.8985ms.
2025-06-11T13:37:10.1504500+07:00 [DBG] (///) List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter", "Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-06-11T13:37:10.1505149+07:00 [DBG] (///) No information found on request to perform content negotiation.
2025-06-11T13:37:10.1505340+07:00 [DBG] (///) Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-06-11T13:37:10.1505521+07:00 [DBG] (///) Attempting to select the first formatter in the output formatters list which can write the result.
2025-06-11T13:37:10.1505945+07:00 [DBG] (///) Selected output formatter '"Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"' and content type '"application/json"' to write the response.
2025-06-11T13:37:10.1506191+07:00 [INF] (///) Executing "OkObjectResult", writing value of type '"Arch.EntityFrameworkCore.UnitOfWork.Collections.PagedList`1[[FacultyService.Application.Classes.Response.ClassBasicResponse, FacultyService.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]"'.
2025-06-11T13:37:10.1509220+07:00 [INF] (///) Executed action "FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)" in 51.9474ms
2025-06-11T13:37:10.1509546+07:00 [INF] (///) Executed endpoint '"FacultyService.Api.Classes.Controller.ClassesController.GetAllClasses (FacultyService.Api)"'
2025-06-11T13:37:10.1510572+07:00 [INF] (///) HTTP "GET" "/api/v1/it-faculty/classes" responded 200 in 53.0233 ms
2025-06-11T13:37:10.1511354+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF8"" completed keep alive response.
2025-06-11T13:37:10.1511882+07:00 [DBG] (///) '"FacultyDbContext"' disposed.
2025-06-11T13:37:10.1512276+07:00 [DBG] (///) Disposing connection to database '"dsmsdb"' on server '"tcp://localhost:26000"'.
2025-06-11T13:37:10.1512703+07:00 [DBG] (///) Disposed connection to database '"dsmsdb"' on server '"tcp://localhost:26000"' (0ms).
2025-06-11T13:37:10.1513356+07:00 [INF] (///) Request finished "HTTP/1.1" "GET" "http"://"localhost:30000""""/api/v1/it-faculty/classes""?pageSize=50" - 200 null "application/json; charset=utf-8" 54.1814ms
2025-06-11T13:39:21.9149012+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF8"" disconnecting.
2025-06-11T13:39:21.9154811+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF8"" stopped.
2025-06-11T13:39:21.9159766+07:00 [DBG] (///) Connection id ""0HND8LEI7JFF8"" sending FIN because: ""The Socket transport's send loop completed gracefully.""
2025-06-11T15:35:41.0043268+07:00 [DBG] (///) Registered model binder providers, in the following order: ["Asp.Versioning.ApiVersionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider", "Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-06-11T15:35:41.1032047+07:00 [DBG] (///) Hosting starting
2025-06-11T15:35:41.1538090+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-11T15:35:41.1554599+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-11T15:35:41.2061277+07:00 [WRN] (///) The ASP.NET Core developer certificate is only trusted by some clients. For information about trusting the ASP.NET Core developer certificate, see https://aka.ms/aspnet/https-trust-dev-cert
2025-06-11T15:35:41.2075051+07:00 [WRN] (///) Overriding address(es) '"http://localhost:5291"'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-06-11T15:35:41.2134352+07:00 [INF] (///) Now listening on: "http://localhost:30000"
2025-06-11T15:35:41.2139098+07:00 [INF] (///) Now listening on: "https://localhost:30001"
2025-06-11T15:35:41.2139661+07:00 [INF] (///) Now listening on: "https://localhost:30002"
2025-06-11T15:35:41.2140690+07:00 [DBG] (///) Loaded hosting startup assembly "FacultyService.Api"
2025-06-11T15:35:41.2142980+07:00 [INF] (///) Application started. Press Ctrl+C to shut down.
2025-06-11T15:35:41.2143709+07:00 [INF] (///) Hosting environment: "Development"
2025-06-11T15:35:41.2144037+07:00 [INF] (///) Content root path: "/home/PNguyen/Workspace/MyProject/distributed_student_management_system/src/FacultyService/FacultyService.Api"
2025-06-11T15:35:41.2144791+07:00 [DBG] (///) Hosting started
2025-06-11T15:41:59.8796383+07:00 [DBG] (///) Config reload token fired. Checking for changes...
2025-06-11T15:41:59.8810772+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-11T15:41:59.8812689+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-11T15:42:00.1327134+07:00 [DBG] (///) Middleware configuration started with options: "{AllowedHosts = *, AllowEmptyHosts = True, IncludeFailureMessage = True}"
2025-06-11T15:42:00.1329033+07:00 [DBG] (///) Wildcard detected, all requests with hosts will be allowed.
2025-06-11T15:42:00.1335082+07:00 [DBG] (///) Config reload token fired. Checking for changes...
